# Quantumult X


> æ›´å¤šä½¿ç”¨æ–¹æ³•ï¼š[QXå¸¸ç”¨çŸ¥è¯†](https://getupnote.com/share/notes/8SiMnOcwXxZ3xEtK4k2v9Gr3pv32/7cfb91ee-6a18-4d71-b1ec-45b71bec633b)

## ç›®å½•

- [æ–°æ‰‹å…¥é—¨](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E6%96%B0%E6%89%8B%E5%85%A5%E9%97%A8)

- [QuantumultXä½¿ç”¨æŒ‡å—](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#quantumultx%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97)

  - [1. äº¤äº’ç•Œé¢(UI)](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#1-%E4%BA%A4%E4%BA%92%E7%95%8C%E9%9D%A2ui)

  - [2. èŠ‚ç‚¹è®¢é˜…](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#2-%E8%8A%82%E7%82%B9%E8%AE%A2%E9%98%85)

  - [3. è§„åˆ™ç³»ç»Ÿ](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#3-%E8%A7%84%E5%88%99%E7%B3%BB%E7%BB%9F)

  - [4. ç­–ç•¥(ç­–ç•¥ç»„)](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#4-%E7%AD%96%E7%95%A5%E7%AD%96%E7%95%A5%E7%BB%84)

  - [5. DNS ç›¸å…³è®¾ç½®](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#5-dns-%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE)

  - [6. MitM & è¯ä¹¦](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#6-mitm--%E8%AF%81%E4%B9%A6)

  - [7. é‡å†™(rewrite)](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#7-%E9%87%8D%E5%86%99rewrite)

  - [10. å…¶ä»–è®¾ç½®](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#10-%E5%85%B6%E4%BB%96%E8%AE%BE%E7%BD%AE)

  - [11. é…ç½®æ–‡ä»¶[`general`]](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#11-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6general)

  - [12. é…ç½®æ–‡ä»¶ç›¸å…³](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#12-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3)

  - [13. èµ„æºè§£æå™¨ä½¿ç”¨æ–¹æ³•](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#13-%E8%B5%84%E6%BA%90%E8%A7%A3%E6%9E%90%E5%99%A8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95)



## ä¸‹è½½åœ°å€

<a href="https://apps.apple.com/app/id1443988620"><img width="200px" alt="Download on App Store" src="https://logos-download.com/wp-content/uploads/2016/06/Download_on_the_App_Store_logo.png"/></a>  

## æˆæƒè¯´æ˜

App Store è´­ä¹°çš„ Quantumult X å¯ä»¥ä¸æœ€å¤š6ä½å®¶åº­æˆå‘˜æˆ–æœ‹å‹å…±äº«ã€‚

å¦‚æœæ­¤æ”¶æ®ç›¸å…³çš„ iCloud ç”¨æˆ·æ•°è¿œè¶…6ä½ï¼Œå¯¹äºä½™ä¸‹çš„ iCloud ç”¨æˆ·ï¼ˆæœªåœ¨æ­¤åˆ—è¡¨ä¸­æ˜¾ç¤ºï¼‰QuantumultX çš„æŸäº›åŠŸèƒ½å¯èƒ½ä¼šè¢«é™åˆ¶ã€‚

å³ï¼š
- iCloud ç›¸åŒæ—¶ï¼šä¸é™åˆ¶è®¾å¤‡æ•°é‡
- iCloud ä¸åŒæ—¶ï¼šé™åˆ¶6ä¸ª iCloud éªŒè¯å’Œç»‘å®š
- æœªç™»å½• iCloud æ—¶ï¼šé™åˆ¶8å°è®¾å¤‡

## ç›¸å…³æ–‡æ¡£

- [å®˜æ–¹ä»“åº“](https://github.com/crossutility/Quantumult-X/tree/master)
- [è§£æå™¨ä½œè€…çš„ç¤ºä¾‹é…ç½®](https://github.com/KOP-XIAO/QuantumultX/blob/4a705faac3cfed6ba0e55d6a71bc3b35036f0f96/QuantumultX_Profiles.conf)
- [ç¥æœºæ•™ç¨‹](https://divineengine.net/more/special/quantumult-x/)
- [QXä½¿ç”¨æ‰‹å†Œ](https://qx.atlucky.me/)

---

# æ–°æ‰‹å…¥é—¨

<details>
  <summary>ç‚¹å‡»æŸ¥çœ‹</summary>

### 1.æ·»åŠ ä»¥ä¸‹ **é…ç½®æ–‡ä»¶** 
> é…ç½®å‚æ•°è§£é‡Šè§ï¼š_[KOP-XIAO/QuantumultX](https://github.com/KOP-XIAO/QuantumultX/blob/master/QuantumultX_Profiles.conf)_

<details>
  <summary>QuantumultX</summary>

- [x] åœ°åŒºåˆ†æµï¼ˆé¦™æ¸¯ã€ç¾å›½ã€æ—¥æœ¬ã€å°æ¹¾ã€æ–°åŠ å¡ï¼‰
- [x] è‹¹æœã€è°·æ­Œã€å¾®è½¯ã€ç”µæŠ¥ã€æ¨ç‰¹åˆ†æµ
- [x] æµåª’ä½“ï¼ˆä¸æ”¯æŒå•ç‹¬åˆ†æµï¼‰
- [x] è‡ªåŠ¨é€‰æ‹©æœ€ä½å»¶è¿Ÿ
- [ ] è´Ÿè½½å‡è¡¡
- [ ] æ•…éšœè½¬ç§»
- [x] å¹¿å‘Šå±è”½é‡å†™
- [ ] é€‚ç”¨äºè½¯è·¯ç”±ç¯å¢ƒ

</details>

```
https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/QuantumultX.conf
```



<details>
  <summary>QuantumultX_tvOS</summary>

- [x] åœ°åŒºåˆ†æµï¼ˆé¦™æ¸¯ã€ç¾å›½ã€æ—¥æœ¬ã€å°æ¹¾ã€æ–°åŠ å¡ï¼‰
- [x] è‹¹æœã€è°·æ­Œã€å¾®è½¯ã€ç”µæŠ¥ã€æ¨ç‰¹åˆ†æµ
- [x] æµåª’ä½“ï¼ˆæ”¯æŒå•ç‹¬åˆ†æµï¼‰
- [x] è‡ªåŠ¨é€‰æ‹©æœ€ä½å»¶è¿Ÿ
- [ ] è´Ÿè½½å‡è¡¡
- [ ] æ•…éšœè½¬ç§»
- [ ] å¹¿å‘Šå±è”½é‡å†™
- [ ] é€‚ç”¨äºè½¯è·¯ç”±ç¯å¢ƒ
- [x] é€‚ç”¨äºtvOS

</details>

```
https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/QuantumultX_tvOS.conf
```

<details>
  <summary>QuantumultX_Pro ğŸš¨ğŸš¨æ–°æ‰‹å‹¿ç¢°ğŸš¨ğŸš¨ </summary>

- [x] åœ°åŒºåˆ†æµï¼ˆé¦™æ¸¯ã€ç¾å›½ã€æ—¥æœ¬ã€å°æ¹¾ã€æ–°åŠ å¡ï¼‰
- [x] è‹¹æœã€è°·æ­Œã€å¾®è½¯ã€ç”µæŠ¥ã€æ¨ç‰¹åˆ†æµ
- [x] æµåª’ä½“ï¼ˆä¸æ”¯æŒå•ç‹¬åˆ†æµï¼‰
- [x] è‡ªåŠ¨é€‰æ‹©æœ€ä½å»¶è¿Ÿ
- [x] è´Ÿè½½å‡è¡¡
- [x] æ•…éšœè½¬ç§»
- [x] å¹¿å‘Šå±è”½é‡å†™
- [x] é€‚ç”¨äºè½¯è·¯ç”±ç¯å¢ƒ

</details>

```
https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/QuantumultX_Pro.conf
```

* è¿è¡Œ **Quantumult X** ï¼Œç‚¹å‡»å³ä¸‹è§’çš„ **é£è½¦** å›¾æ ‡
* å¼¹å‡ºçš„ **è®¾ç½®** èœå•ä¸­ï¼Œåœ¨æœ€ä¸‹æ–¹ **é…ç½®æ–‡ä»¶** åŒºåŸŸï¼Œç‚¹å‡» **ä¸‹è½½é…ç½®**
* å°†é…ç½®æ–‡ä»¶é“¾æ¥å¡«å…¥å¹¶ä¿å­˜
![Image text](https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/%E8%AE%A2%E9%98%85%E9%85%8D%E7%BD%AE.jpg)


### 2.æ·»åŠ æœºåœºè®¢é˜…
> æœºåœºè®¢é˜…æœ¬åœ°è½¬æ¢å¯å‚è€ƒ[Sub-Store æ•™ç¨‹](https://getupnote.com/share/notes/8SiMnOcwXxZ3xEtK4k2v9Gr3pv32/7522F394-6D73-414E-BE04-1455EDB15B9F)

* è¿è¡Œ **Quantumult X**ï¼Œç‚¹å‡»å³ä¸‹è§’çš„ **é£è½¦** å›¾æ ‡
* å¼¹å‡ºçš„ **è®¾ç½®** èœå•ä¸­ï¼Œåœ¨æœ€ä¸Šæ–¹ **èŠ‚ç‚¹** åŒºåŸŸï¼Œç‚¹å‡» **èŠ‚ç‚¹èµ„æº**
* ç‚¹å‡»å³ä¸Šè§’ **ğŸ”—** æŒ‰é’®
* æ·»åŠ æœºåœºè®¢é˜…å¹¶ä¿å­˜
![Image text](https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/%E8%AE%A2%E9%98%85.jpg) 

### 3.ä¸ºé…ç½®æ–‡ä»¶ç”Ÿæˆè¯ä¹¦
* è¿è¡Œ **Quantumult X**ï¼Œç‚¹å‡»å³ä¸‹è§’çš„ **é£è½¦** å›¾æ ‡
* å¼¹å‡ºçš„ **è®¾ç½®** èœå•ä¸­ï¼Œåœ¨ä¸‹æ–¹ **MitM** åŒºåŸŸï¼Œç‚¹å‡» **ç”Ÿæˆè¯ä¹¦**
* ç‚¹å‡» **é…ç½®è¯ä¹¦** ï¼Œ**ç¡®å®š** æç¤ºåï¼Œåœ¨Safariä¸­ **å…è®¸** ä¸‹è½½é…ç½®æ–‡ä»¶
![Image text](https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/%E7%94%9F%E6%88%90%E5%B9%B6%E9%85%8D%E7%BD%AEzhensu.jpg) 

### 4.è®¾ç½®ä¸­å®‰è£…æè¿°æ–‡ä»¶
* åœ¨ **ç³»ç»Ÿè®¾ç½®** ä¸­ï¼Œç‚¹å‡» **å·²ä¸‹è½½æè¿°æ–‡ä»¶** ï¼Œå¹¶ **å®‰è£…**
![Image text](https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/%E8%AE%BE%E7%BD%AE-%E5%AE%89%E8%A3%85%E8%AF%81%E4%B9%A6.jpg)

### 5.è®¾ç½®ä¸­ä¿¡ä»»æè¿°æ–‡ä»¶
* åœ¨ **ç³»ç»Ÿè®¾ç½®** - **é€šç”¨** - **å…³äºæœ¬æœº** - **è¯ä¹¦ä¿¡ä»»è®¾ç½®** ä¸­ï¼Œå‹¾é€‰å·²å®‰è£…çš„æè¿°æ–‡ä»¶
* å®‰è£…å®Œæˆåï¼Œè¿”å›QuantumultXï¼Œå‹¾é€‰ä»¥å¯ç”¨ **MitM** å’Œ **é‡å†™**
![Image text](https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/%E8%AE%BE%E7%BD%AE-%E4%BF%A1%E4%BB%BB%E8%AF%81%E4%B9%A6.jpg)


### 6.æ·»åŠ **GeoLite2**è®¢é˜…
> é¡¹ç›®åœ°å€ï¼š[Hackl0us/GeoIP2-CN](https://github.com/Hackl0us/GeoIP2-CN)
* è¿è¡Œ **Quantumult X**ï¼Œç‚¹å‡»å³ä¸‹è§’çš„ **é£è½¦** å›¾æ ‡
* å¼¹å‡ºçš„ **è®¾ç½®** èœå•ä¸­ï¼Œæ‹‰è‡³æœ€ä¸‹ï¼Œç‚¹å‡» **å…¶ä»–è®¾ç½®**
* åœ¨ **å…¶ä»–è®¾ç½®** ä¸­æ‰¾åˆ° **GeoLite2** åŒºåŸŸï¼Œç‚¹å‡»å³ä¾§çš„ **æ¥æº** æŒ‰é’®
* åœ¨å¼¹å‡ºçš„çª—å£ä¸­ç²˜è´´é¡¹ç›®æä¾›çš„ `Country.mmdb` é“¾æ¥(ä»…åŒ…å«ipv4åœ°å€)ï¼š
```
https://cdn.jsdelivr.net/gh/Hackl0us/GeoIP2-CN@release/Country.mmdb
```
* å»ºè®®å¯ç”¨ **è‡ªåŠ¨æ›´æ–°** åŠŸèƒ½ä»¥ä¿æŒåœ°å€åº“ä¿¡æ¯æœ€æ–°
* ç‚¹å‡» **ç«‹å³æ›´æ–°** å³å¯
![Image text](https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/GeoLite2%E8%AE%A2%E9%98%85.jpg)

### 7.è®¾ç½®åˆ†æµæ¨¡å¼

* é¦–é¡µé•¿æŒ‰å³ä¸‹è§’é£è½¦ï¼Œè®¾ç½®ä¸ºå½©è‰²é£è½¦ï¼ŒåŠä¸ºæŒ‰é…ç½®æ–‡ä»¶ä¸­çš„è§„åˆ™è¿›è¡Œåˆ†æµ

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI1.JPEG">


### ç­–ç•¥ç»„ ä¿®æ”¹ä¸ºæ‰‹åŠ¨é€‰æ‹©èŠ‚ç‚¹
> é»˜è®¤ä¸ºè‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½èŠ‚ç‚¹ï¼Œ**æŒ‰éœ€** ä¿®æ”¹ä¸ºæ‰‹åŠ¨é€‰æ‹©
* åœ¨è‡ªå®šä¹‰ç­–ç•¥ä¸‹çš„åˆ†æµç­–ç•¥ç»„ä¸­é€‰æ‹©éœ€è¦çš„åœ°åŒºèŠ‚ç‚¹ï¼Œæ­¤å¤„ä»¥ **å…¨çƒåŠ é€Ÿ** ä¸¾ä¾‹ï¼Œé€‰æ‹© **é¦™æ¸¯èŠ‚ç‚¹**
* ä¸‹æ‹‰åˆ°ä¸‹æ–¹çš„ **é¦™æ¸¯èŠ‚ç‚¹** ç­–ç•¥ç»„ï¼Œæ­¤æ—¶è¯¥ç­–ç•¥ç»„ä»¥ `url-latency-benchmark` è¿è¡Œï¼Œå³æŒ‰æœ€ä½å»¶è¿Ÿé€‰æ‹©èŠ‚ç‚¹
* å¦‚æœè¦ä¿®æ”¹ä¸ºæ‰‹åŠ¨é€‰æ‹©èŠ‚ç‚¹ï¼Œåˆ™é•¿æŒ‰ **é¦™æ¸¯èŠ‚ç‚¹** ç­–ç•¥ç»„ï¼Œ **ç±»å‹** é€‰æ‹© `static`ï¼Œå¹¶ä¿å­˜
* åœ¨ **é¦™æ¸¯èŠ‚ç‚¹** ç­–ç•¥ç»„ä¸­é€‰æ‹©éœ€è¦çš„èŠ‚ç‚¹ï¼Œåˆ™ **å…¨çƒåŠ é€Ÿ** ç­–ç•¥ç»„èµ° **é¦™æ¸¯èŠ‚ç‚¹** ä¸­é€‰æ‹©çš„èŠ‚ç‚¹
```yaml
static                 # æ‰‹åŠ¨é€‰æ‹©æƒ³è¦çš„èŠ‚ç‚¹/ç­–ç•¥ç»„ã€‚
available              # å°†æŒ‰é¡ºåºé€‰æ‹©ä½ åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå¯ç”¨çš„èŠ‚ç‚¹ã€‚
round-robin            # å°†æŒ‰åˆ—è¡¨çš„é¡ºåºè½®æµä½¿ç”¨å…¶ä¸­çš„èŠ‚ç‚¹ã€‚
url-latency-benchmark  # è‡ªåŠ¨é€‰å–å»¶è¿Ÿæœ€ä¼˜èŠ‚ç‚¹ã€‚
dest-hash              # éšæœºè´Ÿè½½å‡è¡¡ï¼Œä½†ç›¸åŒåŸŸåèµ°å›ºå®šèŠ‚ç‚¹ã€‚
```
![1](https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/%E6%89%8B%E5%8A%A8%E7%AD%96%E7%95%A5.jpg)


</details>



---

# QuantumultXä½¿ç”¨æŒ‡å—ï¼Ÿ

> å»ºè®®ç»“åˆç›®å½•ä¸€åŒæŸ¥çœ‹

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/Menu.png">

## 1. äº¤äº’ç•Œé¢(UI)

### 1.1 é¦–é¡µUI(èŠ‚ç‚¹)
<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI1.JPEG">

#### 1.1.1 ã€Œé£è½¦ã€æŒ‰é’®

å•å‡»ã€Œé£è½¦ã€æŒ‰é’®è¿›å…¥ã€Œè®¾ç½®ã€é¡µé¢

é•¿æŒ‰ã€Œé£è½¦ã€æŒ‰é’®ï¼Œè¿›å…¥è®¾ç½®åˆ†æµæ¨¡å¼ä¸èµ„æºæ›´æ–°ç•Œé¢

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI2.PNG" width="900">

- è®¾ç½®åˆ†æµæ¨¡å¼
  - è“ç»¿è‰²é£è½¦ï¼šå…¨éƒ¨ä»£ç†ï¼Œå³æ‰€æœ‰è¯·æ±‚å‡ä½¿ç”¨PROXYé€‰æ‹©çš„èŠ‚ç‚¹è®¿é—®
  - çº¯é»„è‰²é£è½¦ï¼šå…¨éƒ¨ç›´è¿ï¼Œå³æ‰€æœ‰è¯·å‡ä¸ä½¿ç”¨èŠ‚ç‚¹è®¿é—®
  - ä¸‰è‰²é£è½¦ï¼šè§„åˆ™æ¨¡å¼ï¼Œç”±åˆ†æµè§„åˆ™åŠæ‰€æœ‰ç­–ç•¥ï¼ˆå†…ç½®ä»¥åŠè‡ªå®šä¹‰ç­–ç•¥ï¼‰å…±åŒæ±ºå®šæ˜¯å¦é€šè¿‡èŠ‚ç‚¹ä»¥åŠé€šè¿‡ä»€ä¹ˆèŠ‚ç‚¹è®¿é—®ã€‚

- èµ„æºæ›´æ–°
  - ç‚¹å‡»ğŸ”åœ†å½¢æŒ‰é’®æ›´æ–°æ‰€æœ‰å¤–éƒ¨èµ„æºï¼ŒåŒ…æ‹¬èŠ‚ç‚¹ã€åˆ†æµã€é‡å†™åŠå…¶å¼•ç”¨çš„è„šæœ¬
  - å¦‚æœåªéœ€è¦æ›´æ–°èŠ‚ç‚¹æˆ–é‡å†™ï¼Œå¯ä»¥è¿›å…¥è®¾ç½®-åˆ†æµ/é‡å†™-èµ„æºè§„åˆ™ï¼Œå¯¹æŒ‡å®šçš„èµ„æºå·¦æ»‘ï¼Œç‚¹å‡»ğŸ”å•ç‹¬æ›´æ–°ï¼›æˆ–ç‚¹å‡»å³ä¸Šè§’å…¨éƒ¨æ›´æ–°
  - å¦‚æœéœ€è¦æ›´æ–°é‡å†™å†…çš„è„šæœ¬ï¼Œå¯ä»¥å·¦æ»‘æŒ‡å®šé‡å†™èµ„æºï¼Œç‚¹å‡»ã€ŒğŸ”ã€â†’ã€Œå…¨éƒ¨æ›´æ–°ã€

  <img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI3.PNG" width="300">

  - å½“å·¦ä¸Šè§’å‡ºç°çº¢è‰²ğŸ”ºè­¦å‘Šæ—¶ï¼Œè¡¨ç¤ºæœ‰èµ„æºå‡ºç°é—®é¢˜ï¼Œå¯èƒ½æ˜¯å¼•ç”¨äº†é”™è¯¯çš„èµ„æºæˆ–ä¸ç¬¦åˆQXçš„èµ„æºæ ¼å¼ï¼Œç‚¹å‡»è¯¥ğŸ”ºè­¦å‘ŠæŒ‰é’®ï¼Œå³å¯æŸ¥çœ‹å‡ºç°é—®é¢˜çš„èµ„æº


#### 1.1.2 èŠ‚ç‚¹ GEO ä¿¡æ¯æ˜¾ç¤º

å·¦ä¸Šè§’çš„èŠ‚ç‚¹æ˜¾ç¤ºåŒºåŸŸï¼Œå¯ä»¥ä¿®æ”¹é…ç½®æ–‡ä»¶(ç‚¹å·¦ä¸‹è§’çš„ç¼–è¾‘)ï¼Œä¿®æ”¹`geo_location_checker`å‚æ•°ï¼Œå¯ä»¥æ˜¾ç¤ºä¸åŒæ ·å¼çš„ä¿¡æ¯

ä¾‹å¦‚ï¼š

```
[general]
geo_location_checker=disabled
;geo_location_checker = http://ip-api.com/json/?lang=zh-CN, https://mirror.ghproxy.com/https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Quantumult/Script/geo_location_checker.js
```
`disabled`è¡¨ç¤ºå…³é—­ï¼›

`#`æˆ–`;`æˆ–`//`è¡¨ç¤ºæ³¨é‡Šï¼Œå³èµ·è¯´æ˜ä½œç”¨æˆ–è€…ä¸ç”Ÿæ•ˆï¼Œåˆ é™¤åˆ™è¡¨ç¤ºå¯ç”¨ï¼Œæ³¨æ„ä¸è¦åŒæ—¶å¯ç”¨ä¸¤ä¸ª`geo_location_checker`

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/geochecker.jpg" width="300">


ä»¥ä¸‹æ˜¯æœé›†çš„`geo_location_checker`
```
geo_location_checker = http://ip-api.com/json/?lang=zh-CN, https://jexxagn.netlify.app/IP-API.js
```

```
geo_location_checker = http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/GeoLocationChecker/QuantumultX/IP-API.js
```

```
geo_location_checker = http://ip-api.com/json, https://raw.githubusercontent.com/kiksong/qsc/master/qx/script/IPInfo.js
```

```
geo_location_checker = http://ip-api.com/json/?fields=8450015&lang=zh-CN,https://raw.githubusercontent.com/deezertidal/QuantumultX-Rewrite/master/rewrite/ip-api.js
```


```
geo_location_checker = http://ip-api.com/json/?lang=zh-CN, https://github.com/KOP-XIAO/QuantumultX/raw/master/Scripts/IP_API.js
```

```
geo_location_checker = http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Quantumult/Script/geo_location_checker.js
```

### 1.2 ç½‘ç»œæ´»åŠ¨

é¡¶éƒ¨4ä¸ªæŒ‰é’®åˆ†åˆ«ä»£è¡¨ï¼š

TCPè¯·æ±‚ã€UDPè¯·æ±‚ã€DNSç»„ç»‡åŸŸåã€è„šæœ¬è®°å½•

å…¶ä¸­ TCPã€UDP è¯·æ±‚ ä¸ºæ·±è‰²æ—¶ è¡¨ç¤ºå±•ç¤ºå½“å‰è¯·æ±‚

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI5-1.jpg" >


#### 1.2.1 TCP è¯·æ±‚

- ä¸»è¦UI

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI5-2.PNG" >

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI5-2-F.jpg" width="300">

- è¯¦ç»†ä¿¡æ¯

  ç‚¹å‡»å¯¹åº”æ¡ç›®ï¼Œå¯æŸ¥çœ‹ä¸»æœºåã€å‘½ä¸­çš„è§„åˆ™&ä½¿ç”¨ç­–ç•¥ã€åˆ†æµèµ°å‘ã€æµé‡å¤§å°ã€ä½¿ç”¨èŠ‚ç‚¹ä¿¡æ¯ã€é‡å†™ä¿®æ”¹ç­‰

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI5-6.JPG" >


- DNS é”™è¯¯

  å½“é‡è§DNSæŸ¥è¯¢ä¸åˆ°çš„åŸŸåæ—¶ï¼Œä¼šæœ‰å¦‚ä¸‹ `ğŸŒN/A` æ˜¾ç¤ºï¼Œä¸”å³ä¾§æ²¡æœ‰`çº¢ğŸ”’`
<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI5-3.jpg" >

- MitM

  MitMæˆåŠŸä¼šæœ‰`ç»¿ğŸ”’`

  ä½¿ç”¨é‡å†™å¯¹è¯·æ±‚è¿›è¡Œä¿®æ”¹ï¼Œä¼šæœ‰`çº¢ğŸ–Š`

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI5-4.jpg" >

- MitM å¤±è´¥

  å½“é‡è§MitMå¤±è´¥æ—¶ï¼Œä¼šæœ‰å¦‚ä¸‹ `N/A` æ˜¾ç¤ºï¼Œä¸”å³ä¾§æœ‰`çº¢ğŸ”’`

  æ­¤æ—¶å»ºè®®æŸ¥è¯¢æ˜¯å¯¹åº”çš„ä¸»æœºåï¼Œå¦‚æœæ³¢åŠæ­£å¸¸åŸŸåï¼Œå»ºè®®æŸ¥è¯¢å¯¹åº”çš„é‡å†™èµ„æºå¹¶å°†å…¶å…³é—­

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI5-5.JPG" >

#### 1.2.2 UDP è¯·æ±‚

- ä¸»è¦UI

  `PORT,BLOCK` é€šå¸¸æ˜¯ [UDPç›¸å…³è®¾ç½®](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#udp) å¯¼è‡´

  ä¾‹å¦‚ ç”¨æ¥é˜»æ­¢ æ²¹ç®¡ HTTP/3 è¯·æ±‚çš„ `udp_drop_list=443`ï¼Œä½¿å…¶å›é€€è‡³å¯ä»¥è¢« MitM çš„è¯·æ±‚ï¼Œç”¨äºå»å¹¿å‘Š
  
  å…¶ä½™ç»†èŠ‚å‚è€ƒ TCP è¯·æ±‚


<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI5-7.jpg" >

#### 1.2.3 æœç´¢è¯·æ±‚


  ç‚¹å‡»å·¦ä¸‹è§’ğŸ”å³å¯å¯¹è¯·æ±‚æ•°æ®è¿›è¡Œç­›é€‰æˆ–æœç´¢

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI5-8.JPG" width="600">


#### 1.2.4 è„šæœ¬è®°å½•

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/JS.JPG" width="900">

#### 1.2.5 DNS æŸ¥è¯¢è®°å½•

ç‚¹å‡»ä¸‹æ–¹ ã€ŒğŸŒDNS æŸ¥è¯¢è®°å½•ã€æŒ‰é’®ã€€å³å¯æŸ¥çœ‹

é•¿æŒ‰è¯¥æŒ‰é’®å³å¯å¼¹å‡ºã€€ã€ŒDNSé˜»æ­¢çš„åŸŸåã€

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/DNS_F.JPG" width="900">


### 1.3 åˆ†æµè§„åˆ™

è§åæ–‡[è§„åˆ™ç³»ç»Ÿ](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E8%A7%84%E5%88%99%E7%B3%BB%E7%BB%9F)



### 1.4 é‡å†™è§„åˆ™


### 1.5 æµé‡ç»Ÿè®¡ & æµé€Ÿç»Ÿè®¡ 

#### 1.5.1 æµé‡ç»Ÿè®¡

ç‚¹å‡»åº•éƒ¨ã€Œæµé‡ç»Ÿè®¡ã€æŒ‰é’®ï¼ŒæŸ¥çœ‹æœ¬æ¬¡å¯åŠ¨VPNåä½¿ç”¨çš„æ€»æµé‡ç»Ÿè®¡åŠå„èŠ‚ç‚¹æµé‡ç»Ÿè®¡ï¼›

ç‚¹å‡»åº•éƒ¨å³ä¾§æŒ‰é’®ï¼Œå¯åˆ‡æ¢è‡³æµé€Ÿç»Ÿè®¡

ç‚¹å‡»å³ä¸Šè§’æŒ‰é’®ï¼ŒæŸ¥çœ‹å·²å®Œæˆçš„æµé‡ç»Ÿè®¡åŠå„è¯·æ±‚æµé‡ç»Ÿè®¡

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI4-1.jpg" width="900">

#### 1.5.2 æµé€Ÿç»Ÿè®¡

é•¿æŒ‰åº•éƒ¨ã€Œæµé‡ç»Ÿè®¡ã€æŒ‰é’®ï¼ŒæŸ¥çœ‹æœ¬æ¬¡å¯åŠ¨VPNåçš„ä½¿ç”¨æ—¶é—´åŠå„èŠ‚ç‚¹å®æ—¶æµé€ŸåŠæœ€å¤§æµé€Ÿï¼›

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI4-2.jpg" width="600">


### 1.6 è°ƒæ•´UI

ç‚¹å‡»å³ä¸‹è§’ã€Œé£è½¦ã€â†’ è¿›å…¥æœ€ä¸‹æ–¹ã€Œé¢æ¿&å·¥å…·æ ã€è°ƒæ•´

> éƒ¨åˆ†UIè®¾ç½®åœ¨iPadOSä¸Šä¸å¯ç”¨

- å¯å¯¹ é¦–é¡µé¡¶éƒ¨æŒ‰é’®è¿›è¡Œæ’åº
- é¢æ¿æ ·å¼å¯è¿›è¡Œè°ƒæ•´
- é¡µé¢æ ·å¼å¯è¿›è¡Œè°ƒæ•´
- åº•éƒ¨å·¥å…·æ æŒ‰é’®&æ ·å¼å¯è¿›è¡Œè°ƒæ•´

#### 1.6.1 è°ƒæ•´å›¾æ ‡

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/ICON.jpg" width="600">

- é•¿æŒ‰ç­–ç•¥ç»„/èŠ‚ç‚¹èµ„æº â†’ å›¾æ ‡
- QXèŠ‚ç‚¹èµ„æºåŒºåŸŸçš„å›¾æ ‡åªæ”¯æŒå•è‰²ï¼Œç­–ç•¥ç»„åŒºåŸŸæ”¯æŒå½©è‰²ï¼›
- å›¾æ ‡åˆ†è¾¨ç‡é™åˆ¶144x144ã€108x108ï¼›
- ä¿®æ”¹é…ç½®æ–‡ä»¶çš„ `img-url` å³å¯è‡ªå®šä¹‰å›¾æ ‡
- ç‚¹æ­¤æŸ¥çœ‹[å›¾æ ‡é›†](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E5%9B%BE%E6%A0%87%E9%9B%86)



## 2. èŠ‚ç‚¹è®¢é˜…

ä»¥ä¸‹ä¸»è¦è®²çš„æ˜¯ `[server_local]`ã€`[server_remote]` æˆ– `[general]` åŒºå—ä¸‹çš„å†…å®¹ï¼Œæ‰€ä»¥ç¤ºä¾‹ä»¥`[server_local]`ã€`[server_remote]` æˆ– `[general]`  å¼€å¤´è¡¨æ˜åœ¨å…¶ä¹‹ä¸‹ï¼Œå¹¶ä¸æ˜¯è®©ä½ æ¯ä¸ªå‚æ•°å­—æ®µå‰éƒ½åŠ ä¸Š `[server_local]`ã€`[server_remote]` æˆ– `[general]` ã€‚


### 2.1 æ·»åŠ è¿œç¨‹èŠ‚ç‚¹è®¢é˜…

#### 2.1.1 UIæ·»åŠ 

- é•¿æŒ‰æœ€ä¸Šæ–¹ã€ŒèŠ‚ç‚¹ã€æŒ‰é’®ï¼Œå³å¯è¿›å…¥æ·»åŠ æœºåœºè®¢é˜…ï¼Œæ•ˆæœå’Œä¸‹å›¾æ˜¯ä¸€è‡´çš„
- åˆ‡è®°ä¸è¦ä½¿ç”¨ä¸€é”®å¯¼å…¥ï¼Œè€Œæ˜¯å¤åˆ¶é€šç”¨è®¢é˜…ï¼›å¦‚æœæ˜¯éé€šç”¨è®¢é˜…ï¼Œå¯ä»¥å°è¯•å¼€å¯èµ„æºè§£æå™¨è¿›è¡Œä½¿ç”¨(æœ¬åœ°è½¬æ¢ï¼Œæ— æ³„æ¼é£é™©ï¼Œä½†ä¸ä»£è¡¨è½¬æ¢åä¸€å®šå¯ç”¨)

  - å¦‚æœä½ çš„è§£æå™¨æ˜¯ç©ºçš„ï¼Œã€ŒèŠ‚ç‚¹é¡µã€ç‚¹å‡»å·¦ä¸‹è§’ç¼–è¾‘ï¼Œéœ€è¦åœ¨ `[general]` ä¸‹æ·»åŠ ï¼š

```
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js 
```

![æ·»åŠ æœºåœºè®¢é˜…](https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/%E8%AE%A2%E9%98%85.jpg) 

#### 2.1.2 é…ç½®æ–‡ä»¶æ·»åŠ 

```
[server_remote]
https://example.com/provider.txt, tag=æœºåœºåç§°, img-url=hhttps://example.com/airport.png, update-interval=86400, opt-parser=false, inserted-resource=false, enabled=true 
```

å¯¹åº”çš„å®Œæ•´å‚æ•°ï¼š

`<èµ„æºè·¯å¾„>, <èµ„æºæ ‡ç­¾>, <èµ„æºå›¾æ ‡>ï¼Œ<è‡ªåŠ¨æ›´æ–°æ—¶é—´é—´éš”>, <æ˜¯å¦ä½¿ç”¨èµ„æºè§£æå™¨>, <æ’å…¥èµ„æº>, <æ˜¯å¦å¯ç”¨>`

- `tag` èµ„æºæ ‡ç­¾ï¼šç›¸å½“äºåç§°ï¼Œæ ‡è¯†è¿™æ¡èŠ‚ç‚¹è®¢é˜…çš„ä½œç”¨ï¼›

- `img-url` è‡ªå®šä¹‰å›¾æ ‡å‚æ•°æ˜¯å¯é€‰çš„ï¼Œä½¿ç”¨å®ƒå¯ä»¥æ›´ç¾è§‚äº›ï¼Œä½†æ­¤å¤„ä¸æ˜¾ç¤ºå½©è‰²å›¾æ ‡

- `update-interval` è‡ªåŠ¨æ›´æ–°çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’ï¼›

- `opt-parser` æ˜¯å¦ä½¿ç”¨èµ„æºè§£æå™¨ï¼Œè‹¥å…³é—­åˆ™æ”¹ä¸º `false`ï¼›

- `inserted-resource` æ’å…¥èµ„æºï¼Œå°†æ–‡ä»¶ä¸­çš„èŠ‚ç‚¹æ”¾ç½®äºæœ¬åœ°èŠ‚ç‚¹ä¹‹å‰ï¼›

- `enabled` æ˜¯å¦å¯ç”¨è¯¥èŠ‚ç‚¹è®¢é˜…æ–‡ä»¶ï¼Œè‹¥ä¸ä½¿ç”¨å¯æ”¹ä¸º `false`ï¼›


### 2.2 æ·»åŠ æœ¬åœ°èŠ‚ç‚¹

#### 2.2.1 é…ç½®æ–‡ä»¶

å°†èŠ‚ç‚¹å†…å®¹å¤åˆ¶ç²˜è´´åˆ°é…ç½®æ–‡ä»¶`[server_loacl]`ä¸‹,ä¼šå¢åŠ ä¸€ä¸ªã€Œå·²ä¿å­˜ã€

ä½†æ˜¯è¿™æ ·åšä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šæ— æ³•åœ¨ç­–ç•¥ç»„ä¸­ä½¿ç”¨æ­£åˆ™å‚æ•°è¿›è¡Œç­›é€‰ï¼Œå…·ä½“[ç­–ç•¥ç»„å‚æ•°](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E7%AD%96%E7%95%A5%E5%8F%82%E6%95%B0)

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/server_loacl_1.jpg" width="1200">

#### 2.2.2 é…ç½®ç‰‡æ®µæ·»åŠ 

ä½¿ç”¨é…ç½®ç‰‡æ®µçš„æ–¹å¼æ·»åŠ ï¼Œç±»ä¼¼äºæ·»åŠ è¿œç¨‹èŠ‚ç‚¹è®¢é˜…ï¼Œåªä¸è¿‡å¼•ç”¨çš„è¿œç¨‹èµ„æºæ˜¯æœ¬åœ°æ–‡ä»¶

âš ï¸ æ³¨æ„ï¼šæ·»åŠ é…ç½®ç‰‡æ®µæ—¶ï¼Œæ— éœ€å¸¦æœ‰`[server_local]`ã€`[server_remote]`ã€`[filter_local]`ã€`[filter_remote]` ç­‰å­—æ®µ

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/server_loacl_2.PNG" width="900">

#### 2.2.3 èŠ‚ç‚¹æ ¼å¼ï¼š

  > æ¬è¿è‡³[@KOP-XIAO](https://github.com/KOP-XIAO/QuantumultX/blob/4a705faac3cfed6ba0e55d6a71bc3b35036f0f96/QuantumultX_Profiles.conf#L237)

<details>
  <summary>ç‚¹å‡»æŸ¥çœ‹</summary>

##### shadowsocksä»¥åŠshadowsocksRç±»å‹

æ”¯æŒ V2-Pluginï¼›æ”¯æŒUDPï¼Œæ”¯æŒUDP-OVER-TCPï¼ˆç‰ˆæœ¬1.0.29 665+ï¼‰
```
shadowsocks=ss-a.example.com:80, method=chacha20, password=pwd, obfs=http, obfs-host=bing.com, obfs-uri=/resource/file, fast-open=false, udp-relay=false, server_check_url=http://www.apple.com/generate_204, tag=Sample-A

shadowsocks=ss-b.example.com:80, method=chacha20, password=pwd, obfs=http, obfs-host=bing.com, obfs-uri=/resource/file, fast-open=false, udp-relay=false, tag=Sample-B

shadowsocks=ss-c.example.com:443, method=chacha20, password=pwd, obfs=tls, obfs-host=bing.com, fast-open=false, udp-relay=false, tag=Sample-C

shadowsocks=ssr-a.example.com:443, method=chacha20, password=pwd, ssr-protocol=auth_chain_b, ssr-protocol-param=def, obfs=tls1.2_ticket_fastauth, obfs-host=bing.com, tag=Sample-D

shadowsocks=ws-a.example.com:80, method=aes-128-gcm, password=pwd, obfs=ws, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=Sample-E

shadowsocks=ws-b.example.com:80, method=aes-128-gcm, password=pwd, obfs=ws, fast-open=false, udp-relay=false, tag=Sample-F

shadowsocks=ws-tls-a.example.com:443, method=aes-128-gcm, password=pwd, obfs=wss, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=Sample-G

shadowsocks=ws-tls-a.example.com:443, method=aes-128-gcm, password=pwd, udp-over-tcp=true fast-open=false, udp-relay=false, tag=Sample-H
```

##### vmess ç±»å‹

wsï¼Œwss(ws+tls),over-tls,tcpï¼Œæ”¯æŒ UDPï¼›

vmess ç±»å‹èŠ‚ç‚¹é»˜è®¤å¼€å¯ aeadï¼Œå…³é—­è¯·ç”¨ aead=false

- ws ç±»å‹
```
vmess=ws-c.example.com:80, method=chacha20-ietf-poly1305, password= 23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs-host=ws-c.example.com, obfs=ws, obfs-uri=/ws, fast-open=false, udp-relay=false, aead=false, tag=Sample-H
```
- wss(ws+tls) ç±»å‹
```
vmess=ws-tls-b.example.com:443, method=chacha20-ietf-poly1305, password= 23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs-host=ws-tls-b.example.com, obfs=wss, obfs-uri=/ws, tls-verification=true,fast-open=false, udp-relay=false, tag=Sample-I
```
  
- http ç±»å‹
```
vmess=example.com:80, method=chacha20-poly1305, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs=http, obfs-host=bing.com, obfs-uri=/resource/file, fast-open=false, udp-relay=false, server_check_url=http://www.apple.com/generate_204, tag=vmess-http
```

- tcp ç±»å‹
```
vmess=vmess-a.example.com:80, method=aes-128-gcm, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, fast-open=false, udp-relay=false, tag=Sample-J

vmess=vmess-b.example.com:80, method=none, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, fast-open=false, udp-relay=false, tag=Sample-K
```
- over-tls ç±»å‹
```
vmess=vmess-over-tls.example.com:443, method=none, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs-host=vmess-over-tls.example.com, obfs=over-tls, tls-verification=true, fast-open=false, udp-relay=false, tag=Sample-L
```

##### http(s) ç±»å‹
```
http=http.example.com:80, username=name, password=pwd, fast-open=false, udp-relay=false, tag=http

http=https.example.com:443, username=name, password=pwd, over-tls=true, tls-verification=true, tls-host=example.com, tls-verification=true, fast-open=false, udp-relay=false, tag=http-tls
```

##### socks5 ç±»å‹èŠ‚ç‚¹
```
socks5=example.com:80,fast-open=false, udp-relay=false, tag=socks5-01

socks5=example.com:80, username=name, password=pwd, fast-open=false, udp-relay=false, tag=socks5-02

socks5=example.com:443, username=name, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, fast-open=false, udp-relay=false, tag=socks5-tls-01

socks5=example.com:443, username=name, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, tls-pubkey-sha256=eb5ec6684564fd0d04975903ed75342d1b9fdc2096ea54b4cf8caf4740f4ae25, fast-open=false, udp-relay=false, tag=socks5-tls-02
```

##### trojan ç±»å‹
æ”¯æŒ over-tls ä»¥åŠ websocketsï¼Œæ”¯æŒ UDP
```
trojan=example.com:443, password=pwd, over-tls=true, tls-verification=true, fast-open=false, udp-relay=true, tag=trojan-tls-01

trojan=example1.com:443, password=pwd, over-tls=true, tls-host=example.com, tls-verification=true, fast-open=false, udp-relay=false, tag=trojan-tls-02

trojan=192.168.1.1:443, password=pwd, obfs=wss, obfs-host=example.com, obfs-uri=/path, udp-relay=true, tag=trojan-wss-05
```

</details>

### 2.3 èŠ‚ç‚¹å»¶è¿Ÿ

è¯¥è®¾ç½®ä¸€èˆ¬é€šè¿‡é…ç½®æ–‡ä»¶`[general]`ä¸‹çš„å‚æ•°è¿›è¡Œé…ç½®
```
[general]
network_check_url = http://wifi.vivo.com.cn/generate_204
server_check_url = http://1.1.1.1/generate_204
; server_check_user_agent = Agent/1.0
server_check_timeout = 5000
```

- `network_check_url` ç½‘ç»œæ£€æŸ¥ URL è®¾ç½®ï¼›
- `server_check_url` ä»£ç†æœåŠ¡å™¨ç½‘ç»œæ£€æŸ¥ URL è®¾ç½®ï¼›
- `server_check_user_agent` ä»£ç†æœåŠ¡å™¨æ£€æŸ¥çš„ User Agent è‡ªå®šä¹‰è®¾ç½®ï¼›
- `server_check_timeout` æµ‹è¯•è¶…æ—¶è®¾ç½®ï¼Œå•ä½ä¸º msï¼›

#### 2.3.1 è§¦å‘èŠ‚ç‚¹å»¶è¿Ÿæµ‹è¯•

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/Server_tets.jpg" width="600">

- å•å‡»èŠ‚ç‚¹èµ„æºå›¾æ ‡/ç­–ç•¥ç»„å›¾æ ‡ï¼Œå³å¯å¯¹è¯¥é¡¹ç›®ä¸‹çš„æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œæµ‹è¯•
- èŠ‚ç‚¹èµ„æº(PROXY)åŒºåŸŸ,é•¿æŒ‰èŠ‚ç‚¹ï¼Œå³å¯å¯¹å•ä¸ªèŠ‚ç‚¹è¿›è¡Œæµ‹è¯•

Quantumult ä½¿ç”¨ HEAD æ–¹æ³•å‘ `server_check_url` å‘é€ HTTP è¯·æ±‚æ¥æµ‹è¯•ä»£ç†çš„çŠ¶æ€ï¼Œç»“æœåº”è¯¥æ˜¯ä¸¤ä¸ªå»¶è¿Ÿï¼š
- ç¬¬ä¸€ä¸ªæ˜¯åˆ°ä»£ç†æœåŠ¡å™¨çš„ TCP æ¡æ‰‹
- ç¬¬äºŒä¸ªæ˜¯ HTTP å»¶è¿Ÿï¼ˆQuantumult æˆåŠŸæ¥æ”¶åˆ° HTTP ä¹‹é—´çš„æŒç»­æ—¶é—´ï¼‰æ¥è‡ª server_check_url çš„å“åº”å’Œ Quantumult å¼€å§‹å°† HTTP è¯·æ±‚å‘é€åˆ° server_check_urlï¼‰

âš ï¸ æ³¨æ„ï¼š

> å¦‚æœ `[server_local]` æˆ– `[server_remote]` åŒºå—ä¸­çš„æœåŠ¡å™¨æœ‰è‡ªå·±çš„`server_check_url`ï¼Œåˆ™å°†ä½¿ç”¨å…¶è‡ªå·±çš„`server_check_url`ï¼Œè€Œä¸æ˜¯`[general]`åŒºå—ä¸­çš„`server_check_url`ã€‚


### 2.4 èŠ‚ç‚¹æ ‡è¯†è¯´æ˜

èŠ‚ç‚¹åæ ‡è¯†ï¼š

- ğŸ…°ï¼šVmess åè®®çš„AEADï¼ˆaead=trueï¼‰
- ğŸ…µï¼štcp-fast-open å¼€å¯ï¼ˆfast-open=trueï¼‰
- ğŸ†„ï¼šUDP å¼€å¯ï¼ˆudp-relay=trueï¼‰

- ğŸ†‚ï¼štlsï¼Œå¼€å¯éªŒè¯ï¼ˆtls-verification=trueï¼‰
- ğŸ…‚ï¼štlsï¼Œæœªå¼€å¯éªŒè¯ï¼ˆtls-verification=falseï¼‰
- ğŸ…¿ï¼štls-cert-sha256 / tls-pubkey-sha256 è‡ªå®šä¹‰éªŒè¯å‚æ•°

- ğŸ†„ ğŸ…µ æ˜¾ç¤ºä»…ä»£è¡¨é…ç½®å¼€å¯ï¼Œä¸ä»£è¡¨æœåŠ¡ç«¯æ”¯æŒ
- é»‘è‰²âš¡ï¸è¡¨ç¤º TFO è§¦å‘æˆåŠŸ

èŠ‚ç‚¹å‰æ ‡è¯†ï¼š
- âš ï¸ï¼šæ ‡è¯†æœ‰èŠ‚ç‚¹åç§°é‡å¤



### 2.5 èŠ‚ç‚¹èµ„æºå›¾æ ‡

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/ICON.jpg" width="600">

- é•¿æŒ‰ç­–ç•¥ç»„/èŠ‚ç‚¹èµ„æº â†’ å›¾æ ‡
- QXèŠ‚ç‚¹èµ„æºåŒºåŸŸçš„å›¾æ ‡åªæ”¯æŒå•è‰²ï¼Œç­–ç•¥ç»„åŒºåŸŸæ”¯æŒå½©è‰²ï¼›
- å›¾æ ‡åˆ†è¾¨ç‡é™åˆ¶144x144ã€108x108ï¼›
- ä¿®æ”¹é…ç½®æ–‡ä»¶çš„ `img-url` å³å¯è‡ªå®šä¹‰å›¾æ ‡
- ç‚¹æ­¤æŸ¥çœ‹[å›¾æ ‡é›†](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E5%9B%BE%E6%A0%87%E9%9B%86)


## 3. è§„åˆ™ç³»ç»Ÿ

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI2.JPEG" width="900">


ä»¥ `;` æˆ– `#` æˆ– `//` å¼€å¤´çš„è¡Œä¸ºæ³¨é‡Šè¡Œã€‚

ä»¥ä¸‹ä¸»è¦è®²çš„æ˜¯ `[filter_local]`ã€`[filter_remote]` æˆ– `[policy]`  åŒºå—ä¸‹çš„å†…å®¹ï¼Œæ‰€ä»¥ç¤ºä¾‹éƒ½ä»¥ `[filter_local]`ã€`[filter_remote]` æˆ– `[policy]` å¼€å¤´è¡¨æ˜åœ¨å…¶ä¹‹ä¸‹ï¼Œå¹¶ä¸æ˜¯è®©ä½ æ¯ä¸ªå‚æ•°å­—æ®µå‰éƒ½åŠ ä¸Š `[filter_local]`ã€`[filter_remote]` æˆ– `[policy]`ã€‚



### 3.1 ã€ŒFilterã€å‚æ•°

ã€ŒFilterã€å³åˆ†æµè§„åˆ™ï¼Œè§„åˆ™ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼š

```
<è§„åˆ™ç±»å‹>, <å†…å®¹æ¡ä»¶>, <ç­–ç•¥>, ã€Œå‚æ•°ã€
```

Quantumult X é»˜è®¤æœ‰ 3 ä¸ªè‡ªå¸¦ç­–ç•¥ï¼š

- `DIRECT` ç›´è¿
- `PROXY` ä»£ç† (éœ€æ·»åŠ èŠ‚ç‚¹è®¢é˜…ä½¿ç”¨)
- `REJECT` é˜»æ­¢


### 3.2 æ·»åŠ  **æœ¬åœ°è§„åˆ™** 

æ·»åŠ æœ¬åœ°è§„åˆ™æ–¹æ³•å¦‚å›¾ï¼š

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI2-1.JPEG" width="600">

æˆ–ç›´æ¥æŒ‰ç…§ä¸‹æ–‡é‡Œæ‰€ç¤ºæ ¼å¼ï¼Œå†™å…¥é…ç½®æ–‡ä»¶çš„ `[filter_local]`

- ç›´æ¥ç‚¹å‡»é¡¶éƒ¨ã€Œåˆ†æµè§„åˆ™ã€æŒ‰é’®ï¼Œå³å¯æŸ¥çœ‹æ‰€æœ‰è§„åˆ™åŠå…¶é¡ºåº(åŒ…æ‹¬æœ¬åœ°å’Œè¿œç¨‹è§„åˆ™é‡Œé¢çš„æ¯ä¸€æ¡)

- ä¹Ÿå¯ä»¥ç‚¹å‡» å³ä¸‹è§’é£è½¦ â†’ ã€Œåˆ†æµã€åŒºåŸŸ-ã€Œåˆ†æµè§„åˆ™ã€ è¿›è¡ŒæŸ¥çœ‹


#### 3.2.1 åŸŸåç±»å‹è§„åˆ™

é¦–å…ˆéœ€è¦å¼„æ˜ç™½ï¼ŒURL ä¸­åŸŸåæ˜¯å“ªäº›ï¼Ÿä»¥ä¸€æ¡ URL ä¸ºä¾‹ï¼š

`http://www.example.com:80/path/to/myfile.html?key1=value1&key2=value2#SomewhereInTheDocument`

å…¶ä¸­ `www.example.com` ä¸ºåŸŸåï¼Œæˆ–è€…è¯´æ˜¯ç¬¬äºŒä¸ª / ä¹‹åä»¥åŠç¬¬ä¸‰ä¸ª / ä¹‹é—´çš„å†…å®¹ï¼ˆä¸åŒ…æ‹¬å†’å·å’Œç«¯å£ï¼‰ã€‚

##### `HOST`è§„åˆ™

å½“è¯·æ±‚çš„åŸŸåå®Œå…¨åŒ¹é…æ—¶ï¼Œåˆ™æ‰§è¡Œè¯¥è§„åˆ™ï¼š

```
[filter_local]
# å±è”½ç™¾åº¦é¦–é¡µ
host, www.baidu.com, reject

# å±è”½ç™¾åº¦ç™¾ç§‘
host, baike.baidu.com, reject
```

å¦‚ä¸Šï¼Œå¯¹äºã€Œç™¾åº¦ã€çš„ä¸€äº›åŸŸåä½¿ç”¨äº†ã€Œé˜»æ­¢è¯·æ±‚ã€ç­–ç•¥

âš ï¸ æ³¨æ„ï¼š

> å¦‚æœä½ æ˜¯ä» Surge è¿‡æ¥çš„ç”¨æˆ·å¯èƒ½ä¼šè¿™ä¹ˆä½¿ç”¨ HOST è§„åˆ™ï¼š`host, 1.1.1.1, proxy`ï¼Œä½†è¿™å¹¶ä¸é€‚ç”¨äº Quantumult X

##### `HOST-SUFFIX`è§„åˆ™

å½“è¯·æ±‚çš„åŸŸåçš„åç¼€åŒ¹é…ï¼Œåˆ™æ‰§è¡Œè¯¥è§„åˆ™ï¼š

```
[filter_local]
host-suffix, doubleclick.net, reject
```

å¦‚ä¸Šç¤ºä¾‹ï¼Œç›¸æ¯”ä½¿ç”¨ hosts éœ€è¦ä¸€æ¡æ¡çš„é˜»æ­¢åŸŸåï¼Œå¦‚ï¼š

```
127.0.0.1 ad.doubleclick.net
127.0.0.1 adx.g.doubleclick.net
127.0.0.1 pubads.g.doubleclick.net
```

Quantumult X ä»…ä½¿ç”¨ä¸€æ¡ `HOST-SUFFIX` ç±»å‹è§„åˆ™ï¼Œå°±å¯ä»¥å¯¹ `doubleclick.net` åŠå…¶å­åŸŸåéƒ½åšå‡ºäº†é˜»æ­¢ã€‚

ğŸ’¡ å†çœ‹ä¸¤æ¡å…³äº `HOST-SUFFIX` çš„ä¾‹å­ï¼š

`ads.example.com` æœ¬èº«åŠå…¶å­åŸŸåæ˜¯å¹¿å‘Šï¼Œè€Œ `example.com` æœ¬èº«åŠå…¶ä»–å­åŸŸåæ˜¯æ­£å¸¸å†…å®¹å°±å¯ä»¥ä½¿ç”¨ï¼š `host-suffix, ads.example.com, reject`ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯åªèƒ½å°†ä¸€çº§åŸŸåç”¨äº `HOST-SUFFIX`ï¼›

å¯ä»¥å¯¹åŸŸååç¼€ä½¿ç”¨ï¼Œå¦‚æƒ³å¯¹æ‰€æœ‰ `.cn` åç¼€çš„åŸŸååšå‡ºç›´è¿ç­–ç•¥ï¼Œé‚£ä¹ˆå¯ä»¥ï¼š`host-suffix, cn, direct`

##### `HOST-KEYWORD`è§„åˆ™

å½“è¯·æ±‚çš„åŸŸååŒ…å«å…³é”®è¯æ—¶ï¼Œæ‰§è¡Œè¯¥è§„åˆ™ï¼š

```
[filter_local]
host-keyword, adservice, reject
```

é¡¾åæ€ä¹‰å°±æ˜¯åŒ¹é…åˆ°åŸŸåä¸­çš„å…³é”®è¯ï¼Œè¿™æ¡è§„åˆ™å¯¹äºä»¥ä¸‹åŸŸåéƒ½ä¼šç”Ÿæ•ˆï¼š

```
adservice.google.com
adservice.google.com.hk
googleadservice.com
adservice-google.com
```


##### `HOST-WILDCARD`è§„åˆ™

å½“è¯·æ±‚çš„åŸŸåçš„åŒ¹é…é€šé…ç¬¦æ—¶ï¼Œæ‰§è¡Œè¯¥è§„åˆ™ï¼š

```
[filter_local]
host-wildcard, ad*.example.com, reject
```

`HOST-WILDCARD` ç±»å‹è§„åˆ™ç”¨äºé€šé…ç¬¦ `*` ä¸ `?` åŒ¹é…ï¼Œå¦‚ä¸Šç¤ºä¾‹å¯ä»¥åŒ¹é…å¦‚ä¸‹åŸŸåï¼š

```
ads.example.com
adx.example.com
advert.example.com
```




#### 3.2.2 IP ç±»å‹è§„åˆ™

##### `IPv4`è§„åˆ™

```
ip-cidr, 8.8.8.8/32, direct
```

##### `IPv6`è§„åˆ™

```
ip6-cidr, 2001:4860:4860::8888/64, direct
```

å¦‚æœä¸æ¸…æ¥šè¿™é‡Œçš„ /32 ä¸ /64ï¼Œéœ€è¦è‡ªè¡Œäº†è§£ã€ŒCIDRã€ä¸ã€Œå­ç½‘æ©ç ã€ï¼Œè¿˜å¯ä»¥æœç´¢ã€Œå­ç½‘æ©ç è®¡ç®—å™¨ã€è·å–å¸®åŠ©ã€‚

å¯ä»¥å‚è€ƒï¼š[IPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘ç»œå·ã€ä¸»æœºå·ã€ç½‘ç»œåœ°å€ã€ä¸»æœºåœ°å€ä»¥åŠipæ®µ/CIDRå«ä¹‰](https://limbopro.com/archives/23707.html)


##### `GEOIP`è§„åˆ™

å½“ IP å½’å±åœ°åœ°åŒºç¬¦åˆæ—¶ï¼Œæ‰§è¡Œè¯¥è§„åˆ™ï¼š

```
[filter_local]
geoip, cn, direct
```

å¦‚ä¸Šç¤ºä¾‹ï¼Œå½“ IP ä¸ºä¸­å›½åœ°åŒºæ—¶èµ°ç›´è¿ã€‚

##### `IP-ASN`è§„åˆ™

å½“ IP å±äº ASN å·æ—¶ï¼Œæ‰§è¡Œè¯¥è§„åˆ™ï¼š

```
ip-asn, 13335, direct
```


#### 3.2.3 å…¶å®ƒç±»å‹è§„åˆ™

##### `USER-AGENT`è§„åˆ™

å½“è¯·æ±‚çš„ User Agent åŒ¹é…æ—¶ï¼Œæ‰§è¡Œè¯¥è§„åˆ™ï¼š

```
[filter_local]
user-agent, TIM*, direct
```

å¯ä½¿ç”¨é€šé…ç¬¦ `*` ä¸ `?`

> åœ¨ iOS 15 ç³»ç»Ÿåï¼Œç³»ç»Ÿå‡ºäºéšç§ä¿æŠ¤è€ƒè™‘ï¼Œä¸å†äº CONNECT è¯·æ±‚ä¸­æä¾› User-Agentï¼Œè¿™æ„å‘³ç€å¯¹äºæ‰€æœ‰ HTTPS è¯·æ±‚ï¼Œåœ¨æœªå¼€å¯ MITM æ—¶ï¼ŒUser-Agent å‡ä¸å¯è§ä¸”è§„åˆ™æ— æ³•ç”Ÿæ•ˆã€‚

##### `FINAL`è§„åˆ™

åœ¨è§„åˆ™çš„æœ«å°¾å§‹ç»ˆæœ‰ä¸€ä¸ª FINAL ç±»å‹è§„åˆ™å…œåº•

```
host-suffix, baidu.com, reject
final, direct
```

å®ƒä½œç”¨äº **é™¤äº†å·²æœ‰è§„åˆ™ä»¥å¤–** çš„ç½‘ç»œæ´»åŠ¨ç­–ç•¥ã€‚

å¦‚ä¸Šç¤ºä¾‹åªæœ‰ä¸¤æ¡è§„åˆ™ï¼Œè¿™è¡¨ç¤ºé™¤äº† baidu.com åŠå…¶å­åŸŸåä½¿ç”¨é˜»æ­¢ç­–ç•¥å¤–ï¼Œå…¶ä»–ç½‘ç»œæ´»åŠ¨éƒ½ä½¿ç”¨ç›´è¿ç­–ç•¥ã€‚

  - æ³¨æ„ï¼šç”±äºè§„åˆ™å­˜åœ¨ä¼˜å…ˆçº§ï¼ŒæŸ¥çœ‹è§„åˆ™æ—¶ï¼Œæœ¬åœ°è§„åˆ™ä¼šæ˜¾ç¤ºåœ¨è¿œç¨‹(å¼•ç”¨)è§„åˆ™ä¸Šæ–¹ï¼Œ`FINAL`è§„åˆ™ä¼šé»˜è®¤(å¼ºåˆ¶)æ˜¾ç¤ºåœ¨æœ¬åœ°è§„åˆ™çš„æœ«å°¾ï¼Œä½†ä»…ä»…åªæ˜¯æ˜¾ç¤ºï¼Œå®é™…ä¸Šä¼˜å…ˆçº§è¿˜æ˜¯åœ¨æœ€åï¼
  - æœ¬åœ°è§„åˆ™ä¸­ï¼Œæ‰€æœ‰å†™åœ¨`FINAL`è§„åˆ™åçš„è§„åˆ™éƒ½æ˜¯æ— æ•ˆçš„ï¼ï¼

#### 3.2.4 è§„åˆ™å‚æ•°

é»˜è®¤æƒ…å†µä¸‹ï¼Œå³ä¸å¸¦ä¸Šå‚æ•°æ—¶ï¼Œåˆ™å½“å¤„äº Wi-Fi ç½‘ç»œæ—¶ä½¿ç”¨ Wi-Fi æ•°æ®ï¼Œå½“å¤„äºä»…èœ‚çªç½‘ç»œæ—¶ä½¿ç”¨ç½‘ç»œæ•°æ®ï¼Œ

```
[filter_local]
host-suffix, qq.com, direct, force-cellular
host-suffix, qq.com, direct, multi-interface
host-suffix, qq.com, direct, multi-interface-balance
host-suffix, qq.com, direct, via-interface=pdp_ip0
```

å¯ä»¥ä½¿ç”¨å‡ ä¸ªå‚æ•°æ¥æŒ‡å®šè§„åˆ™çš„å‡ºç«™æ¥å£ï¼š

`force-cellular`ï¼šå½“å¤„äº Wi-Fi ç½‘ç»œæ—¶ä»ä½¿ç”¨èœ‚çªç½‘ç»œæ•°æ®ï¼›

`multi-interface`ï¼šå½“å¤„äº Wi-Fiç½‘ç»œæ—¶ï¼ŒåŒæ—¶ä½¿ç”¨ Wi-Fi ç½‘ç»œä¸èœ‚çªç½‘ç»œå»ºç«‹ TCP è¿æ¥ï¼Œä½¿ç”¨æ‹¥æœ‰æœ€ä½³ TCP æ¡æ‰‹å€¼çš„è¿æ¥æ¥ä¼ è¾“æ•°æ®ã€‚

`multi-interface-balance`ï¼šå½“å¤„äº Wi-Fi ç½‘ç»œæ—¶ï¼Œå‡è¡¡ä½¿ç”¨ Wi-Fi ç½‘ç»œä¸èœ‚çªç½‘ç»œï¼Œä»¥æå‡å¹¶å‘ä»»åŠ¡çš„å‡ºå£è´·æ¬¾ã€‚

`via-interface`ï¼šæŒ‡å®šå‡ºç«™æ¥å£

å¦å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥åœ¨ã€Œè®¾ç½®ã€åº•éƒ¨çš„ã€Œå…¶ä»–è®¾ç½®ã€ä¸­ï¼Œå…¨å±€è®¾ç½®ã€Œå‡ºç«™æ¥å£ã€ã€‚

#### 3.2.5 é…ç½®ç‰‡æ®µæ–¹å¼æ·»åŠ 

 æ­¤æ–¹æ³•æ˜¯å°†æœ¬åœ°è§„åˆ™å†™å…¥æœ¬åœ°æ–‡ä»¶ï¼Œå°†è¯¥æœ¬åœ°æ–‡ä»¶ä½œä¸ºå¼•ç”¨èµ„æºçš„æ–¹å¼è¿›è¡Œæ·»åŠ (ç±»ä¼¼äºæ·»åŠ è¿œç¨‹è§„åˆ™ï¼Œåªä¸è¿‡è¿œç¨‹è§„åˆ™çš„ä½ç½®æ˜¯æœ¬åœ°æ–‡ä»¶)

 `è®¾ç½®`â†’`é…ç½®æ–‡ä»¶`åŒºåŸŸ-`é…ç½®ç‰‡æ®µ`â†’`åˆ†æµ`,ä¸€æ ·å¯è¿›è¡Œæ·»åŠ ã€‚

 âš ï¸ æ³¨æ„ï¼šæ·»åŠ é…ç½®ç‰‡æ®µæ—¶ï¼Œæ— éœ€å¸¦æœ‰`[server_local]`ã€`[server_remote]`ã€`[filter_local]`ã€`[filter_remote]` ç­‰å­—æ®µ

 è§„åˆ™æ ¼å¼å‚è€ƒ [æ·»åŠ æœ¬åœ°è§„åˆ™](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E6%B7%BB%E5%8A%A0-%E6%9C%AC%E5%9C%B0%E8%A7%84%E5%88%99)

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI2-4.jpg" width="600">



### 3.3 æ·»åŠ  **è¿œç¨‹(å¼•ç”¨)è§„åˆ™**

è¿œç¨‹è§„åˆ™å³è®¸å¤šæ¡å•ç‹¬è§„åˆ™ç»„æˆçš„åˆé›†ï¼Œæ¯æ¡å•ç‹¬çš„è§„åˆ™åŒæ ·éµä»<è§„åˆ™ç±»å‹>, <å†…å®¹æ¡ä»¶>, <ç­–ç•¥>çš„æ ¼å¼

#### 3.3.1 é…ç½®æ–‡ä»¶æ·»åŠ 

è¿œç¨‹åˆ†æµåœ¨ é…ç½®æ–‡ä»¶`[filter_remote]` ä¸‹æ·»åŠ ï¼š

```
[filter_remote]
https://example.com/reject.txt, tag=ğŸ›¡ï¸ Block Ads, force-policy=reject, update-interval=86400, opt-parser=true, inserted-resource=true, enabled=true
```
ä¹Ÿå°±æ˜¯è¯´ä¸€æ¡å®Œæ•´çš„è¿œç¨‹åˆ†æµè§„åˆ™é…ç½®æ˜¯è¿™ä¹ˆç»„æˆçš„ï¼š

`<èµ„æºè·¯å¾„>, <èµ„æºæ ‡ç­¾>, <ç­–ç•¥åå¥½>, <è‡ªåŠ¨æ›´æ–°æ—¶é—´é—´éš”>, <æ˜¯å¦ä½¿ç”¨èµ„æºè§£æå™¨>, <æ’å…¥èµ„æº>, <æ˜¯å¦å¯ç”¨>`

- `tag` èµ„æºæ ‡ç­¾ï¼šç›¸å½“äºåç§°ï¼Œæ ‡è¯†è¿™æ¡è¿œç¨‹åˆ†æµæ–‡ä»¶çš„ä½œç”¨ï¼›

- `force-policy` ç­–ç•¥åå¥½ï¼šå¯é€‰ï¼Œæ­¤å¤„æ˜ç¡®è®¾ç½®ä¸º REJECT ç­–ç•¥ï¼Œå¦‚æœè¿œç¨‹åˆ†æµæ–‡ä»¶ä¸­å·²ç»æŒ‡æ˜åˆ™æ­¤å¤„å¯å¿½ç•¥ï¼›

- `update-interval` è‡ªåŠ¨æ›´æ–°çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’ï¼›

- `opt-parser` æ˜¯å¦ä½¿ç”¨èµ„æºè§£æå™¨ï¼Œè‹¥å…³é—­åˆ™æ”¹ä¸º `false`ï¼›

- `inserted-resource` æ’å…¥èµ„æºï¼Œå°†åˆ†æµæ–‡ä»¶ä¸­çš„è§„åˆ™æ”¾ç½®äºæœ¬åœ°è§„åˆ™ä¹‹å‰ï¼›

- `enabled` æ˜¯å¦å¯ç”¨è¯¥åˆ†æµæ–‡ä»¶ï¼Œè‹¥ä¸ä½¿ç”¨å¯æ”¹ä¸º `false`ï¼›

#### 3.3.2 UIæ·»åŠ 

é»˜è®¤UIæƒ…å†µä¸‹ï¼Œé•¿æŒ‰é¡¶éƒ¨ã€Œåˆ†æµè§„åˆ™ã€æŒ‰é’®ï¼Œå³å¯è¿›å…¥**æ·»åŠ è¿œç¨‹(å¼•ç”¨)è§„åˆ™**é¡µé¢

ä¹Ÿå¯ç‚¹å‡»å³ä¸‹è§’é£è½¦ â†’ æ‰¾åˆ°ã€Œåˆ†æµã€åŒºåŸŸ-ã€Œèµ„æºè§„åˆ™ã€

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI2-2.jpg" width="900">

âš ï¸ æ³¨æ„ï¼š

- èµ„æºè·¯å¾„ï¼Œéœ€è¦å¡«å†™**rawæ ¼å¼**

ä»¥ä¸‹æ–¹çš„é“¾æ¥ä¸¾ä¾‹(è¿™æ˜¯ä¸ªç½‘é¡µï¼Œä¸æ˜¯çœŸæ­£èƒ½ä½¿ç”¨çš„èµ„æºé“¾æ¥)ï¼š
`https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/12306/12306.list`

ä¾‹å¦‚åœ¨æœ«å°¾æ·»åŠ `?raw=ture`ï¼š
`https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/12306/12306.list?raw=ture`

æˆ–è€…ç›´æ¥ç‚¹å‡»`raw`æˆ–è€…`view`ï¼Œâ ä½¿ç”¨è·³è½¬åçš„é“¾æ¥ï¼š
`https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/12306/12306.list`

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/raw1.jpg" >

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/raw2.png" >

æˆ–è€…å°†é“¾æ¥é‡Œçš„`blob`â ä¿®æ”¹ä¸º`raw`ï¼š
`https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/QuantumultX/12306/12306.list`

- ã€Œèµ„æºè§£æå™¨ã€ï¼šæ˜¯å¯¹å¼•ç”¨çš„èµ„æºæ–‡ä»¶å†…å®¹(è¿œç¨‹oré…ç½®ç‰‡æ®µ)ï¼Œè¿›è¡Œè§£æ/è½¬æ¢/ä¿®æ”¹ï¼Œå˜æˆ Quantumult X æ”¯æŒçš„å†…å®¹ï¼Œå¯ç”¨åœ¨Quantumult X çš„ä¸‰ä¸ªä¸»è¦æ¨¡å—ï¼šâ‘ èŠ‚ç‚¹ â‘¡åˆ†æµ â‘¢é‡å†™ï¼Œå…·ä½“ä½¿ç”¨è¯´æ˜è§è§£æå™¨ä¸‹æ–¹æ•™ç¨‹ï¼›

  - å¦‚æœä½ çš„è§£æå™¨æ˜¯ç©ºçš„ï¼Œã€ŒèŠ‚ç‚¹é¡µã€ç‚¹å‡»å·¦ä¸‹è§’ç¼–è¾‘ï¼Œéœ€è¦åœ¨ `[general]` ä¸‹æ·»åŠ ï¼š

```
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js 
```

- ã€Œç­–ç•¥åå¥½ã€ï¼š**å»ºè®®å¼€å¯**ï¼Œå¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œåˆ†æµè§„åˆ™éœ€è¦å¸¦æœ‰ä¸€ä¸ª <ç­–ç•¥>ï¼Œå¼€å¯ç­–ç•¥åå¥½ï¼Œå³å¯å¼ºåˆ¶æŒ‡å®šè¿œç¨‹è§„åˆ™é›†çš„ç­–ç•¥ï¼Œè€Œä¸æ˜¯ä½¿ç”¨è§„åˆ™é›†å†…çš„ç­–ç•¥ï¼š

  - å½“ä¸å¼€å¯ã€Œç­–ç•¥åå¥½ã€æ—¶ï¼Œæ°å¥½é…ç½®æ–‡ä»¶ä¸­ä¸å­˜åœ¨è¿œç¨‹(å¼•ç”¨)è§„åˆ™é›†å†…æŒ‡å®šçš„ç­–ç•¥ï¼ŒQXå°†ä¼šè‡ªåŠ¨è¡¥å…¨ä¸€ä¸ª`ä¸è§„åˆ™é›†å†…ç½®ç­–ç•¥åŒåçš„ç­–ç•¥ç»„`

  - å½“ä¸å¼€å¯ã€Œç­–ç•¥åå¥½ã€æ—¶ï¼Œä¸”å¼€å¯ã€Œèµ„æºè§£æå™¨ã€ï¼Œã€Œèµ„æºè§£æå™¨ã€ä¼šå°†è§„åˆ™é›†çš„ç­–ç•¥è®¾ç½®ä¸º`Shawn`ï¼ŒQXå°†ä¼šè‡ªåŠ¨è¡¥å…¨ä¸€ä¸ªåŒåç­–ç•¥ç»„(å³åä¸º`Shawn`çš„ç­–ç•¥ç»„)


#### 3.3.3 å†…ç½®è§„åˆ™é›†

åœ¨æ·»åŠ è¿œç¨‹è§„åˆ™æ—¶ï¼Œèµ„æºè·¯å¾„å¡«å†™`FILTER_REGION`ï¼›æ­¤æ—¶è¿™æ¡è§„åˆ™å°†ä¼šåœ¨ã€ŒiCloudäº‘ç›˜ â–¸ Quantumult X â–¸ Profiles æ–‡ä»¶å¤¹ã€ä¸‹ç”Ÿæˆä¸€ä¸ª`FILTER_REGION`æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
```
geoip, cn ,direct
```

ç›¸å½“äºå°†è¿™æ¡è§„åˆ™ä½œä¸ºè¿œç¨‹è§„åˆ™è¿›è¡Œå¼•ç”¨ï¼Œåªä¸è¿‡è§„åˆ™åœ°å€æ˜¯æœ¬åœ°(iCloud)ã€‚

åŒæ ·çš„ï¼Œèµ„æºè·¯å¾„å¡«å†™`FILTER_LAN`ï¼Œè¿™æ¡è§„åˆ™å°†ä¼šåœ¨ã€ŒiCloudäº‘ç›˜ â–¸ Quantumult X â–¸ Profiles æ–‡ä»¶å¤¹ã€ä¸‹ç”Ÿæˆä¸€ä¸ª`FILTER_LAN`æ–‡ä»¶ï¼Œå³å±€åŸŸç½‘åœ°å€ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 224.0.0.0/24, direct
```

å…¶å¯¹åº”çš„é…ç½®æ–‡ä»¶å†™æ³•ï¼š
```
[filter_remote]
FILTER_LAN, tag=LAN, force-policy=direct, enabled=true
FILTER_REGION, tag=CN, force-policy=direct, enabled=true

```

#### 3.3.4 è¿œç¨‹åˆ†æµèµ„æºæ›´æ–°ä¸åˆ†æµç»†åˆ™æŸ¥çœ‹

- é»˜è®¤è‡ªåŠ¨æ›´æ–°æ—¶é—´ä¸º48å°æ—¶ï¼Œéœ€æ‰“å¼€QXæ‰å¯è‡ªåŠ¨æ›´æ–°
  - å¯ä»¥æ›´æ”¹é…ç½®æ–‡ä»¶ä¸­çš„`update-interval`å‚æ•°ï¼Œå•ä½ä¸ºç§’(S)ï¼Œä¿®æ”¹ä¸º`-1`å³ä¸ºä¸æ›´æ–°

- å·¦æ»‘è§„åˆ™é›†å¯ä»¥å•ç‹¬æ›´æ–°ï¼Œå¹¶æŸ¥çœ‹å…¶ç»†åˆ™

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/filter_remote.jpg" width="900">



### 3.4 æ³¨æ„ **è§„åˆ™ç±»å‹ä¼˜å…ˆçº§** é—®é¢˜

åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒQuantumult X ä¼šå¯ç”¨ **ã€Œåˆ†æµåŒ¹é…ä¼˜åŒ–ã€**ï¼Œå¤§è‡´çš„ä¼˜å…ˆçº§å…ˆåé¡ºåºä¸ºï¼š
`HOST > HOST-SUFFIX > HOST-WILDCARD > HOST-KEYWORD > USER-AGENT > IPç±»å‹è§„åˆ™ (IP-CIDR ç­‰)`

å¦‚æ­¤å¯èƒ½ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿæ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š

```
[filter_local]
host-keyword, qq, direct
host-suffix, qq.com, reject
```

ä¸€èˆ¬æ¥è¯´è§„åˆ™æ˜¯æŒ‰ç…§  **å…ˆåé¡ºåº** è¿›è¡ŒåŒ¹é…ï¼Œä½†å¼€å¯ **ã€Œåˆ†æµåŒ¹é…ä¼˜åŒ–ã€** åæ˜¯ç¬¬äºŒæ¡ç”Ÿæ•ˆï¼Œå› ä¸ºå‰é¢è¯´äº† `HOST-SUFFIX` çš„ä¼˜å…ˆçº§é«˜äº `HOST-KEYWORD`ã€‚

ä¸è¿‡è¿™æ ·çš„é—®é¢˜å¹¶ä¸æ˜¯ç‰¹åˆ«å¸¸è§ï¼Œå¯ä»¥å…ˆä¸å»ç®¡å®ƒï¼Œå¦‚æœä½ é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œå¯ä»¥ï¼š

* å†™ä¸€æ¡ä¸ä¼˜å…ˆçº§é«˜çš„è§„åˆ™ä¸€æ ·çš„è§„åˆ™ï¼Œåœ¨æœ¬åœ°è¦†ç›–æ‰å®ƒï¼›
* æˆ–è€…æƒ³è¦å®Œå…¨æŒ‰ç…§è§„åˆ™çš„é¡ºåºåŒ¹é…ï¼Œå¯ä»¥åœ¨ã€Œè®¾ç½®ã€åº•éƒ¨çš„ã€Œå…¶ä»–è®¾ç½®ã€çš„ã€ŒVPNã€ä¸‹ï¼Œå°†ã€Œåˆ†æµåŒ¹é…ä¼˜åŒ–ã€å…³é—­ï¼›



### 3.5 æ³¨æ„ **è¿œç¨‹(å¼•ç”¨)è§„åˆ™ å…ˆåé¡ºåº** é—®é¢˜

é€šå¸¸ï¼Œè¿œç¨‹è§„åˆ™å¯ä»¥æŒ‰ç…§ä»¥ä¸‹é¡ºåºè¿›è¡Œæ”¾ç½®

`ä¿®æ­£è§„åˆ™`(ä¾‹å¦‚è‹¹æœæ¨é€æœåŠ¡ã€ä¸èƒ½è¢«å»å¹¿å‘Šåˆ†æµREJECTçš„ã€ä¸å…¶ä»–è§„åˆ™æœ‰å†²çªéœ€è¦å•ç‹¬åˆ†æµçš„)ï¼Œæ­¤ç±»è§„åˆ™çš„ç­–ç•¥é€šå¸¸æ˜¯`DIRECT`

ğŸ‘‡

`å¹¿å‘Šå±è”½è§„åˆ™`ï¼Œæ­¤ç±»è§„åˆ™çš„ç­–ç•¥é€šå¸¸æ˜¯`REJECT`

ğŸ‘‡

`éœ€è¦å•ç‹¬åˆ†æµçš„è§„åˆ™`ï¼ˆå®¹æ˜“è¢«åŒ…å«åœ¨å¤§åˆé›†é‡Œé¢ï¼Œä½†æ˜¯æœ‰å•ç‹¬åˆ†æµçš„éœ€æ±‚ï¼‰

ğŸ‘‡

`å„ç§åˆé›†è§„åˆ™`ï¼ˆå›½å¤–ç½‘ç«™åˆé›†ã€å›½å¤–åª’ä½“åˆé›†ï¼ŒæŒ‰éœ€æ·»åŠ ï¼‰

ğŸ‘‡

`FILTER_LAN`(å†…ç½®çš„å±€åŸŸç½‘è§„åˆ™é›†)

ğŸ‘‡

`å›½å†…IPé›†/åŸŸåé›†/ASNé›†` æˆ– `FILTER_REGION`(å†…ç½®çš„`geoip, cn ,direct`ï¼Œå›½å†…è§„åˆ™é€šå¸¸æœ‰è¿™ä¸€ä¸ªå°±å¤Ÿäº†)

é•¿æŒ‰è¿œç¨‹è§„åˆ™å¾…å³ä¾§å‡ºç°`â‰¡`å³å¯æ‹–åŠ¨æ‘†æ”¾é¡ºåº

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/filter_remote_change.jpg" width="300">




### 3.6 æ³¨æ„ **æœ¬åœ°ä¸è¿œç¨‹(å¼•ç”¨)è§„åˆ™ å…ˆåé¡ºåº** é—®é¢˜

é»˜è®¤æƒ…å†µä¸‹ï¼ŒQuantumult X çš„ *æœ¬åœ°è§„åˆ™* æ€»æ˜¯ä½äº *è¿œç¨‹è§„åˆ™* çš„å‰é¢(Finalé™¤å¤–ï¼Œé»˜è®¤æ‰€æœ‰è§„åˆ™æœ€åé¢)ã€‚

å¦‚æ­¤å¯èƒ½ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿï¼Ÿæ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œå‡è®¾ä½ çš„æœ¬åœ°è§„åˆ™æœ‰ä¸€æ¡è§„åˆ™ï¼š

```
[filter_local]
geoip, cn, direct
```

ä½†**è¿œç¨‹(å¼•ç”¨)è§„åˆ™**ä¸­æœ‰ä¸€æ¡è¿™æ ·çš„è§„åˆ™ï¼š

`ip-cidr, 180.76.76.76/32, reject`

æ­¤æ—¶è¿œç¨‹è§„åˆ™å¹¶ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸ºé¡ºåºä¸Šæ¥è¯´**æœ¬åœ°è§„åˆ™** `geoip, cn ,direct` (è¡¨ç¤ºä¸­å›½å¤§é™†çš„ IP ç›´è¿)ä½äº**è¿œç¨‹(å¼•ç”¨)è§„åˆ™** `ip-cidr, 180.76.76.76/32, reject` çš„å‰é¢ï¼Œè€Œ `180.76.76.76` æ˜¯ä¸­å›½å¤§é™†åœ°åŒºçš„ IPï¼Œæ‰€ä»¥å…ˆåŒ¹é…åˆ°äº†å¦‚ä¸Š**æœ¬åœ°è§„åˆ™**ï¼Œæ‰€ä»¥å°±æ²¡æ³•æ‰§è¡Œå¦‚ä¸Š**è¿œç¨‹(å¼•ç”¨)è§„åˆ™**äº†ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨è¯¥ **è¿œç¨‹(å¼•ç”¨)è§„åˆ™** çš„åˆ†æµé…ç½®ä¸­æ·»åŠ å‚æ•° `inserted-resource=true`ï¼Œæˆ–åœ¨å›¾å½¢ç•Œé¢çš„è¿œç¨‹åˆ†æµæ–‡ä»¶çš„è®¾ç½®ä¸­ï¼Œæ‰“å¼€ **ã€Œæ’å…¥èµ„æºã€** å¼€å…³ã€‚

  - å¼€å¯ã€Œæ’å…¥èµ„æºã€çš„è¿œç¨‹è§„åˆ™ï¼Œä¼˜å…ˆçº§ä¼šé«˜äºæœ¬åœ°ï¼ŒåŒæ—¶ä¼šæ˜¾ç¤ºåœ¨æœ¬åœ°è§„åˆ™ä¸Šæ–¹ï¼Œå¯ç”¨å›¾æ ‡ä¹Ÿä¼šå˜åŒ–æˆå¼¯ç®­å¤´

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/%E6%8F%92%E5%85%A5%E8%B5%84%E6%BA%90.jpg" width="600">

ä»¥ä¸Šåªæ˜¯ä¾‹å­ï¼›

å®é™…ä¸Šï¼Œ`geoip, cn ,direct`è§„åˆ™çš„æœ€ä½³æ”¾ç½®ä½ç½®ï¼Œåº”è¯¥æ˜¯è¿œç¨‹è§„åˆ™çš„æœ€åé¢ï¼Œæœ‰ä»¥ä¸‹æ–¹æ³•ï¼š

> å¡«å†™å‰å»ºè®®å…ˆåœ¨ `è®¾ç½®`â†’æœ€ä¸‹æ–¹`å…¶ä»–è®¾ç½®`ï¼Œæ‰¾åˆ°å¹¶å¼€å¯`èµ„æº`-`iCloudäº‘ç›˜`ï¼›


- åœ¨æ·»åŠ è¿œç¨‹è§„åˆ™æ—¶ï¼Œèµ„æºè·¯å¾„å¡«å†™`FILTER_REGION`ï¼›æ­¤æ—¶è¿™æ¡è§„åˆ™å°†ä¼šåœ¨ã€ŒiCloudäº‘ç›˜ â–¸ Quantumult X â–¸ Profiles æ–‡ä»¶å¤¹ã€ä¸‹ç”Ÿæˆä¸€ä¸ª`FILTER_REGION`æ–‡ä»¶ï¼Œå†…å®¹æ˜¯`geoip, cn ,direct`ã€‚ç›¸å½“äºå°†è¿™æ¡è§„åˆ™å½“æˆè¿œç¨‹è§„åˆ™è¿›è¡Œå¼•ç”¨ï¼Œåªä¸è¿‡è§„åˆ™åœ°å€æ˜¯æœ¬åœ°(iCloud)ã€‚

- æˆ–è€…å¯ä»¥å¦‚ä¸‹å›¾æ‰€ç¤ºæ“ä½œï¼Œé€šè¿‡é…ç½®ç‰‡æ®µï¼Œæ–°å»ºæœ¬åœ°æ–‡ä»¶ï¼Œå°†`geoip, cn ,direct`å¡«å…¥ï¼Œæ–‡ä»¶åå¯è‡ªå®šä¹‰ï¼›æ­¤æ—¶èµ„æºè·¯å¾„ä¼šè‡ªåŠ¨å¡«å……ã€‚
<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI2-3.JPEG" width="1200">

  - æˆ–è€…ä» `è®¾ç½®`â†’`é…ç½®æ–‡ä»¶`åŒºåŸŸ-`é…ç½®ç‰‡æ®µ`â†’`åˆ†æµ`,ä¸€æ ·å¯è¿›è¡Œæ·»åŠ ã€‚
<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI2-4.jpg" width="600">


## 4. ç­–ç•¥(ç­–ç•¥ç»„)

ä»¥ `;` æˆ– `#` æˆ– `//` å¼€å¤´çš„è¡Œä¸ºæ³¨é‡Šè¡Œã€‚

ä»¥ä¸‹ä¸»è¦è®²çš„æ˜¯ `[filter_local]`ã€`[filter_remote]` æˆ– `[policy]`  åŒºå—ä¸‹çš„å†…å®¹ï¼Œæ‰€ä»¥ç¤ºä¾‹éƒ½ä»¥ `[filter_local]`ã€`[filter_remote]` æˆ– `[policy]` å¼€å¤´è¡¨æ˜åœ¨å…¶ä¹‹ä¸‹ï¼Œå¹¶ä¸æ˜¯è®©ä½ æ¯ä¸ªå‚æ•°å­—æ®µå‰éƒ½åŠ ä¸Š `[filter_local]`ã€`[filter_remote]` æˆ– `[policy]`ã€‚


Policyï¼šé™¤äº†å†…ç½®çš„ [3 ä¸ªç­–ç•¥](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#filter%E5%8F%82%E6%95%B0)ï¼Œè¿˜æœ‰ä»¥ä¸‹ç­–ç•¥ï¼š

- `Static`:ã€Œæ‰‹åŠ¨é€‰æ‹©ã€ï¼Œä½ éœ€è¦æ‰‹åŠ¨é€‰æ‹©æƒ³è¦çš„èŠ‚ç‚¹/ç­–ç•¥ç»„ã€‚
- `Available`ï¼šã€Œæ•…éšœè½¬ç§»ã€ï¼Œå°†æŒ‰é¡ºåºé€‰æ‹©ä½ åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå¯ç”¨çš„èŠ‚ç‚¹ã€‚
- `Round-Robin`ï¼šã€ŒèŠ‚ç‚¹è½®è¯¢ã€ï¼Œå°†æŒ‰åˆ—è¡¨çš„é¡ºåºè½®æµä½¿ç”¨å…¶ä¸­çš„èŠ‚ç‚¹ã€‚
- `Dest-Hash`ï¼šã€Œéšæœºè´Ÿè½½å‡è¡¡ã€ï¼Œç›¸åŒåŸŸåèµ°å›ºå®šèŠ‚ç‚¹
- `URL-Latency-Benchmark`ï¼šã€Œæœ€ä½å»¶è¿Ÿã€ï¼Œé€‰å–å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹ã€‚
- `SSID`ï¼šæ ¹æ®Wi-Fiçš„SSIDå‚æ•°é€‰æ‹©ç­–ç•¥



### 4.1 æ·»åŠ ç­–ç•¥ç»„

#### 4.1.1 `Static`:ã€Œæ‰‹åŠ¨é€‰æ‹©ã€

`Static` ç­–ç•¥ç”¨äºã€Œæ‰‹åŠ¨é€‰æ‹©ç­–ç•¥ã€ã€‚éœ€è¦æ‰‹åŠ¨é€‰æ‹©æƒ³è¦çš„èŠ‚ç‚¹/ç­–ç•¥ç»„ã€‚

 >ã€€ç±»ä¼¼äº Surge çš„ `Select` ç­–ç•¥ç»„

éœ€ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ³¨æ„ä¸è¦é‡å¤å‡ºç°`[policy]`ã€`[filter_remote]`ï¼š

```
[policy]
static = Guard, reject, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Hijacking.png

[filter_remote]
# é˜»æ­¢å¹¿å‘Š
https://example.com/advertising.txt, tag=ğŸ›¡ï¸ Block Advertising, force-policy=Guard, update-interval=86400, opt-parser=true, inserted-resource=true, enabled=true

# é˜»æ­¢è¿½è¸ª
https://example.com/tracking.txt, tag=ğŸ›¡ï¸ Block Tracking, force-policy=Guard, update-interval=86400, opt-parser=true, inserted-resource=true, enabled=true

# é˜»æ­¢åŠ«æŒ
https://example.com/hijacking.txt, tag=ğŸ›¡ï¸ Block Hijacking, force-policy=Guard, update-interval=86400, opt-parser=true, inserted-resource=true, enabled=true
```

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/Static_1.PNG" width="600">


å¦‚ä¸Šç¤ºä¾‹ï¼Œæ–°å»ºäº†ä¸€ä¸ªåä¸º `Guard` çš„ã€Œæ‰‹åŠ¨é€‰æ‹©ç­–ç•¥ç»„ã€ï¼Œé‡Œé¢æœ‰é˜»æ­¢ (`REJECT`) ä¸ç›´è¿ (`DIRECT`) ä¸¤ä¸ªç­–ç•¥å¯ä¾›é€‰æ‹©ï¼Œè¿˜è®¾ç½®äº†ä¸€ä¸ªç­–ç•¥å›¾æ ‡ã€‚

ç„¶åæ·»åŠ äº†ä¸‰æ¡è¿œç¨‹åˆ†æµæ–‡ä»¶ï¼Œåˆ†åˆ«å…³äºå¹¿å‘Šã€è¿½è¸ªä¸åŠ«æŒçš„ï¼Œå¼ºåˆ¶å®ƒä»¬çš„ç­–ç•¥åå¥½æŒ‡å‘ `Guard` ç­–ç•¥ç»„ã€‚

è¿™æ ·ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¼€å…³ç®¡ç†å…³äºå¹¿å‘Šã€è¿½è¸ªä¸åŠ«æŒçš„è§„åˆ™æ˜¯å¼€å¯ (é˜»æ­¢) è¿˜æ˜¯å…³é—­ (ç›´è¿)ã€‚

`img-url` è‡ªå®šä¹‰å›¾æ ‡å‚æ•°æ˜¯å¯é€‰çš„ï¼Œè¯¦è§[èŠ‚ç‚¹èµ„æºå›¾æ ‡](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E8%8A%82%E7%82%B9%E8%B5%84%E6%BA%90%E5%9B%BE%E6%A0%87)

##### UIæ·»åŠ 

å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡UIåˆ›å»ºè¿™æ ·ä¸€ä¸ªç­–ç•¥ç»„ï¼š

> éœ€è¦å…ˆå¯¼å…¥é…ç½®å¹¶å¯¼å…¥èŠ‚ç‚¹ï¼Œå¦åˆ™æ·»åŠ ç­–ç•¥ç»„çš„æŒ‰é’®ä¸ä¼šæ˜¾ç¤º

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/Static_2.jpg" width="900">

`éœ€åŒ¹é…çš„èµ„æºæ ‡ç­¾`æ˜¯èŠ‚ç‚¹èµ„æº (è®¢é˜…) çš„åç§°ï¼Œä¸€èˆ¬æ˜¯æœºåœºåç§°ï¼›

`éœ€åŒ¹é…çš„èŠ‚ç‚¹æ ‡ç­¾`å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯èŠ‚ç‚¹çš„åç§°ï¼›

- ç‚¹å‡»ã€Œç±»å‹ã€å¯ä»¥é€‰æ‹©ã€Œç­–ç•¥ç»„ç±»å‹ã€
- å³ä¸Šè§’çš„`<>`å¯ä»¥åœ¨ã€Œæ­£åˆ™ç­›é€‰ã€æˆ–ã€Œæ‰‹åŠ¨å¼•ç”¨ã€ä¹‹é—´åˆ‡æ¢
  - UIã€Œæ‰‹åŠ¨å¼•ç”¨ã€åªèƒ½åœ¨ã€Œç­–ç•¥ç»„ç±»å‹ã€ä¸º`Static`æ—¶ä½¿ç”¨
- å›¾æ ‡ä»…æ”¯æŒ `144x144` æˆ– `108x108`ï¼Œæ”¯æŒå½©è‰²ï¼Œå¯ä»¥é€šè¿‡UIé€‰æ‹©ï¼Œä¹Ÿå¯ä»¥é€šè¿‡`img-url`å‚æ•°ç¼–è¾‘


#### 4.1.2 `Available`ï¼šã€Œæ•…éšœè½¬ç§»ã€

`Available` ç­–ç•¥ç”¨äºè‡ªåŠ¨å›é€€ä»£ç†æœåŠ¡å™¨ã€‚å°†æŒ‰é¡ºåºé€‰æ‹©ä½ åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå¯ç”¨çš„èŠ‚ç‚¹ã€‚

> ç±»ä¼¼äº Surge çš„ Fallback ç­–ç•¥ç»„

```
[policy]
available = Available, ProxyA, ProxyB, ProxyC

[filter_local]
final, Available
```

å½“ ProxyA æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢åˆ° ProxyBï¼Œä»¥æ­¤ç±»æ¨

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/Available.jpg" width="600">


#### 4.1.3 `Round-Robin`ï¼šã€ŒèŠ‚ç‚¹è½®è¯¢ã€

`Round-Robin` è½®è¯¢ç­–ç•¥ç”¨äºé¡ºåºè½®æµä½¿ç”¨ä»£ç†æœåŠ¡å™¨

```
[policy]
round-robin = RoundRobin, ProxyA, ProxyB, ProxyC

[filter_local]
final, RoundRobin
```

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/Round-Robin.jpg" width="600">


#### 4.1.4 `Dest-Hash`ï¼šã€Œéšæœºè´Ÿè½½å‡è¡¡ã€

`Dest-Hash` ç­–ç•¥ç”¨äºéšæœºè´Ÿè½½å‡è¡¡ï¼Œç›¸åŒåŸŸåèµ°å›ºå®šèŠ‚ç‚¹ï¼Œæ­¤ç­–ç•¥å¯¹äºéœ€è¦ä¼šè¯æŒä¹…æ€§çš„ç”¨ä¾‹ç‰¹åˆ«æœ‰ç”¨ã€‚

```
[policy]
dest-hash = DestHash, ProxyA, ProxyB, ProxyC

[filter_local]
final, DestHash
```

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/Dest-Hash.jpg" width="600">

#### 4.1.5 `URL-Latency-Benchmark`ï¼šã€Œæœ€ä½å»¶è¿Ÿã€

`URL-Latency-Benchmark` ç­–ç•¥ç”¨äºè‡ªåŠ¨æµ‹è¯•é€‰å‡ºå»¶è¿Ÿæœ€ä½çš„ä»£ç†æœåŠ¡å™¨

âš ï¸ æ³¨æ„ï¼šã€Œå»¶è¿Ÿæœ€ä½ã€ä¸ä»£è¡¨ã€ŒæœåŠ¡å™¨æœ€å¿«ã€ï¼Œè¿˜éœ€è¦è€ƒè™‘å…¶ä»–å¦‚å¸¦å®½ã€ä¸¢åŒ…ç‡ç­‰ç­‰

> ç±»ä¼¼äº Surge çš„ url-test ç­–ç•¥ç»„

```
[policy]
url-latency-benchmark = AutoTest,  ProxyA, ProxyB, ProxyC, resource-tag-regex=^sample, server-tag-regex=^example, check-interval=600, alive-checking=false, tolerance=0

[filter_local]
final, AutoTest
```

`URL-Latency-Benchmark` ç­–ç•¥æŒ‡å‘å…·æœ‰æœ€ä½³ (è¯„ä¼° `tolerance` å‚æ•°ï¼Œå•ä½æ¯«ç§’çš„) url latency ç»“æœçš„æœåŠ¡å™¨ã€‚

å½“ç”¨æˆ·æ‰‹åŠ¨å¯åŠ¨ URL æµ‹è¯•æ—¶ï¼Œå…¶ç­–ç•¥ç»“æœä¹Ÿå°†è¢«æ›´æ–°ã€‚

æ­¤ç±»å‹ç­–ç•¥æœ‰ä¸€ä¸ªåä¸º `check-interval` (ç§’) çš„å‚æ•°ï¼Œå¦‚æœæ­¤ç­–ç•¥å·²ç”±ä»»ä½•è¯·æ±‚æ¿€æ´»ï¼Œåˆ™å°†è€ƒè™‘è¯¥é—´éš”ã€‚

å¦‚æœ `alive-checking` è¢«è®¾ç½®ä¸º trueï¼Œé‚£ä¹ˆå³ä½¿è¯¥ç­–ç•¥å¤„äºç©ºé—²çŠ¶æ€ï¼Œä¹Ÿä¼šè€ƒè™‘é—´éš”æ—¶é—´ï¼Œå¹¶å¯åŠ¨åŸºå‡†æµ‹è¯•ã€‚

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/URL-Latency-Benchmark.jpg" width="600">


#### 4.1.6 `SSID`
è¯¥ç­–ç•¥ç»„æ— æ³•é€šè¿‡UIæ·»åŠ ï¼Œåªèƒ½ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå…¶å…·ä½“æ ¼å¼ä¸ºï¼š

`ssid = <ç­–ç•¥åç§°>, <èœ‚çªæ•°æ®ä¸‹é»˜è®¤ç­–ç•¥>, <Wi-Fi ä¸‹é»˜è®¤ç­–ç•¥>, <SSID åç§°: ç­–ç•¥>`

```
[policy]
ssid = SSID, ProxyA, ProxyA, TP-Link:ProxyB, D-Link:ProxyC

[filter_local]
final, SSID
```

å¦‚ä¸Šç¤ºä¾‹ï¼Œè¡¨ç¤ºåœ¨`èœ‚çªæ•°æ®ç½‘ç»œ`åŠ `Wi-Fi` ä¸‹é»˜è®¤ä½¿ç”¨ `ProxyA` èŠ‚ç‚¹ï¼Œç„¶åå°±æ˜¯æŒ‡å®š`ç‰¹å®šçš„ SSID` æ‰€ä½¿ç”¨çš„ç­–ç•¥ï¼Œå½“ç½‘ç»œä½äº SSID ä¸º `TP-Link` æ—¶ä½¿ç”¨ `ProxyB` èŠ‚ç‚¹ï¼Œä¸º `D-Link` æ—¶ä½¿ç”¨ `ProxyC` èŠ‚ç‚¹ã€‚

å†ä¸¾ä¸ªä¾‹å­ï¼Œå°† `SSID` ä¸ `URL-Latency-Benchmark` ç›¸ç»“åˆï¼š

```
[policy]
static=å…¨çƒåŠ é€Ÿ, é¦™æ¸¯SSID, proxy

ssid=é¦™æ¸¯SSID, é¦™æ¸¯èŠ‚ç‚¹, é¦™æ¸¯èŠ‚ç‚¹, Wi-Fi_5G:DIRECT

url-latency-benchmark=é¦™æ¸¯èŠ‚ç‚¹, server-tag-regex=^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|(\b(GAME)\b))).*$, check-interval=600, tolerance=0, alive-checking=false

[filter_local]
final, å…¨çƒåŠ é€Ÿ
```

å½“ `å…¨çƒåŠ é€Ÿ` é€‰ä¸­ `é¦™æ¸¯SSID` æ—¶ï¼š
- ç‰¹å®šWi-Fiä¸‹( Wi-Fi_5G)ï¼š`å…¨çƒåŠ é€Ÿ` â†’ `é¦™æ¸¯SSID` â†’ `DIRECT`
- éç‰¹å®šWi-Fiä¸‹ï¼š`å…¨çƒåŠ é€Ÿ` â†’ `é¦™æ¸¯SSID` â†’ `é¦™æ¸¯èŠ‚ç‚¹` â†’ ç­–ç•¥ç»„ä¸­é€‰æ‹©çš„èŠ‚ç‚¹
- èœ‚çªæ•°æ®ä¸‹ï¼š`å…¨çƒåŠ é€Ÿ` â†’ `é¦™æ¸¯SSID` â†’ `é¦™æ¸¯èŠ‚ç‚¹` â†’ ç­–ç•¥ç»„ä¸­é€‰æ‹©çš„èŠ‚ç‚¹

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/SSID.jpg" width="900">




### 4.2 ç­–ç•¥å‚æ•°

å…·ä½“å‚æ•°å¦‚ä¸‹ï¼Œåªèƒ½åœ¨é…ç½®æ–‡ä»¶ä¸­å†™å…¥ï¼š

- `resource-tag-regex=` è¡¨ç¤ºä½¿ç”¨`æ­£åˆ™ç­›é€‰`éœ€è¦åŒ¹é…çš„`èµ„æºæ ‡ç­¾`ï¼ˆæ¯”å¦‚æœºåœºåç§°ï¼‰
- `server-tag-regex=` è¡¨ç¤ºä½¿ç”¨`æ­£åˆ™ç­›é€‰`éœ€è¦åŒ¹é…çš„`èŠ‚ç‚¹æ ‡ç­¾`ï¼ˆæ¯”å¦‚èŠ‚ç‚¹ä¸­å¸¦æœ‰é¦™æ¸¯ã€ç¾å›½è¿™ç§ï¼‰
  - è¯¥å‚æ•°æ— æ³•ç­›é€‰`[server_loacl]`ä¸‹çš„æœ¬åœ°èŠ‚ç‚¹ï¼Œå› æ­¤æ¨èæœ¬åœ°èŠ‚ç‚¹ä»¥ã€Œé…ç½®ç‰‡æ®µã€çš„æ–¹å¼æ·»åŠ 
- `check-interval=600` è¡¨ç¤ºæ¯`600`ç§’æ£€æŸ¥ä¸€æ¬¡èŠ‚ç‚¹å»¶è¿Ÿï¼Œå¦‚æœæ­¤ç­–ç•¥å·²ç”±ä»»ä½•è¯·æ±‚æ¿€æ´»ï¼Œåˆ™å°†é‡æ–°è®¡ç®—è¯¥é—´éš”ã€‚
- `alive-checking=false` å¦‚æœè¢«è®¾ç½®ä¸º`true`ï¼Œé‚£ä¹ˆå³ä½¿è¯¥ç­–ç•¥å¤„äºç©ºé—²çŠ¶æ€ï¼Œä¹Ÿä¼šé‡æ–°è®¡ç®—é—´éš”æ—¶é—´ï¼Œå¹¶å¯åŠ¨åŸºå‡†æµ‹è¯•ã€‚
- `tolerance=0` è¡¨ç¤ºä¸Šä¸€æ¬¡èŠ‚ç‚¹çš„æœ€ä½å»¶è¿Ÿæ•°å€¼ä¸æœ¬æ¬¡èŠ‚ç‚¹æœ€ä½å»¶è¿Ÿæ•°å€¼çš„å·®å€¼ï¼Œå½“è¶…è¿‡è¿™ä¸ªå·®å€¼æ—¶åˆ‡æ¢è‡³æœ€ä½å»¶è¿Ÿçš„èŠ‚ç‚¹

`resource-tag-regex=` å’Œ `server-tag-regex=` ä¸¤è€…ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼Œæ—¢å¯ä»¥ç­›é€‰å‡ºåªéœ€è¦æŸæœåŠ¡å•†çš„ç‰¹å®šèŠ‚ç‚¹ç”¨äºæŸä¸ªç­–ç•¥ã€‚

`resource-tag-regex=` å’Œ `server-tag-regex=` ä»…é€‚ç”¨äº `static`ã€`available` å’Œ `round-robin` ç±»å‹çš„ç­–ç•¥ã€‚



### 4.3 ä¿®æ”¹ç­–ç•¥ç»„ & åˆ é™¤ç­–ç•¥ç»„

#### 4.3.1 ä¿®æ”¹ç­–ç•¥ç»„

å‰æ–‡æ‰€è¿°æ¯æ¡åˆ†æµè§„åˆ™å¿…é¡»æœ‰[å¯¹åº”çš„ç­–ç•¥](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#filter%E5%8F%82%E6%95%B0)ã€‚

åŒæ—¶ï¼ŒQXé€šè¿‡UIä¿®æ”¹ç­–ç•¥ç­–ç•¥ç»„åç§°æ—¶ï¼Œå¹¶ä¸ä¼šåŒæ­¥åˆ°å…¶ä»–ä½ç½®

å› æ­¤ï¼Œ

- ä¿®æ”¹ç­–ç•¥ç»„`åç§°`ï¼Œå¿…é¡»é€šè¿‡é…ç½®æ–‡ä»¶ä¿®æ”¹ï¼Œä¸ä»…è¦ä¿®æ”¹policyä¸­çš„ç­–ç•¥ç»„æœ¬èº«ï¼Œå…¶ä»–è¢«å¼•ç”¨çš„éƒ¨åˆ†ä¹Ÿè¦ä¿®æ”¹ã€‚

æ¯”å¦‚å…¶ä»–å¼•ç”¨äº†è¯¥ã€Œéœ€è¦ä¿®æ”¹ç­–ç•¥ç»„ã€çš„ç­–ç•¥ç»„ã€ç­–ç•¥åå¥½ä¸ºã€Œéœ€è¦ä¿®æ”¹ç­–ç•¥ç»„ã€çš„åˆ†æµè§„åˆ™ï¼Œéƒ½éœ€è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ã€‚

eg: å°† `é¦™æ¸¯èŠ‚ç‚¹` ä¿®æ”¹ä¸º `é¦™æ¸¯`

```
[policy]

static=æ‰‹åŠ¨åˆ‡æ¢, é¦™æ¸¯èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, direct
url-latency-benchmark=é¦™æ¸¯èŠ‚ç‚¹, server-tag-regex=é¦™æ¸¯, check-interval=600, alive-checking=false, tolerance=50

[filter_local]
final, é¦™æ¸¯èŠ‚ç‚¹
```

ğŸ‘‡ æ‰€æœ‰çš„ `é¦™æ¸¯èŠ‚ç‚¹` éƒ½è¦ä¿®æ”¹

```
[policy]

static=æ‰‹åŠ¨åˆ‡æ¢, é¦™æ¸¯, ç¾å›½èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, direct
url-latency-benchmark=é¦™æ¸¯, server-tag-regex=é¦™æ¸¯, check-interval=600, alive-checking=false, tolerance=50

[filter_local]
final, é¦™æ¸¯
```

- ä¿®æ”¹ç­–ç•¥ç»„`å‚æ•°`
  - æ¯”å¦‚ä¿®æ”¹ `resource-tag-regex`(éœ€è¦åŒ¹é…çš„`èµ„æºæ ‡ç­¾`) å’Œ  `server-tag-regex`(éœ€è¦åŒ¹é…çš„`èŠ‚ç‚¹æ ‡ç­¾`) æˆ– ç­–ç•¥ç»„ç±»å‹(ä»…é™ä½¿ç”¨æ­£åˆ™ç­›é€‰çš„ç­–ç•¥ç»„),è¿™äº›å¯ä»¥ç›´æ¥UIä¿®æ”¹

  <img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/GroupFIX.JPG" width="900">

  - å¦‚æœæ˜¯ä¿®æ”¹ `check-interval`ã€`alive-checking`ã€`tolerance`ï¼Œåˆ™å¿…é¡»é…ç½®æ–‡ä»¶ä¿®æ”¹
  - ç‰¹ä¾‹ï¼šå½“ä¸€ä¸ª`static`ç­–ç•¥ç»„ä½¿ç”¨ `resource-tag-regex` æˆ– `server-tag-regex` å‚æ•°ï¼Œå¹¶åŒæ—¶å¼•ç”¨äº† å…¶ä»–çš„ç­–ç•¥ç»„ï¼Œæ­¤æ—¶UIç¼–è¾‘å°†å¤±æ•ˆï¼Œå¿…é¡»ä¿®æ”¹é…ç½®æ–‡ä»¶
    - egï¼š`static=æ‰‹åŠ¨åˆ‡æ¢, é¦™æ¸¯èŠ‚ç‚¹, direct, server-tag-regex=.`


#### 4.3.2 ä¿®æ”¹ç­–ç•¥ç»„å›¾æ ‡

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/ICON.jpg" width="600">

- é•¿æŒ‰ç­–ç•¥ç»„/èŠ‚ç‚¹èµ„æº â†’ å›¾æ ‡
- QXèŠ‚ç‚¹èµ„æºåŒºåŸŸçš„å›¾æ ‡åªæ”¯æŒå•è‰²ï¼Œç­–ç•¥ç»„åŒºåŸŸæ”¯æŒå½©è‰²ï¼›
- å›¾æ ‡åˆ†è¾¨ç‡é™åˆ¶144x144ã€108x108ï¼›
- ä¿®æ”¹é…ç½®æ–‡ä»¶çš„ `img-url` å³å¯è‡ªå®šä¹‰å›¾æ ‡
- ç‚¹æ­¤æŸ¥çœ‹[å›¾æ ‡é›†](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E5%9B%BE%E6%A0%87%E9%9B%86)


#### 4.3.3 åˆ é™¤ç­–ç•¥ç»„

å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œéœ€è¦åˆ é™¤æ¯ä¸€å¤„ä½¿ç”¨éœ€è¦åˆ é™¤çš„ç­–ç•¥ç»„çš„åœ°æ–¹ï¼Œéƒ½éœ€è¦ä¿®æ”¹ã€‚

eg: å°† `é¦™æ¸¯èŠ‚ç‚¹` åˆ é™¤

```
[policy]

static=æ‰‹åŠ¨åˆ‡æ¢, é¦™æ¸¯èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, direct
url-latency-benchmark=é¦™æ¸¯èŠ‚ç‚¹, server-tag-regex=é¦™æ¸¯, check-interval=600, alive-checking=false, tolerance=50

[filter_local]
final, é¦™æ¸¯èŠ‚ç‚¹
```

ğŸ‘‡ æ‰€æœ‰çš„ `é¦™æ¸¯èŠ‚ç‚¹` éƒ½è¦åˆ é™¤ï¼Œåˆ†æµè§„åˆ™éœ€è¦æ”¹ä¸ºå…¶ä»–ç­–ç•¥ã€‚

```
[policy]

static=æ‰‹åŠ¨åˆ‡æ¢, ç¾å›½èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, direct

[filter_local]
final, ç¾å›½èŠ‚ç‚¹
```

## 5. DNS ç›¸å…³è®¾ç½®

ä»¥ `;` æˆ– `#` æˆ– `//` å¼€å¤´çš„è¡Œä¸ºæ³¨é‡Šè¡Œã€‚

ä»¥ä¸‹ä¸»è¦è®²çš„æ˜¯ `[dns]` åŒºå—ä¸‹çš„å†…å®¹ï¼Œæ‰€ä»¥ç¤ºä¾‹éƒ½ä»¥ `[dns]` å¼€å¤´è¡¨æ˜åœ¨å…¶ä¹‹ä¸‹ï¼Œå¹¶ä¸æ˜¯è®©ä½ æ¯ä¸ªå‚æ•°å­—æ®µå‰éƒ½åŠ ä¸Š `[dns]`ã€‚

DNS æŸ¥è¯¢ç»“æœä»…ç”¨äºåˆ†æµè§„åˆ™æˆ–é€šè¿‡ç›´æ¥ç­–ç•¥è¿æ¥ï¼Œé€šè¿‡æœåŠ¡å™¨è¿æ¥æ—¶ä¸ä¼šä½¿ç”¨è¯¥ç»“æœï¼ŒQuantumult æ°¸è¿œä¸ä¼šçŸ¥é“ç›¸å…³åŸŸåçš„ç›®çš„ IPã€‚

### 5.1 æ¨è DNS è®¾ç½®
```
[dns]
no-system
no-ipv6
server = 119.29.29.29
server = 223.5.5.5:53
```
æ­¤ DNS è®¾ç½®é€‚åˆç»å¤§å¤šæ•°å›½å†…ç”¨æˆ·

### 5.2 ä¼ ç»Ÿ DNS è®¾ç½®
```
[dns]
server = 119.29.29.29
server = 223.5.5.5:53
server = [2402:4e00::]
server = [2400:3200::1]
```
å¯ä»¥å¦‚ä¸Šç¬¬äºŒæ¡é‚£æ ·æŒ‡å®šç«¯å£


### 5.3 ç¦ç”¨ç³»ç»Ÿ DNS
```
[dns]
no-system
```
å¦‚æœä½ å¹¶ä¸æƒ³ä½¿ç”¨ç³»ç»Ÿ (é€šè¿‡ DHCP) è‡ªåŠ¨è·å–çš„ DNS è®¾ç½®ï¼Œå¯ä»¥å¦‚ä¸Šè®¾ç½®ï¼Œä½†éœ€è¦æ³¨æ„åº”è¯¥è®¾ç½®è‡³å°‘ä¸€æ¡è‡ªå®šä¹‰ DNSï¼Œå¦‚ä¸Šè¿°çš„ `server = 119.29.29.29`

### 5.4 ç¦ç”¨ IPv6
```
[dns]
no-ipv6
```
å½“è®¾ç½® `no-ipv6` æ—¶ï¼ŒQuantumult X Tunnel çš„ DNS æ¨¡å—å°†ç›´æ¥è®© AAAA æŸ¥è¯¢å¤±è´¥ï¼Œä½†ä»ç„¶å…è®¸ä» IPv6çš„ DNS æœåŠ¡å™¨æŸ¥è¯¢ A è®°å½•ã€‚

### 5.5 å¯ç”¨ IPv6
```
[dns]
no-system
server = 119.29.29.29
server = 223.5.5.5
server = [2402:4e00::]
server = [2400:3200::1]
```
åŒæ—¶éœ€è¦åœ¨å³ä¸‹è§’é£è½¦ã€Œè®¾ç½®ã€â†’ã€Œå…¶ä»–è®¾ç½®ã€â†’ã€ŒVPNã€åŒºåŸŸ-å¼€å¯/å…³é—­ã€Œå…¼å®¹æ€§å¢å¼ºã€


### 5.6 åŠ å¯† DNS è®¾ç½®

#### 5.6.1 DNS over HTTPS
```
[dns]
;doh-server = https://exmaple1.com/dns-query, https://exmaple2.com/dns-query
doh-server = https://dns.alidns.com/dns-query
```
å½“è®¾ç½® `doh-server` (DNS over HTTPS) æˆ– `doq-server` (DNS over QUIC)æ—¶ï¼Œ`system` å’Œæ‰€æœ‰å…¶ä»–æœªåŠ å¯†çš„å¸¸è§„ (æ²¡æœ‰ç‰¹å®šçš„åŸŸä¸ä¹‹ç»‘å®š) æœåŠ¡å™¨å°†è¢«å¿½ç•¥ã€‚

å¤šä¸ª (å¹¶å‘æŸ¥è¯¢) `doh-server` åº”é…ç½®åœ¨ä¸€è¡Œä¸­ï¼ŒURLs åº”ä»¥é€—å·åˆ†å¼€ã€‚

å¦‚æœ iOS ç‰ˆæœ¬å°äº iOS 13.0ï¼Œæœ€å¤§çš„ `doh-server` æ•°é‡å°†è¢«é™åˆ¶ä¸º 1ï¼›å¦‚æœ iOS ç‰ˆæœ¬å°äºiOS 15.0ï¼Œæœ€å¤§çš„ `doh-server` æ•°é‡å°†è¢«é™åˆ¶ä¸º 2ã€‚

å½“ä½¿ç”¨çš„ `doh-server` ä¸æ˜¯åŸºäº HTTP/2 æ—¶ï¼ŒDoH å°†è¢«æš‚æ—¶ç¦ç”¨ï¼Œæ™®é€šçš„æœåŠ¡å™¨å°†è¢«ä½¿ç”¨ï¼Œç›´åˆ°ä¸‹æ¬¡å¯åŠ¨ VPN è¿æ¥ã€‚

#### 5.6.2 HTTP/3 çš„ DoH
```
[dns]
prefer-doh3
```
å½“ `prefer-doh3` è¢«è®¾ç½®æ—¶ï¼ŒDoH å°†å°è¯•é€šè¿‡ HTTP/3 çš„æŸ¥è¯¢ï¼Œå¦‚æœå¤±è´¥ï¼ŒæŸ¥è¯¢è¿æ¥å°†é€€å›åˆ° HTTP/2ã€‚

ç”±äº HTTP/2 å’Œ HTTP/3 è¿æ¥éƒ½æ”¯æŒå¤ç”¨ï¼Œå½“æ”¹å˜è¯¥è®¾ç½®æ—¶å®ƒå¯èƒ½ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œä½†å¯ä»¥é€šè¿‡é‡æ–°è¿æ¥Quantumult X éš§é“æˆ–æ‰‹åŠ¨æ”¹å˜å½“å‰ç½‘ç»œç¯å¢ƒï¼Œè®©å®ƒç«‹å³ç”Ÿæ•ˆã€‚

#### 5.6.3 è‡ªå®šä¹‰ DoH çš„ User Agent
DoH çš„ `User Agent` éœ€è¦åœ¨ `[general]` è®¾ç½®ï¼šè§ [èŠ‚ç‚¹å»¶è¿Ÿ](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E8%8A%82%E7%82%B9%E5%BB%B6%E8%BF%9F)

#### 5.6.4 DNS over QUIC
```
[dns]
;doq-server = quic://dns1.example.com, quic://dns2.example.com
doq-server = quic://dns.adguard.com
```
å½“è®¾ç½® `doh-server` (DNS over HTTPS) æˆ– `doq-server` (DNS over QUIC)æ—¶ï¼Œ`system` å’Œæ‰€æœ‰å…¶ä»–æœªåŠ å¯†çš„å¸¸è§„ (æ²¡æœ‰ç‰¹å®šçš„åŸŸä¸ä¹‹ç»‘å®š) æœåŠ¡å™¨å°†è¢«å¿½ç•¥ã€‚

å¤šä¸ª(å¹¶å‘æŸ¥è¯¢) `doq-server` åº”é…ç½®åœ¨ä¸€è¡Œä¸­ï¼ŒURLs åº”ä»¥é€—å·åˆ†éš”ã€‚

DoQ çš„é»˜è®¤ç«¯å£æ˜¯ 853ï¼Œå¦‚æœåŒæ–¹åŒæ„ä½¿ç”¨å…¶ä»–ç«¯å£ï¼Œå¦‚ 456ï¼Œä½ å¯ä»¥è®¾ç½®ä¸º `quic://dns.example.com:456ã€‚`

### 5.7 å›½å†… DNS æ¨è

#### 5.7.1 è…¾è®¯DNS

- IPv4 UDPï¼š`119.29.29.29`
- IPv6 UDPï¼š`[2402:4e00::]`
- DoHï¼š`https://1.12.12.12/dns-query`, `https://120.53.53.53/dns-query`, `https://doh.pub/dns-query`

#### 5.7.2 é˜¿é‡Œäº‘DNS
- IPv4 UDPï¼š`223.5.5.5`, `223.6.6.6`
- IPv6 UDPï¼š`[2400:3200::1]`, `[2400:3200:baba::1]`
- DoHï¼š`https://dns.alidns.com/dns-query`
- DoQï¼š`quic://dns.alidns.com:853`, `quic://223.5.5.5:853`, `quic://223.6.6.6:853`

### 5.8 æŒ‡å®š DNS æŸ¥è¯¢æŒ‡å®šåŸŸå
```
[dns]
; ä½¿ç”¨ç³»ç»Ÿ DNS è§£æ example.com
server = /example.com/system

; ä½¿ç”¨ 119.29.29.29 æŸ¥è¯¢ qq.com åŠå…¶å­åŸŸå
server = /qq.com/119.29.29.29
server = /*.qq.com/119.29.29.29:53

; ä½¿ç”¨ [2001:4860:4860::8888] çš„ 53 ç«¯å£è§£æ example.com
server = /example.com/[2001:4860:4860::8888]:53
```
å¯ä»¥å¦‚ä¸ŠæŒ‡å®š DNS æŸ¥è¯¢ç‰¹å®šåŸŸåï¼Œå¦‚éœ€è¦æŒ‡å®šç«¯å£å·ï¼Œå¯ä»¥åœ¨ DNS åé¢åŠ ä¸Šè‹±æ–‡å†’å·åŠç«¯å£å·ã€‚

### 5.9 æœ¬åœ° DNS æ˜ å°„
```
[dns]
; æŒ‡å®šåŸŸååˆ°ç‰¹å®š IP åœ°å€
;address = /example5.com/192.168.16.18
;address = /example6.com/[2001:8d3:8d3:8d3:8d3:8d3:8d3:8d3]

; åˆ«å
alias = /example7.com/another-example.com
```
è¿™é‡Œä¸å…è®¸ç›´æ¥ä¸ºæŸä¸ªåŸŸè®¾ç½® `127.0.0.1`ã€‚

å¦‚æœæƒ³è®©æŸä¸ªåŸŸ (ä¾‹å¦‚ example.com) ä¸º `127.0.0.1`ï¼Œåªéœ€åœ¨ `[filter_local]` åŒºå—æ·»åŠ  `host, example.com, reject`ï¼ŒREJECT æ“ä½œå°†å‘æŸ¥è¯¢è¿”å›å…·æœ‰ `127.0.0.1` çš„ DNS å“åº”ã€‚

### 5.10 åœ¨æŒ‡å®š SSID ä¸‹ç”Ÿæ•ˆæˆ–å¤±æ•ˆ
åœ¨ SSID ä¸º `SSID1` æ—¶ä¸ä½¿ç”¨ `8.8.8.8`ï¼š
```
[dns]
server = 8.8.8.8, excluded_ssids=SSID1
```
åœ¨ SSID ä¸º `SSID2` æ—¶ä½¿ç”¨ `8.8.4.4`ï¼š

```
[dns]
server = 8.8.4.4:53, included_ssids=SSID2
```
### 5.11 è§„é¿æŒ‡å®šç»“æœ
```
[dns]
circumvent-ipv4-answer = 127.0.0.1, 0.0.0.0
circumvent-ipv6-answer = ::
```
ç”¨äºæŒ‡å®š DNS æœåŠ¡å™¨è¿”å›çš„ A åŠ AAAA è®°å½•ä¸­å“ªäº›å±äºæ— æ•ˆç»“æœ

å¯ä½¿ç”¨é€šé…ç¬¦ `?` ä¸ `*`

âš ï¸ æ³¨æ„ï¼š

> å½“å¹¶å‘å‘å¤šä¸ªä¸Šæ¸¸ DNS è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œå¦‚å“åº”æœ€å¿«çš„ä¸Šæ¸¸ DNS æŠ¢ç­”çš„ç»“æœå‘½ä¸­äº†è¯¥æ¡ç›®ï¼Œåˆ™ Quantumult X Tunnel DNS æ¨¡å—ä¼šç­‰å¾…å…¶ä»– DNS æœåŠ¡å™¨çš„å“åº”ç»“æœï¼ˆå¦‚æŠ¢ç­”çš„ç»“æœä¸­è‡³å°‘æœ‰ä¸€ä¸ªä¸å±äºè¯¥æ¡ç›®ï¼Œåˆ™ä¸ä¼šç­‰å¾…å…¶ä»– DNS çš„å“åº”ï¼Œæ­¤æ—¶æœ‰æ•ˆç»“æœé‡‡ç”¨ä¸å±äºè¯¥æ¡ç›®çš„æ‰€æœ‰è®°å½•ï¼‰ï¼›

> å¦‚æ‰€æœ‰ä¸Šæ¸¸ DNS è¿”å›çš„æ‰€æœ‰ç»“æœå‡å‘½ä¸­è¯¥æ¡ç›®ï¼Œåˆ™åˆ¤å®šä¸º DNS æŸ¥è¯¢å¤±è´¥ï¼›

> å¦‚é…ç½®çš„ä¸Šæ¸¸ DNS åŒ…å«æœ‰å»å¹¿å‘ŠåŠŸèƒ½çš„ DNS æœåŠ¡å™¨ï¼Œè¯·å‹¿ä½¿ç”¨è¯¥å‚æ•°ï¼›


## 6. MitM & è¯ä¹¦

ä»¥ `;` æˆ– `#` æˆ– `//` å¼€å¤´çš„è¡Œä¸ºæ³¨é‡Šè¡Œã€‚

ä»¥ä¸‹ä¸»è¦è®²çš„æ˜¯ `[mitm]` åŒºå—ä¸‹çš„å†…å®¹ï¼Œæ‰€ä»¥ç¤ºä¾‹éƒ½ä»¥ `[mitm]` å¼€å¤´è¡¨æ˜åœ¨å…¶ä¹‹ä¸‹ï¼Œå¹¶ä¸æ˜¯è®©ä½ æ¯ä¸ªå‚æ•°å­—æ®µå‰éƒ½åŠ ä¸Š `[mitm]`ã€‚

æ‰€æœ‰çš„HTTPSè§£å¯†ã€é‡å†™(rewrite)å’Œ[ä¸­é—´äººæ”»å‡»](https://zh.wikipedia.org/wiki/%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB)(MitM)ï¼Œå‡ä¾èµ–äºæ ¹è¯ä¹¦

### 6.1 å®‰è£…å¹¶ä¿¡ä»»è¯ä¹¦

> å»ºè®®å…ˆå¯¼å…¥é…ç½®

- ç‚¹å‡»å³ä¸‹è§’é£è½¦è¿›å…¥ã€Œè®¾ç½®ã€ â†’ åœ¨ã€ŒMitMã€åŒºåŸŸï¼Œç‚¹å‡»ã€Œç”Ÿæˆè¯ä¹¦ã€

- ç‚¹å‡»ã€Œé…ç½®è¯ä¹¦ã€ â†’ è·³è½¬Safariï¼Œç‚¹å‡»å…è®¸ â†’ ç‚¹å‡»ã€ŒiPhoneã€

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/MITM1.jpg" width="1500">

- è¿›å…¥ã€Œç³»ç»Ÿè®¾ç½®ã€ â†’ ã€Œå·²ä¸‹è½½æè¿°æ–‡ä»¶ã€ â†’ è¾“å…¥å¯†ç å¹¶å®‰è£…

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/MITM2.jpg" width="900">

- è¿›å…¥ã€Œç³»ç»Ÿè®¾ç½®ã€ â†’ ã€Œé€šç”¨ã€ â†’ ã€Œå…³äºæœ¬æœºã€ â†’ æœ€ä¸‹æ–¹ã€Œè¯ä¹¦ä¿¡ä»»è®¾ç½®ã€ â†’ å‹¾é€‰åˆšæ‰å®‰è£…çš„è¯ä¹¦

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/MITM3.jpg" width="900">

- è¿”å›QXï¼Œç‚¹å‡»å³ä¸‹è§’é£è½¦è¿›å…¥ã€Œè®¾ç½®ã€ â†’ åœ¨ã€ŒMitMã€åŒºåŸŸï¼Œå‹¾é€‰ã€ŒMitMã€å¼€å…³

### 6.2 å¤‡ä»½è¯ä¹¦

å½“å®Œæˆä¸Šé¢çš„æ­¥éª¤åï¼Œä¼šåœ¨é…ç½®æ–‡ä»¶ `[mitm]` åŒºåŸŸï¼Œç”Ÿæˆå¯¹åº”çš„`passphrase`å’Œ`p12`æ•°æ®

```
[mitm]
passphrase = 
p12 = 

```

å½“éœ€è¦æ›¿æ¢å…¶ä»–é…ç½®æ—¶ï¼Œåªéœ€è¦å°†å¯¹åº”çš„`passphrase`å’Œ`p12`æ•°æ®å¤åˆ¶ç²˜è´´åˆ°æ–°çš„é…ç½®ä¸­å»ï¼Œå°±æ— éœ€å†æ¬¡å®‰è£…è¯ä¹¦

### 6.3 ä¸»æœºå

```
[mitm]
hostname = abc.com

```

- å¯ä½¿ç”¨é€šé…ç¬¦ `*` å’Œ `?` ï¼›
- å¯ä½¿ç”¨å‰ç¼€ `-` å°†ç‰¹å®šä¸»æœºåæ’é™¤ï¼›
- é…ç½®æ–‡ä»¶ä¸­ï¼Œå¤šä¸ªä¸»æœºåå¯ç”¨ `,` åˆ†å‰²
- å•ç‹¬çš„`*`ç¬¦åˆä½œä¸ºä¸»æœºåå‚æ•°ä¼šåŒ¹é…æ‰€æœ‰ä¸»æœºå

#### 6.3.1 UI æŸ¥çœ‹ & æ·»åŠ 

ç‚¹å‡»å³ä¸‹è§’é£è½¦è¿›å…¥ã€Œè®¾ç½®ã€ â†’ ã€ŒMitMã€åŒºåŸŸ-ã€Œä¸»æœºåã€

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/HOSTNAME.jpg" width="900">

### 6.4 `[mitm]` å…¶ä»–å‚æ•°

```
[mitm]
# è·³è¿‡éªŒè¯è¯ä¹¦
skip_validating_cert = false
# å¼ºåˆ¶å—…æ¢åŸŸå
force_sni_domain_name = false

# å½“ä½¿ç”¨ Quantumult X åœ¨ M èŠ¯ç‰‡çš„ Mac è®¾å¤‡ä¸Šä½œä¸ºå±€åŸŸç½‘ç½‘å…³æ—¶ï¼Œä½¿ç”¨ä¸‹é¢çš„å‚æ•°æ¥ è·³è¿‡æŸäº›ç‰¹å®šè®¾å¤‡çš„ mitm éœ€æ±‚
;skip_src_ip = 192.168.4.50, 92.168.4.51
# å½“å¤šä¸ªä¸åŒçš„ TCP è¿æ¥ï¼ˆéåŸŸåç±»è¯·æ±‚ï¼‰çš„ç›®æ ‡ IP ä¸åŒï¼Œä½†è¿™äº›è¿æ¥çš„ TSL æ¡æ‰‹ SNI å­—æ®µç›¸åŒæ—¶ï¼Œå¦‚éœ€è·³è¿‡å…¶ä¸­æŸäº›è¿æ¥çš„ MitM hostname åŒ¹é…è¿‡ç¨‹ï¼Œå¯ä½¿ç”¨ğŸ‘‡å‚æ•°ã€‚
;skip_dst_ip = 123.44.55.4

```

## 7. é‡å†™(rewrite)

ä»¥ä¸‹ä¸»è¦è®²çš„æ˜¯ `[rewrite_local]`ã€`[rewrite_remote]` æˆ– `[mitm]`  åŒºå—ä¸‹çš„å†…å®¹ï¼Œæ‰€ä»¥ç¤ºä¾‹éƒ½ä»¥ `[rewrite_local]`ã€`[rewrite_remote]` æˆ– `[mitm]` å¼€å¤´è¡¨æ˜åœ¨å…¶ä¹‹ä¸‹ï¼Œå¹¶ä¸æ˜¯è®©ä½ æ¯ä¸ªå‚æ•°å­—æ®µå‰éƒ½åŠ ä¸Š `[rewrite_local]`ã€`[rewrite_remote]` æˆ– `[mitm]`ã€‚


### 7.1 æ·»åŠ æœ¬åœ°é‡å†™

> é‡å†™ä¾èµ–è¯ä¹¦ï¼Œè¯·åŠ¡å¿…å®‰è£…ä¿¡ä»»è¯ä¹¦ï¼


#### 7.1.1 é‡å†™ç±»å‹

> ä»¥ä¸‹å†…å®¹æ¬è¿è‡³QXç¤ºä¾‹é…ç½®æ–‡ä»¶

- `reject`è¿”å› HTTP çŠ¶æ€ä»£ç  404ï¼Œæ²¡æœ‰ä»»ä½•å†…å®¹ã€‚
- `reject-200` è¿”å› HTTP çŠ¶æ€ä»£ç  200ï¼Œæ²¡æœ‰å†…å®¹ã€‚
- `reject-img` è¿”å› HTTP çŠ¶æ€ä»£ç  200ï¼Œå†…å®¹ä¸º 1px gifã€‚
- `reject-dict` è¿”å› HTTP çŠ¶æ€ä»£ç  200ï¼Œå†…å®¹ä¸ºç©º json å¯¹è±¡ã€‚
- `reject-array` è¿”å› HTTP çŠ¶æ€ä»£ç  200ï¼Œå†…å®¹ä¸ºç©º json æ•°ç»„ã€‚
- `request-header` é€‚ç”¨äºæ‰€æœ‰ http æ ‡å¤´ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ ‡å¤´ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸­åŒ¹é…ä¸¤ä¸ªæˆ–å¤šä¸ªæ ‡å¤´ï¼ˆåŒ…æ‹¬ CRLFï¼‰ã€‚
- å¦‚æœ `rewrite` ä¸æ­£æ–‡ç›¸å…³ï¼Œåˆ™ä¸é•¿åº¦å’Œç¼–ç ç›¸å…³çš„ HTTP æ ‡å¤´å­—æ®µå°†ç”± Quantumult è‡ªåŠ¨å¤„ç†ï¼Œå› æ­¤æ‚¨ä¸åº”è‡ªè¡Œå¤„ç†å®ƒä»¬ã€‚ å“åº”æ­£æ–‡å’Œè„šæœ¬å“åº”æ­£æ–‡æ”¯æŒçš„æœ€å¤§å“åº”å¤§å°ä¸º 1024kBï¼ˆè§£å‹ç¼©ï¼‰ã€‚
- å¦‚æœ`body`ä¸ºç©ºï¼Œåˆ™ä¸ä¼šæ‰§è¡Œbodyç›¸å…³çš„é‡å†™ã€‚
- åœ¨é‡å†™ä¸­ä½¿ç”¨ javascript æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å¯¹è±¡ï¼š`$request`ã€`$response`ã€`$notify(title, subtitle, message)`ã€`console.log(message)` å’Œ Quantumult çš„å†…ç½®å¯¹è±¡éƒ½æœ‰å‰ç¼€`$`ã€‚
- æ”¯æŒï¼š`$request.scheme`ã€`$request.method`ã€`$request.url`ã€`$request.path`ã€`$request.headers`ã€`$response.statusCode`ã€`$response.headers`ã€`$response.body`
- å¦‚æœå¯ç”¨äº† Quantumult é€šçŸ¥ï¼Œ`$notify(title, subtitle, message)` å°†å‘å¸ƒ iOS é€šçŸ¥ã€‚
- `$prefs` ç”¨äºæŒä¹…å­˜å‚¨ï¼š`$prefs.valueForKey(key)`ã€`$prefs.setValueForKey(value, key)`ã€`$prefs.removeValueForKey(key)`ã€`$prefs.removeAllValues()`ã€‚
- å¦‚æœæ—¥å¿—çº§åˆ«ä¸º`debug`ï¼Œ`console.log(message)` ä¼šå°†æ—¥å¿—è¾“å‡ºåˆ° Quantumult æ—¥å¿—æ–‡ä»¶ã€‚
- `setTimeout(function() { }, Interval)` å°†åœ¨`interval`(ms)åè¿è¡Œå‡½æ•°ã€‚
- `script-request-header`ã€`script-request-body`ã€`script-response-header`ã€`script-response-body` å’Œ `script-echo-response` çš„è„šæœ¬åº”ä¿å­˜åœ¨æœ¬åœ°`æˆ‘çš„iPhone - Quantumult X - Scripts`æˆ–` iCloud Drive - Quantumult X - è„šæœ¬`ã€‚ ç¤ºä¾‹å¯ä»¥åœ¨ https://github.com/crossutility/Quantumult-X æ‰¾åˆ°

#### 7.1.2 é…ç½®æ–‡ä»¶æ·»åŠ 

ä»¥ä¸‹ä¸ºé‡å†™åœ¨é…ç½®æ–‡ä»¶ä¸­çš„å†™æ³•

```
[rewrite_local]
;^http://example\.com/resource1/1/ url reject
;^http://example\.com/resource1/2/ url reject-img
;^http://example\.com/resource1/3/ url reject-200
;^http://example\.com/resource1/4/ url reject-dict
;^http://example\.com/resource1/5/ url reject-array
;^http://example\.com/resource2/ url 302 http://example.com/new-resource2/
;^http://example\.com/resource3/ url 307 http://example.com/new-resource3/
;^http://example\.com/resource4/ url request-header ^GET /resource4/ HTTP/1\.1(\r\n) request-header GET /api/ HTTP/1.1$1
;^http://example\.com/resource4/ url request-header (\r\n)User-Agent:.+(\r\n) request-header $1User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36$2
;^http://example\.com/resource5/ url request-body "info":\[.+\],"others" request-body "info":[],"others"
;^http://example\.com/resource5/ url response-body "info":\[.+\],"others" response-body "info":[],"others"
;^http://example\.com/resource6/ url script-response-body response-body.js
;^http://example\.com/resource7/ url script-echo-response script-echo.js
;^http://example\.com/resource8/ url script-response-header response-header.js
;^http://example\.com/resource9/ url script-request-header request-header.js
;^http://example\.com/resource10/ url script-request-body request-body.js

[mitm]
hostname = example.com
```


ä»¥å’Œé£å¤©æ°”å»å¹¿å‘Šä¸ºä¾‹å­:
```
[rewrite_local]
# å’Œé£å¤©æ°”
^https:\/\/hfapp-service\.qweather\.net\/v2\.0\/app\/ad\/list\? url reject-dict

[mitm]
hostname = hfapp-service.qweather.net
```

å¯ä»¥å°†å¯¹åº”çš„è§„åˆ™å¤åˆ¶ç²˜è´´åˆ°é…ç½®æ–‡ä»¶å¯¹åº”çš„éƒ¨åˆ†ï¼š

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI9-1.PNG" width="900">

æ³¨æ„ä¸»æœºå`hostname`çš„éƒ¨åˆ†ä¸è¦é‡å¤å‡ºç°ï¼š

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI9-2.PNG" width="600">

å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡UIæ·»åŠ ï¼š

æ³¨æ„ï¼šURLéƒ¨åˆ†åªéœ€è¦å¡«å†™ `^https:\/\/hfapp-service\.qweather\.net\/v2\.0\/app\/ad\/list\?`ï¼Œæ— éœ€å¡«å†™`url`

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI9-3.PNG" width="1200">

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI9-4.PNG" width="900">

#### 7.1.3 é…ç½®ç‰‡æ®µæ·»åŠ 

ä»¥å’Œé£å¤©æ°”ä¸ºä¾‹ï¼Œé…ç½®ç‰‡æ®µæ·»åŠ å†…å®¹æ— éœ€å¸¦æœ‰ `[rewrite_local]` `[mitm]`ç­‰å­—æ®µ

æ­¤æ–¹æ³•å³å¯å°†æœ¬åœ°å†…å®¹ä½œä¸ºè¿œç¨‹èµ„æºæ·»åŠ ï¼Œåªä¸è¿‡èµ„æºè·¯å¾„æ˜¯åœ¨æœ¬åœ°çš„æ–‡ä»¶

```
# å’Œé£å¤©æ°”
^https:\/\/hfapp-service\.qweather\.net\/v2\.0\/app\/ad\/list\? url reject-dict

hostname = hfapp-service.qweather.net
```

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI9-6.PNG" width="900">


#### Tips:æœ¬åœ°é‡å†™éœ€é…ç½®è„šæœ¬

æœ‰éƒ¨åˆ†é‡å†™èµ„æºï¼Œéœ€è¦è‡ªè¡Œé…ç½®é‡å†™è§„åˆ™æ‰€ä½¿ç”¨çš„è„šæœ¬æ–‡ä»¶(.js)

ä»¥[Spotifyç¿»è¯‘@app2smile](https://t.me/NobyDa/516)ä¸ºä¾‹(ä»…åšæ¼”ç¤ºï¼ŒSpotifyç¿»è¯‘æœ‰è·Ÿç®€å•çš„æ–¹æ³•)ï¼š

>æ³¨å†Œç™¾åº¦ç¿»è¯‘ä¸ªäººå¼€å‘è€…: http://api.fanyi.baidu.com/register
>
>æ³¨å†Œåå¦‚æœéœ€è¦è®¤è¯å¯è‡ªè¡Œé€‰æ‹©æ˜¯å¦å®äººè®¤è¯(é«˜çº§ç‰ˆéœ€è¦éªŒè¯)
>
>å¼€é€š(é€šç”¨ç¿»è¯‘)APIæœåŠ¡: https://fanyi-api.baidu.com/choose
>
>æˆåŠŸåå³å¯çœ‹åˆ°è‡ªå·±çš„appidå’Œå¯†é’¥(ä¸è¦æ³„éœ²ç»™ä»»ä½•äºº): http://api.fanyi.baidu.com/manage/developer

1.Quantumult Xå…¶ä»–è®¾ç½®ä¸­ï¼Œæ‰“å¼€ iCloudäº‘ç›˜ ï¼›ç¡®ä¿å·²å¼€å¯ `mitm` `é‡å†™` å¹¶ ä¿¡ä»»å®‰è£…äº†è¯ä¹¦

2.æ‰“å¼€[æ­Œè¯ç¿»è¯‘è„šæœ¬(.js)](https://github.com/app2smile/rules/blob/master/js/spotify-lyric.js)åœ°å€ï¼Œå¹¶ä¸€é”®å¤åˆ¶
<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/js1.png" >

å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å°†è„šæœ¬ä¸‹è½½åˆ°`iCloudäº‘ç›˜ â–¸ Quantumult X â–¸ Scripts`æ–‡ä»¶ç›®å½•ï¼Œç‚¹å‡»è„šæœ¬å³å¯åœ¨è·³è½¬ Quantumult X ç¼–è¾‘

æ³¨æ„ï¼šå»ºè®®æ‰“å¼€ã€Œæ–‡ä»¶ã€çš„ã€Œæ˜¾ç¤ºæ‰€æœ‰æ‹“å±•åã€ï¼Œé˜²æ­¢å‡ºç° `Spotify-lyric.js.js` è¿™ç§é—®é¢˜

3.æ‰“å¼€ HTTP è¯·æ±‚ï¼Œç‚¹å‡»å³ä¸‹è§’çš„è„šæœ¬ç¼–è¾‘å™¨ï¼Œå°†å¤åˆ¶åˆ°çš„è„šæœ¬å†…å®¹ã€Œè¦†ç›–ã€
<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/js2.PNG" >

4.é…ç½®é‡å†™

æ³¨æ„ï¼š`Spotify-lyric.js`çš„åç§°è¦ä¸ä¸Šé¢å¡«å†™çš„ä¸€è‡´
```
[rewrite_local]
^https:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/ url script-response-body Spotify-lyric.js
[mitm]
hostname = spclient.wg.spotify.com
```


### 7.2 æ·»åŠ è¿œç¨‹é‡å†™

> é‡å†™ä¾èµ–è¯ä¹¦ï¼Œè¯·åŠ¡å¿…å®‰è£…ä¿¡ä»»è¯ä¹¦ï¼

#### 7.2.1 é…ç½®æ–‡ä»¶æ·»åŠ 

è¿œç¨‹é‡å†™åœ¨ é…ç½®æ–‡ä»¶`[rewrite_remote]` ä¸‹æ·»åŠ ï¼š

```
[rewrite_remote]
https://example.com/rewrite.conf, tag=ğŸ›¡ï¸ Block Ads, update-interval=172800, opt-parser=true, inserted-resource=true, enabled=true
```
ä¹Ÿå°±æ˜¯è¯´ä¸€æ¡å®Œæ•´çš„è¿œç¨‹é‡å†™é…ç½®æ˜¯è¿™ä¹ˆç»„æˆçš„ï¼š

`<èµ„æºè·¯å¾„>, <èµ„æºæ ‡ç­¾>, <è‡ªåŠ¨æ›´æ–°æ—¶é—´é—´éš”>, <æ˜¯å¦ä½¿ç”¨èµ„æºè§£æå™¨>, <æ’å…¥èµ„æº>, <æ˜¯å¦å¯ç”¨>`

- `tag` èµ„æºæ ‡ç­¾ï¼šç›¸å½“äºåç§°ï¼Œæ ‡è¯†è¿™æ¡è¿œç¨‹åˆ†æµæ–‡ä»¶çš„ä½œç”¨ï¼›

- `update-interval` è‡ªåŠ¨æ›´æ–°çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’ï¼›

- `opt-parser` æ˜¯å¦ä½¿ç”¨èµ„æºè§£æå™¨ï¼Œè‹¥å…³é—­åˆ™æ”¹ä¸º `false`ï¼›

- `inserted-resource` æ’å…¥èµ„æºï¼Œå°†é‡å†™æ–‡ä»¶ä¸­çš„è§„åˆ™æ”¾ç½®äºæœ¬åœ°è§„åˆ™ä¹‹å‰ï¼›

- `enabled` æ˜¯å¦å¯ç”¨è¯¥é‡å†™èµ„æºæ–‡ä»¶ï¼Œè‹¥ä¸ä½¿ç”¨å¯æ”¹ä¸º `false`ï¼›


è¿œç¨‹é‡å†™é€šå¸¸é…ç½®å¥½äº†ä¸»æœºå`hostname`ï¼Œå› æ­¤å¤§å¤šæ•°æ˜¯æ— éœ€è‡ªè¡Œå¡«å†™


#### 7.2.2 UIæ·»åŠ 

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI9-5.PNG" width="900">

âš ï¸ æ³¨æ„ï¼š

- èµ„æºè·¯å¾„ï¼Œéœ€è¦å¡«å†™**rawæ ¼å¼**

ä»¥ä¸‹æ–¹çš„é“¾æ¥ä¸¾ä¾‹(è¿™æ˜¯ä¸ªç½‘é¡µï¼Œä¸æ˜¯çœŸæ­£èƒ½ä½¿ç”¨çš„èµ„æºé“¾æ¥)ï¼š
`https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/12306/12306.list`

ä¾‹å¦‚åœ¨æœ«å°¾æ·»åŠ `?raw=ture`ï¼š
`https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/QuantumultX/12306/12306.list?raw=ture`

æˆ–è€…ç›´æ¥ç‚¹å‡»`raw`æˆ–è€…`view`ï¼Œâ ä½¿ç”¨è·³è½¬åçš„é“¾æ¥ï¼š
`https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/12306/12306.list`

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/raw1.jpg" >

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/raw2.png" >

æˆ–è€…å°†é“¾æ¥é‡Œçš„`blob`â ä¿®æ”¹ä¸º`raw`ï¼š
`https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/QuantumultX/12306/12306.list`

- ã€Œèµ„æºè§£æå™¨ã€ï¼šæ˜¯å¯¹å¼•ç”¨çš„èµ„æºæ–‡ä»¶å†…å®¹(è¿œç¨‹oré…ç½®ç‰‡æ®µ)ï¼Œè¿›è¡Œè§£æ/è½¬æ¢/ä¿®æ”¹ï¼Œå˜æˆ Quantumult X æ”¯æŒçš„å†…å®¹ï¼Œå¯ç”¨åœ¨Quantumult X çš„ä¸‰ä¸ªä¸»è¦æ¨¡å—ï¼šâ‘ èŠ‚ç‚¹ â‘¡åˆ†æµ â‘¢é‡å†™ï¼Œå…·ä½“ä½¿ç”¨è¯´æ˜è§è§£æå™¨ä¸‹æ–¹æ•™ç¨‹ï¼›

  - å¦‚æœä½ çš„è§£æå™¨æ˜¯ç©ºçš„ï¼Œã€ŒèŠ‚ç‚¹é¡µã€ç‚¹å‡»å·¦ä¸‹è§’ç¼–è¾‘ï¼Œéœ€è¦åœ¨ `[general]` ä¸‹æ·»åŠ ï¼š

  ```
  resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js 
  ```
  - ä½¿ç”¨éæ ‡å‡†QuantumultXçš„é‡å†™æ—¶ï¼Œä¾‹å¦‚ä¸€äº›è„šæœ¬`.js`ã€å…¶ä»–è½¯ä»¶çš„æ¨¡å—`.sgmodule`ã€æ’ä»¶`.plugin`â ç­‰ï¼Œè¿™äº›é‡Œé¢éƒ½åŒ…å«æœ‰é‡å†™è§„åˆ™ï¼Œå¯å¼€å¯è§£æå™¨ä½¿å…¶å˜ä¸ºQXæ”¯æŒçš„æ ¼å¼ï¼›ä½†è¿™å¹¶ä¸æ„å‘³ç€ä¸Šè¿°æ ¼å¼çš„æ–‡ä»¶åœ¨å¼€å¯è§£æå™¨åä¸€å®šå¯ç”¨ã€‚éœ€è¦è‡ªè¡Œé‰´åˆ«ã€‚

  âœ… Surgeæ¨¡å—ï¼šhttps://raw.githubusercontent.com/Keywos/rule/main/module/weibous.sgmodule

  âœ… åŒ…å«é‡å†™è§„åˆ™çš„è„šæœ¬(.js)
  ```
  /* 

  Lento  

  [rewrite_local]
  https://lentoapp.com:8081/getUserMemberShipInfo url script-response-body https://raw.githubusercontent.com/Yu9191/Rewrite/main/Lento.js

  [MITM]

  hostname = lentoapp.com:8081

  */

  let obj = {
    "meta" : {
      "message" : "è·å–ä½œè€…ä¿¡æ¯æˆåŠŸ",
      "code" : 200
    },
    "data" : {
      "paytype" : 1,
      "expiretime" : "null"
    }
  }

  $done({ body: JSON.stringify(obj), status: 200 });
  ```

  âŒ é‡å†™ä½¿ç”¨çš„è„šæœ¬ï¼Œä¸åŒ…å«é‡å†™è§„åˆ™ï¼šhttps://raw.githubusercontent.com/RuCu6/QuanX/main/Scripts/12306.js

#### 7.2.3 è¿œç¨‹é‡å†™èµ„æºæ›´æ–°ä¸é‡å†™ç»†åˆ™æŸ¥çœ‹


- é»˜è®¤è‡ªåŠ¨æ›´æ–°æ—¶é—´ä¸º48å°æ—¶ï¼Œéœ€æ‰“å¼€QXæ‰å¯è‡ªåŠ¨æ›´æ–°
  - å¯ä»¥æ›´æ”¹é…ç½®æ–‡ä»¶ä¸­çš„`update-interval`å‚æ•°ï¼Œå•ä½ä¸ºç§’(S)ï¼Œä¿®æ”¹ä¸º`-1`å³ä¸ºä¸æ›´æ–°

- å·¦æ»‘é‡å†™èµ„æºå¯ä»¥å•ç‹¬æ›´æ–°ï¼Œå¹¶æŸ¥çœ‹å…¶ç»†åˆ™

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/rerite_remote.JPG" width="900">




## 8. HTTP è¯·æ±‚

## 9. HTTP æŠ“å–

## 10. å…¶ä»–è®¾ç½®

ç‚¹å‡»å³ä¸‹è§’ã€Œé£è½¦ã€è¿›å…¥è®¾ç½® â†’ æœ€ä¸‹æ–¹ã€Œå…¶ä»–è®¾ç½®ã€

### 10.1 æ¨¡å¼

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI6-1.PNG" width="600">

#### 10.1.1 åˆ†æµæ¨¡å¼

- è“ç»¿è‰²é£è½¦ï¼šå…¨éƒ¨ä»£ç†ï¼Œå³æ‰€æœ‰è¯·æ±‚å‡ä½¿ç”¨PROXYé€‰æ‹©çš„èŠ‚ç‚¹è®¿é—®
- çº¯é»„è‰²é£è½¦ï¼šå…¨éƒ¨ç›´è¿ï¼Œå³æ‰€æœ‰è¯·å‡ä¸ä½¿ç”¨èŠ‚ç‚¹è®¿é—®
- ä¸‰è‰²é£è½¦ï¼šè§„åˆ™æ¨¡å¼ï¼Œç”±åˆ†æµè§„åˆ™åŠæ‰€æœ‰ç­–ç•¥ï¼ˆå†…ç½®ä»¥åŠè‡ªå®šä¹‰ç­–ç•¥ï¼‰å…±åŒæ±ºå®šæ˜¯å¦é€šè¿‡èŠ‚ç‚¹ä»¥åŠé€šè¿‡ä»€ä¹ˆèŠ‚ç‚¹è®¿é—®ã€‚

#### 10.1.2 å‡ºç«™æ¥å£

- é»˜è®¤ï¼šå½“å¤„äº Wi-Fi ç½‘ç»œæ—¶ä½¿ç”¨ Wi-Fiæ•°æ®ï¼Œå½“å¤„äºä»…èœ‚çªç½‘æ—¶ä½¿ç”¨èœ‚çªç½‘æ•°æ®ã€‚
- å¼ºåˆ¶èœ‚çªç½‘ï¼šå½“å¤„äº Wi-Fi ç½‘ç»œæ—¶ä»ä½¿ç”¨èœ‚çªç½‘æ•°æ®ã€‚
- Wi-Fi & èœ‚çªç½‘ï¼šå½“å¤„äº Wi-Fi ç½‘ç»œæ—¶åŒæ—¶ä½¿ç”¨ Wi-Fiç½‘ç»œåŠèœ‚çªç½‘ç»œå»ºç«‹ TCP è¿æ¥ï¼Œä½¿ç”¨æ‹¥æœ‰æœ€ä½³TCP æ¡æ‰‹å€¼çš„è¿æ¥æ¥ä¼ è¾“æ•°æ®ã€‚
- Wi-Fi &èœ‚çªç½‘ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ï¼šå½“å¤„äº Wi-Fi ç½‘ç»œæ—¶ï¼Œå‡è¡¡ä½¿ç”¨ Wi-Fiç½‘ç»œä¸èœ‚çªç½‘ç»œï¼Œä»¥æå‡å¹¶å‘ä»»åŠ¡çš„å‡ºå£å¸¦å®½ã€‚



### 10.2 èµ„æº

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI6-2.PNG" width="600">

#### 10.2.1 iCloud äº‘ç›˜

> å»ºè®®å¼€å¯

å½“å¯ç”¨ iCloud äº‘ç›˜åï¼Œé…ç½®ç›¸å…³çš„æœ¬åœ°èµ„æºé»˜è®¤è·¯å¾„ä¸ºâ€œ iCloud äº‘ç›˜ - Quantumult X â€ï¼›å¦åˆ™è·¯å¾„ä¸ºâ€œ æˆ‘çš„iPhone - Quantumult X â€

Quantumult X ä¼šåœ¨æ­¤æ–‡ä»¶å¤¹è¯»å–è‡ªå®šä¹‰ç­–ç•¥å›¾æ ‡ã€é…ç½®ç‰‡æ®µã€è„šæœ¬ç­‰èµ„æºã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨â€œæ–‡ä»¶â€åº”ç”¨æŸ¥çœ‹ç›¸å…³å†…å®¹ã€‚

#### 10.2.2 Apple TV

é€šè¿‡ iCloud äº‘ç›˜ï¼Œå¯å°†å­˜æ”¾äº iCloud ä¸­çš„é…ç½®ï¼ŒåŒæ­¥è‡³ Apple TV

#### 10.2.3 è‡ªåŠ¨æ›´æ–°

è¯¥è®¾å®šä»…ä½œç”¨äºæ²¡æœ‰ä¸“æœ‰æ›´æ–°å‘¨æœŸé€‰é¡¹çš„ç›¸å…³èµ„æºï¼Œä¾‹å¦‚èµ„æºè§£æå™¨ã€HTTP é‡å†™ä»¥åŠè®¡åˆ’ä»»åŠ¡ç­‰ä½¿ç”¨çš„ JavaScript è„šæœ¬èµ„æºã€‚

ä¾‹å¤–çš„æ˜¯å›¾ç‰‡èµ„æºï¼šå›¾ç‰‡èµ„æºä¸€æ—¦ç¼“å­˜æˆåŠŸåˆ™ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œå³ä½¿å¯ç”¨äº†è¯¥é€‰é¡¹ã€‚ä½†ä»å¯ç‚¹å‡»ã€Œåˆ é™¤å›¾ç‰‡ç¼“å­˜ã€æ¥é‡æ–°ä¸‹è½½å›¾ç‰‡èµ„æºã€‚



### 10.3 é€šçŸ¥

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI6-3.PNG" width="600">

- æ˜¾ç¤ºç­–ç•¥æ£€æµ‹é€šçŸ¥ï¼šç­–ç•¥çŠ¶æ€å˜æ›´ç­‰
- æ˜¾ç¤ºç½‘ç»œçŠ¶æ€é€šçŸ¥ï¼šè¿›å…¥Wi-Fiã€èœ‚çªç½‘ç»œç­‰
- æ˜¾ç¤ºè„šæœ¬é€šçŸ¥ï¼šHTTP è¯·æ±‚å‘é€çš„é€šçŸ¥ç­‰
- æ˜¾ç¤ºèŠ‚ç‚¹è®¢é˜…é€šçŸ¥ï¼šæµé‡ä¿¡æ¯ã€èŠ‚ç‚¹å¢åŠ ç­‰

âš ï¸ æ³¨æ„ï¼šè­¦å‘Šä¿¡æ¯æ— æ³•è¢«å…³é—­



### 10.4 VPN

> è¯¥æ ç›®ä»…ä½œç”¨äº Quantumult X Tunnel

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI7-1.PNG" width="300">

#### 10.4.1 å…¼å®¹æ€§å¢å¼º

> éœ€åœ¨ VPN å¤„äºæ–­å¼€çš„çŠ¶æ€ä¸‹æ›´æ”¹æ­¤é¡¹ã€‚

å½“å‰è®¾å¤‡ä¸å®¶å±…ä¸­æ¢è®¾å¤‡å¤„äºåŒä¸€å±€åŸŸç½‘ä¸‹ä¸”ä¿æŒ Quantumult X VPN è¿æ¥æ—¶ï¼Œå¦‚æ— æ³•æ­£å¸¸ä½¿ç”¨â€œå®¶åº­â€åº”ç”¨æŸ¥çœ‹æµä¼ è¾“çš„ HomeKit å®å†µè§†é¢‘ï¼Œæ‚¨å¯ä»¥å°è¯•å¼€å¯æ­¤é€‰é¡¹ã€‚

ä½†æ— æ³•ä½¿ç”¨ IPv6 ç›¸å…³åŠŸèƒ½æ—¶ä¹Ÿå¯å°è¯•å¼€å¯æˆ–å…³é—­è¯¥é€‰é¡¹

#### 10.4.2 ç½‘ç»œæ´»åŠ¨

> éœ€åœ¨ VPN å¤„äºæ–­å¼€çš„çŠ¶æ€ä¸‹æ›´æ”¹æ­¤é¡¹ã€‚

å…³é—­åï¼ŒQuantumultXä¸å†è®°å½• TCPä¸ UDPç›¸å…³çš„ç½‘ç»œæ´»åŠ¨ï¼Œç½‘ç»œæ´»åŠ¨é¢æ¿ä¹Ÿä¸ä¼šæ˜¾ç¤ºæ›´æ–°çš„ç½‘ç»œæ´»åŠ¨ã€‚

#### 10.4.3 æ’é™¤è·¯ç”± `0.0.0.0/31`

> éœ€åœ¨ VPN å¤„äºæ–­å¼€çš„çŠ¶æ€ä¸‹æ›´æ”¹æ­¤é¡¹ã€‚

å¼€å¯åå°†ä¼šå› æ­¤é€šçŸ¥æ ä¸­çš„`VPN`å›¾æ ‡ï¼Œæ­¤é¡¹ä¸IPv6å†²çª

å¼€å¯è¯¥é€‰é¡¹å¯èƒ½ä¼šäº§ç”Ÿç½‘ç»œå¼‚å¸¸ï¼›å¦‚å‡ºç°å¼‚å¸¸ï¼Œå»ºè®®å…³é—­è¯¥é€‰é¡¹åé‡å¯è®¾å¤‡ï¼Œå‹¿å†å¼€å¯ã€‚

æ›´å¤šçš„è·¯ç”±è®¾ç½®è¯·åœ¨é…ç½®æ–‡ä»¶ä¸­ç¼–è¾‘

#### 10.4.4 åˆ†æµä¼˜åŒ–

> éœ€åœ¨ VPN å¤„äºæ–­å¼€çš„çŠ¶æ€ä¸‹æ›´æ”¹æ­¤é¡¹ã€‚

å½“å…³é—­ä¼˜åŒ–æ—¶ï¼Œ`host` ç›¸å…³ç±»å‹çš„è§„åˆ™å®Œå…¨æŒ‰ç…§è§„åˆ™åŠ è½½é¡ºåºè¿›è¡ŒåŒ¹é…ï¼›

å½“å¼€å¯ä¼˜åŒ–æ—¶ï¼Œ`host` ç›¸å…³ç±»å‹çš„è§„åˆ™æ›´è¶‹å‘äºç²¾åº¦åŒ¹é…ï¼ŒåŒæ ·ç²¾åº¦çš„è§„åˆ™æŒ‰ç…§è§„åˆ™åŠ è½½é¡ºåºè¿›è¡ŒåŒ¹é…ï¼›å¤§è‡´çš„ä¼˜å…ˆçº§å…ˆåé¡ºåºä¸ºï¼š
`HOST > HOST-SUFFIX > HOST-WILDCARD > HOST-KEYWORD > USER-AGENT > IPç±»å‹è§„åˆ™ (IP-CIDR ç­‰)`

#### 10.4.5 DNS åŠ«æŒ

å½“ Quantumult X Tunnel è¿è¡Œæ—¶ï¼Œç»å¤§å¤šæ•°çš„ DNS è¯·æ±‚éƒ½å‘å¾€ Quantumult X çš„ `DNSæ¨¡å—`ç”± Quantumult X å¤„ç†ã€‚æå°‘æ•°è‡ªèº«å®ç°äº† DNS æŸ¥è¯¢åŠŸèƒ½çš„åº”ç”¨ä¼šå°† UDP æŸ¥è¯¢è¯·æ±‚å‘å¾€å…¶å®ƒåœ°å€ã€‚

åŠ«æŒåŠŸèƒ½é’ˆå¯¹ä»¥ä¸Šæå°‘æ•°åº”ç”¨ã€‚å½“ ã€ŒDNS åŠ«æŒã€åŠŸèƒ½å¼€å¯åï¼ŒQuantumult X ä¼šåŠ«æŒè¯¥ UDP è¯·æ±‚ï¼Œäº¤ç”± Quantumult X `DNS æ¨¡å—`å¤„ç†ï¼Œå¦åˆ™å°†æŒ‰åˆ†æµè§„åˆ™æˆ–è¿è¡Œæ¨¡å¼ç›´æ¥è½¬å‘è¯¥ UDP æ•°æ®ã€‚

#### 10.4.6 å§‹ç»ˆå¼€å¯

ã€Œå§‹ç»ˆå¼€å¯ã€å¯ç”¨æ—¶ï¼Œä»…èƒ½é€šè¿‡åº”ç”¨å†…å¼€å…³æ¥æ–­å¼€è¿æ¥

å½“é…ç½®ä¸­æœ‰å®šæ—¶ä»»åŠ¡å­˜åœ¨æ—¶ï¼Œã€Œå§‹ç»ˆå¼€å¯ã€å°†é»˜è®¤å¯ç”¨

#### 10.4.7 MPM æ¸©å’Œç­–ç•¥æœºåˆ¶

å½“ä½¿ç”¨ `MPM`ï¼ˆmoderated policymechanism æ¸©å’Œçš„ç­–ç•¥æœºåˆ¶ï¼‰æ—¶ï¼Œåˆ‡æ¢ç­–ç•¥ä¸ä¼šæ‰“æ–­ä¹‹å‰ä¸ä¹‹ç›¸å…³çš„ TCP è¿æ¥ï¼Œä»…ä¼šå¯¹ä¹‹åçš„ç½‘ç»œè¯·æ±‚ä½¿ç”¨æ–°çš„ç­–ç•¥è¿›è¡Œè¿æ¥ã€‚

å½“ä¸ä½¿ç”¨ `MPM` æ—¶ï¼Œåˆ‡æ¢ç­–ç•¥ä¼šæ‰“æ–­ä¸è¯¥ç­–ç•¥ç›¸å…³çš„æ—§æœ‰ TCP è¿æ¥ï¼›ä¾‹å¦‚ï¼šæ‰“æ–­ä¼šä½¿æ—§æœ‰ç­–ç•¥ç›¸å…³çš„è¿æ¥æ‰€è¿›è¡Œçš„ä¸‹è½½ä»»åŠ¡ä¸­æ–­ã€‚

#### 10.4.8 `HTTP`ã€`SOCKS5` ä»£ç†æœåŠ¡å™¨:ã€Œç½‘ç»œå…±äº«ã€

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI7-2.PNG" width="600">


å½“å¯ç”¨ `HTTP` or `SOCKS5` ä»£ç†æœåŠ¡å™¨æ—¶ï¼Œå¯ä¸ºåŒä¸€ç½‘ç»œä¸‹å…¶å®ƒè®¾å¤‡æä¾› `HTTP` or `SOCKS5` ä»£ç†æœåŠ¡

ç‚¹å‡»å¯æŸ¥çœ‹è¯¥æœåŠ¡å™¨IPåœ°å€åŠç«¯å£ï¼Œä¹Ÿå¯ä¿®æ”¹ç«¯å£

å…¶ä»–éœ€è¦è¢«ä»£ç†çš„è®¾å¤‡ä¸­ï¼Œåº”å¤„äºåŒä¸€å±€åŸŸç½‘ä¸‹ï¼Œåœ¨å…¶ Wi-Fi è®¾ç½®ä¸­å¡«å†™ Quantumult X æä¾›çš„IPå’Œç«¯å£

- WI-FIä¸­é€šå¸¸ä½¿ç”¨ `HTTP` ä»£ç†

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI7-3.PNG" width="900">


- Telegramä¸­ä¸º`SOCKS5`ä»£ç†

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI7-4.PNG" width="600">



### 10.5 GeoLite2 & å…³äº

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI8.PNG" width="300">

#### 10.5.1 GeoLite2 

è¯¥æ•°æ®åº“ä¸º`GEOIP`è§„åˆ™æ‰€è°ƒç”¨çš„æ•°æ®,ç‚¹å‡»ã€Œæ¥æºã€å¯è¿›è¡Œæ›¿æ¢

> å»ºè®®æ›¿æ¢ä¸ºä»¥ä¸‹æ•°æ®åº“ï¼Œå¹¶è®¾ç½®è‡ªåŠ¨æ›´æ–°

â“˜  [Masaiki](https://github.com/Masaiki/GeoIP2-CN)(ä¸­å›½IPv4&v6)ï¼š

```
https://github.com/Masaiki/GeoIP2-CN/raw/release/Country.mmdb
```

#### 10.5.2 å…³äº

å¯åœ¨æ­¤é¡µé¢æŸ¥çœ‹ è®¾å¤‡IDã€æ”¶æ®ã€iCloudä¿¡æ¯ ç­‰ï¼Œé•¿æŒ‰é€‰é¡¹å¯æ‹·è´ç›¸å…³ä¿¡æ¯ï¼Œä»¥ç”¨äº macOS ä¸Šçš„éªŒè¯

å¯ä¿®æ”¹åº”ç”¨å›¾æ ‡

## 11. é…ç½®æ–‡ä»¶`[general]`

é…ç½®æ–‡ä»¶ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼Œç‚¹å‡»å·¦ä¸‹è§’ã€Œç¼–è¾‘ã€æŒ‰é’®å³å¯ç¼–è¾‘ï¼›

è¿›å…¥ç¼–è¾‘åï¼Œç‚¹å‡»å³ä¸Šè§’ç®­å¤´å¯å¿«æ·è·³è½¬ï¼š

|é¡¹ç›®|å¤‡æ³¨|
|:-|:- |
|`[general]` |å¯ä»¥ç†è§£ä¸ºé€šç”¨è®¾ç½®|
|`[dns]`|[DNSç›¸å…³è®¾ç½®](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#dns-%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE)|
|`[poilcy]`|[ç­–ç•¥(ç­–ç•¥ç»„)](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E7%AD%96%E7%95%A5%E7%AD%96%E7%95%A5%E7%BB%84)|
|`[server_local]`|[æœ¬åœ°èŠ‚ç‚¹](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E6%B7%BB%E5%8A%A0%E8%BF%9C%E7%A8%8B%E8%8A%82%E7%82%B9%E8%AE%A2%E9%98%85)|
|`[server_remote]`|[è¿œç¨‹èŠ‚ç‚¹è®¢é˜…](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E6%B7%BB%E5%8A%A0%E8%BF%9C%E7%A8%8B%E8%8A%82%E7%82%B9%E8%AE%A2%E9%98%85)|
|`[filter_local]`|[æœ¬åœ°åˆ†æµè§„åˆ™](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E6%B7%BB%E5%8A%A0-%E6%9C%AC%E5%9C%B0%E8%A7%84%E5%88%99)|
|`[filter_remote]`|[è¿œç¨‹åˆ†æµè§„åˆ™è®¢é˜…](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#%E6%B7%BB%E5%8A%A0-%E8%BF%9C%E7%A8%8B%E5%BC%95%E7%94%A8%E8%A7%84%E5%88%99)|
|`[rewrite_local]`|[æœ¬åœ°é‡å†™è§„åˆ™](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#71-%E6%B7%BB%E5%8A%A0%E6%9C%AC%E5%9C%B0%E9%87%8D%E5%86%99)|
|`[rewrite_local]`|[è¿œç¨‹é‡å†™è®¢é˜…](https://github.com/Repcz/Tool/blob/X/QuantumultX/README.MD#72-%E6%B7%BB%E5%8A%A0%E8%BF%9C%E7%A8%8B%E9%87%8D%E5%86%99)|
|`[task_local]`|HTTPè¯·æ±‚(æœ¬åœ°è„šæœ¬ä»»åŠ¡)|
|`[http_backend]`|æœ¬åœ°HTTPæœåŠ¡å™¨|


ä»¥ä¸‹ä¸»è¦è®²çš„æ˜¯ `[general]` åŒºå—ä¸‹çš„å†…å®¹ï¼Œæ‰€ä»¥ç¤ºä¾‹éƒ½ä»¥ `[general]` å¼€å¤´è¡¨æ˜åœ¨å…¶ä¹‹ä¸‹ï¼Œå¹¶ä¸æ˜¯è®©ä½ æ¯ä¸ªå‚æ•°å­—æ®µå‰éƒ½åŠ ä¸Š `[general]`ã€‚

### 11.1 é…ç½®æ–‡ä»¶å›¾æ ‡
```
[general]
profile_img_url = https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/Lá´œá´„Ê_Logo.jpg
```

æ˜¾ç¤ºåœ¨ã€Œå…³è”é…ç½®ã€çš„å›¾æ ‡ï¼Œå¦‚ï¼š

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/profile_logo.jpg" width="300">

å¦‚ä¸Šç¤ºä¾‹ä¸º æˆ‘çš„é…ç½® çš„å›¾æ ‡

### 11.2 èµ„æºè§£æå™¨

```
[general]
resource_parser_url = https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
```

èµ„æºè§£æå™¨çš„åœ°å€è®¾ç½®ï¼Œèµ„æºè§£æå™¨å¯ç”¨äºè‡ªå®šä¹‰å„ç±»èµ„æºçš„è½¬æ¢

### 11.3 ç½‘ç»œæ£€æŸ¥æµ‹è¯•
```
[general]
network_check_url = http://wifi.vivo.com.cn/generate_204
server_check_url = http://cp.cloudflare.com/generate_204
; server_check_user_agent = Agent/1.0
server_check_timeout = 5000
```

- `network_check_url` ç½‘ç»œæ£€æŸ¥ URL è®¾ç½®ï¼›
- `server_check_url` ä»£ç†æœåŠ¡å™¨ç½‘ç»œæ£€æŸ¥ URL è®¾ç½®ï¼›
- `server_check_user_agent` ä»£ç†æœåŠ¡å™¨æ£€æŸ¥çš„ `User Agent `è‡ªå®šä¹‰è®¾ç½®ï¼›
- `server_check_timeout` æµ‹è¯•è¶…æ—¶è®¾ç½®ï¼Œå•ä½ä¸º `ms`ï¼›

### 11.4 æœåŠ¡å™¨ GEO ä¿¡æ¯æ˜¾ç¤º

èŠ‚ç‚¹é¡µ(é¦–é¡µ)å·¦ä¸Šè§’çš„èŠ‚ç‚¹æ˜¾ç¤ºåŒºåŸŸï¼Œå¯ä»¥ä¿®æ”¹é…ç½®æ–‡ä»¶(ç‚¹å·¦ä¸‹è§’çš„ç¼–è¾‘)ï¼Œä¿®æ”¹`geo_location_checker`å‚æ•°ï¼Œå¯ä»¥æ˜¾ç¤ºä¸åŒæ ·å¼çš„ä¿¡æ¯

ä¾‹å¦‚ï¼š

```
[general]
geo_location_checker=disabled
;geo_location_checker = http://ip-api.com/json/?lang=zh-CN, https://mirror.ghproxy.com/https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Quantumult/Script/geo_location_checker.js
```

`disabled`è¡¨ç¤ºå…³é—­ï¼›

`#`æˆ–`;`æˆ–`//`è¡¨ç¤ºæ³¨é‡Šï¼Œå³èµ·è¯´æ˜ä½œç”¨æˆ–è€…ä¸ç”Ÿæ•ˆï¼Œåˆ é™¤åˆ™è¡¨ç¤ºå¯ç”¨ï¼Œæ³¨æ„ä¸åŒæ—¶å¯ç”¨ä¸¤ä¸ª`geo_location_checker`

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/geochecker.jpg" width="300">

### 11.5 ã€Œè¿è¡Œæ¨¡å¼ã€ä¸ã€Œä¸´æ—¶ç¦ç”¨ã€

#### 11.5.1 `running_mode_trigger` ã€Œè¿è¡Œæ¨¡å¼ã€

[general]
```
; [èœ‚çªæ•°æ®], [Wi-Fi], [SSID]
running_mode_trigger = filter, filter, LINK_22E171:all_proxy, LINK_22E172:all_direct
```

å¯é€‰å‚æ•°ï¼š
- `all_direct` å…¨éƒ¨ç›´è¿
- `all_proxy` å…¨éƒ¨ä»£ç†
- `filter` è§„åˆ™åˆ†æµ

ä¸Šè¿°ç¤ºä¾‹è¡¨ç¤ºï¼šåœ¨èœ‚çªæ•°æ®ä½¿ç”¨åˆ†æµ (ç¬¬ä¸€ä¸ª `filter`)ï¼Œåœ¨ Wi-Fi ä½¿ç”¨åˆ†æµ (ç¬¬äºŒä¸ª `filter`)ï¼Œåœ¨ SSID ä¸º `LINK_22E171` æ—¶ä½¿ç”¨å…¨éƒ¨ä»£ç†ï¼Œåœ¨ SSID ä¸º `LINK_22E172` æ—¶ä½¿ç”¨å…¨éƒ¨ç›´è¿ã€‚

âš ï¸ æ³¨æ„ï¼šæ­¤æ—¶ `Rewrite` ä¸ `Task` ä»ç„¶ç”Ÿæ•ˆã€‚

#### 11.5.2`ssid_suspended_list` ã€Œä¸´æ—¶ç¦ç”¨ã€
```
[general]
ssid_suspended_list = LINK_22E174, LINK_22E175
```

ä¸Šè¿°ç¤ºä¾‹è¡¨ç¤ºï¼šåœ¨ SSID ä¸º `LINK_22E174` ä¸ `LINK_22E175` æ—¶æš‚æ—¶ç¦ç”¨ Quantumult X

âš ï¸ æ³¨æ„ï¼šæ­¤æ—¶ä»… `Task` ç”Ÿæ•ˆã€‚

### 11.6 DNS æ’é™¤åˆ—è¡¨
```
[general]
dns_exclusion_list = *.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me
```

ä¸åœ¨è¯¥åˆ—è¡¨ä¸­çš„åŸŸåå°†ä¼šä½¿ç”¨ Fake IP (CIDR 198.18.0.0/15)ï¼Œå¹¶å…·æœ‰ `resolve-on-remote` å‚æ•°çš„æ•ˆæœï¼Œå¦‚æƒ³å¯¹æŒ‡å®šåŸŸåä½¿ç”¨çœŸå® IP åœ°å€å¯åœ¨æ­¤å¤„è®¾ç½®ã€‚

å¦å¤–ï¼Œ`dns_exclusion_list` ä¸­çš„åŸŸåçš„æŸ¥è¯¢å¯èƒ½ä¸ä¼šéµå¾ª [dns] ä¸­çš„è®¾ç½®ã€‚

è¯¥åŠŸèƒ½ç±»ä¼¼äº Surge çš„ã€ŒAlways Real IPã€

### 11.7 æ’é™¤è·¯ç”±
Quantumult X å°†ä¸ä¼šå¤„ç†åˆ° `excluded_routes` çš„æµé‡ã€‚

```
[general]
excluded_routes = 239.255.255.250/32
```

ä¿®æ”¹åæœ€å¥½é‡æ–°å¯åŠ¨è®¾å¤‡ã€‚

### 11.8 åŸŸåæ‹¦æˆªæ¨¡å¼
```
[general]
dns_reject_domain_behavior = loopback
```

å¯é€‰å‚æ•°æœ‰ï¼š

- `loopback`
- `no-error-no-answer`
- `nxdomain`

### 11.9 `UDP`ç›¸å…³è®¾ç½®

#### 11.9.1 `fallback_udp_policy`
å½“ UDP è¯·æ±‚ç»è¿‡è§„åˆ™æ¨¡å—ä»¥åŠç­–ç•¥æ¨¡å—åï¼Œæ‰€å‘½ä¸­çš„æœåŠ¡å™¨ä¸º Quantumult X æ‰€ä¸æ”¯æŒ UDP Relay çš„æœåŠ¡å™¨æˆ–æ”¯æŒ UDP Relay ä½†æœªæ³¨æ˜ `udp-relay=true` çš„ï¼Œåˆ™ `fallback_udp_policy` ä¼šè¢«ä½¿ç”¨ã€‚

```
[general]
fallback_udp_policy = reject
```
å¯é€‰å‚æ•°æœ‰ï¼š
- `reject`
- `direct`

å‚æ•° fallback_udp_policy çš„å€¼ä»…æ”¯æŒæœ«ç«¯ç­–ç•¥ï¼ˆæœ«ç«¯ç­–ç•¥ä¸ºç»ç”±è§„åˆ™æ¨¡å—å’Œç­–ç•¥æ¨¡å—åæ‰€å‘½ä¸­çš„ç­–ç•¥ï¼Œä¾‹å¦‚ï¼šdirectã€reject ä»¥åŠèŠ‚ç‚¹ï¼›ä¸æ”¯æŒå†…ç½®ç­–ç•¥ proxy ä»¥åŠå…¶å®ƒè‡ªå®šä¹‰ç­–ç•¥ï¼‰ã€‚

å½“ UDP è¯·æ±‚ç»è¿‡è§„åˆ™æ¨¡å—ä»¥åŠç­–ç•¥æ¨¡å—åæ‰€å‘½ä¸­çš„èŠ‚ç‚¹ä¸º Quantumult X æ‰€ä¸æ”¯æŒ UDP è½¬å‘çš„èŠ‚ç‚¹ï¼ˆä¾‹å¦‚ï¼šVMessï¼‰ï¼Œæˆ–å‘½ä¸­çš„èŠ‚ç‚¹è™½æ”¯æŒ UDP è½¬å‘ä½†èŠ‚ç‚¹é…ç½®æœªæ˜¾ç¤ºæ³¨æ˜ udp-relay=true çš„èŠ‚ç‚¹ï¼ˆä¾‹å¦‚ï¼šSS æˆ– SSR ä¸”ä¸æœåŠ¡å™¨æ˜¯å¦çœŸå®å¼€å¯äº† UDP è½¬å‘æ— å…³ï¼‰ï¼Œåˆ™ fallback_udp_policy ä¼šè¢«ä½¿ç”¨ã€‚è¯¥å‚æ•°é»˜è®¤å€¼ä¸º rejectã€‚

å¦‚ä¸€äº›æµ·å¤–æ¸¸æˆå’Œè¯­éŸ³ä½¿ç”¨ UDP åè®®ï¼Œè€Œæ‰€ä½¿ç”¨çš„æœåŠ¡å™¨ä¸æ”¯æŒ UDP Relay æ—¶ï¼Œè®¾ç½®ä¸º `reject` å°†æ— æ³•è¿æ¥ï¼Œå¦‚æœéœ€è¦è°ƒæ•´è¯¥å‚æ•°çš„å€¼ä¸º `direct`ï¼Œè¯·åŠ¡å¿…æ¸…æ¥šäº†è§£åŒä¸€ç›®æ ‡ä¸»æœºå TCP è¯·æ±‚ä¸ UDP è¯·æ±‚çš„æºåœ°å€ä¸åŒæ‰€é€ æˆçš„éšç§åŠå®‰å…¨é£é™©

#### 11.9.2 `udp_whitelist`
```
[general]
udp_whitelist = 53, 123, 1900, 80-443
```

ç”¨äºè®¾ç½® UDP ç«¯å£çš„ç™½åå•åˆ—è¡¨ï¼Œä¸åœ¨è¯¥åˆ—è¡¨çš„ UDP å°†ä¼šè¢«ä¸¢å¼ƒ

ä¸€æ®µèŒƒå›´ç”¨ `-` å­—ç¬¦è¿æ¥

#### 11.9.3 `udp_drop_list`
```
[general]
udp_drop_list = 1900, 80
```

`udp_drop_list` ä¸ä¼šå›å‘ ICMP (port unreachable) æ¶ˆæ¯

#### 11.9.4 `icmp_auto_reply`
```
[general]
icmp_auto_reply = true
```

ICMP è‡ªåŠ¨å›å¤

### 11.10 è‡ªå®šä¹‰ DoH çš„ `User Agent`
```
[general]
doh_user_agent = Agent/1.0
```

è‡ªå®šä¹‰ DNS over HTTPS çš„ `User Agent`

## 12. é…ç½®æ–‡ä»¶ç›¸å…³

### 12.1 é…ç½®æ–‡ä»¶å¯¼å…¥

  - ä¸‹è½½é…ç½®:ä¸‹è½½è¿œç¨‹æ–‡ä»¶
  >ã€€æ³¨æ„ï¼šæ­¤æ“ä½œä¼šè¦†ç›–åŸæœ‰é…ç½®ï¼Œæ³¨æ„åšå¥½å¤‡ä»½
  <img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI11-1.PNG" width="600">
  
  - å¯¼å…¥é…ç½®:ä»æœ¬åœ°æ–‡ä»¶å¯¼å…¥

### 12.2 é…ç½®ç‰‡æ®µ

é…ç½®ç‰‡æ®µå¯å°†æœ¬åœ°ç‰‡æ®µå†™å…¥æœ¬åœ°æ–‡ä»¶ï¼Œå†ä½œä¸ºè¿œç¨‹æ–‡ä»¶è¿›è¡Œå¼•ç”¨

- [èŠ‚ç‚¹é…ç½®ç‰‡æ®µ](https://github.com/Repcz/Tool/tree/X/QuantumultX#222-%E9%85%8D%E7%BD%AE%E7%89%87%E6%AE%B5%E6%B7%BB%E5%8A%A0)
- [åˆ†æµé…ç½®ç‰‡æ®µ](https://github.com/Repcz/Tool/tree/X/QuantumultX#325-%E9%85%8D%E7%BD%AE%E7%89%87%E6%AE%B5%E6%96%B9%E5%BC%8F%E6%B7%BB%E5%8A%A0)
- [é‡å†™é…ç½®ç‰‡æ®µ](https://github.com/Repcz/Tool/tree/X/QuantumultX#713-%E9%85%8D%E7%BD%AE%E7%89%87%E6%AE%B5%E6%B7%BB%E5%8A%A0)

### 12.3 è®¾ç½®å…³è”é…ç½®

ä»ä»¥ä¸‹è·¯å¾„åŠ è½½é…ç½®ï¼Œé iCloud äº‘ç›˜ã€éæœ¬åœ°é…ç½® æ¯24å°æ—¶æ£€æŸ¥æ›´æ–°ã€‚

å…³è”æ–°é…ç½®å‰ï¼Œå»ºè®®åœ¨ iCloud äº‘ç›˜æˆ– æœ¬åœ° åˆ›å»ºä¸€ä»½å½“å‰é…ç½®çš„å‰¯æœ¬ã€‚

å¦‚æ‰€å…³è”çš„é…ç½®ä¸º iCloud äº‘ç›˜ä¸­çš„é…ç½®ï¼Œé‚£ä¹ˆç”¨æˆ·å¯¹è¯¥é…ç½®æ‰€åšçš„ä¿®æ”¹ä¼šé€šè¿‡ iCloud åŒæ­¥åˆ°å…¶ä»–ï¼ˆå¦‚æœ‰ï¼‰æˆ–å½“å‰è®¾å¤‡ã€‚ï¼ˆå³å¤šä¸ªè®¾å¤‡å…³è”åŒä¸€ä»½é…ç½®ï¼Œå³å¯é€šè¿‡ iCloud åŒæ­¥åšåˆ°å¤šç«¯åŒæ­¥ï¼‰

å¦‚æ‰€å…³è”çš„é…ç½®æ—¢ä¸å±äº iCloud äº‘ç›˜ ä¹Ÿä¸æ˜¯ æœ¬åœ°é…ç½®ï¼Œé‚£ä¹ˆç”¨æˆ·æ— æ³•åœ¨ Quantumult X ä¸­å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI11-2.PNG" width="1500">

å½“å­˜åœ¨å­˜åœ¨å¤šä»½å…³è”é…ç½®åï¼Œå¯ä»¥å…ˆå–æ¶ˆå½“å‰å…³è”é…ç½®ï¼Œå†å…³è”å…¶ä»–é…ç½®ï¼Œå³å¯è¾¾åˆ° åˆ‡æ¢å¤šé…ç½® çš„æ“ä½œ

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI11-3.PNG" width="900">





## 13. èµ„æºè§£æå™¨ä½¿ç”¨æ–¹æ³•

> ä»¥ä¸‹å†…å®¹å‚è€ƒ [è§£æå™¨ä½œè€…çš„ä½¿ç”¨æ•™ç¨‹](https://www.notion.so/Quantumult-X-6bd13c1adc174debb80ebd3f5dfdd744)ï¼Œæ›´è¯¦ç»†çš„ç¤ºä¾‹è¯·ç§»æ­¥è¯¥æ•™ç¨‹ã€‚

### 13.1 ä¸»è¦åŠŸèƒ½

- å°†å…¶å®ƒæ ¼å¼çš„ã€ŒæœåŠ¡å™¨è®¢é˜…ã€è§£ææˆ ğğ®ğšğ§ğ­ğ®ğ¦ğ®ğ¥ğ­ ğ— æ ¼å¼
  - æ”¯æŒ ğ•2ğ«ğšğ²ğ/ğ—¦ğ—¦(ğ—¥/ğ——)/ğ—›ğ—§ğ—§ğ—£(ğ—¦)/ğ—§ğ—¿ğ—¼ğ—·ğ—®ğ—»/ğ—¤ğ˜‚ğ—®ğ—»ğ˜ğ˜‚ğ—ºğ˜‚ğ—¹ğ˜(ğ—«)/ğ—¦ğ˜‚ğ—¿ğ—´ğ—²/ğ‚ğ¥ğšğ¬ğ¡/ğ’ğ¡ğšğğ¨ğ°ğ«ğ¨ğœğ¤ğğ­/ğ‹ğ¨ğ¨ğ§ æ ¼å¼
  - æä¾›çš„å¯é€‰ä¸ªæ€§åŒ–å‚æ•°(ç­›é€‰ã€é‡å‘½åç­‰)
- ğ—¿ğ—²ğ˜„ğ—¿ğ—¶ğ˜ğ—²(é‡å†™) & ğ—³ğ—¶ğ—¹ğ˜ğ—²ğ—¿(åˆ†æµ) çš„ è½¬æ¢ & ç­›é€‰ 
  - ç”¨äºç¦ç”¨/ä¿®æ”¹è¿œç¨‹å¼•ç”¨ä¸­æŸ(å‡ )é¡¹ ğ—¿ğ—²ğ˜„ğ—¿ğ—¶ğ˜ğ—²/ğ—µğ—¼ğ˜€ğ˜ğ—»ğ—®ğ—ºğ—²/ğ—³ğ—¶ğ—¹ğ˜ğ—²ğ—¿
  - ğ’ğ®ğ«ğ ğ/ğ‚ğ¥ğšğ¬ğ¡ ç±»å‹è§„åˆ™ ğ—¹ğ—¶ğ˜€ğ˜ ä¸ æ¨¡å— module çš„è§£æä½¿ç”¨


### 13.2 æ·»åŠ è§£æå™¨

å¦‚æœå¼€å¯èµ„æºè§£æå™¨æ—¶ï¼Œæç¤ºæ— è‡ªå®šä¹‰èµ„æºè§£æå™¨ï¼Œåˆ™éœ€è¦åœ¨é…ç½®æ–‡ä»¶`[general]`ä¸‹æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
```

### 13.3 ä½¿ç”¨æ–¹æ³•

1.åœ¨æ·»åŠ çš„èµ„æºé“¾æ¥åå¢åŠ é…ç½®å‚æ•°

åœ¨ âŸ¦å¼•ç”¨é“¾æ¥âŸ§ ååŠ  `#` å¹¶æ·»åŠ å‚æ•°ï¼ˆå¦‚æœ‰ï¼‰, ä¸åŒå‚æ•°ç”¨ `&` è¿æ¥

eg:

`http://your-service-provider#emoji=1&tfo=1&in=é¦™æ¸¯+å°æ¹¾ `

- æœ¬åœ°èµ„æºç‰‡æ®µå¼•ç”¨, è¯·å°†å‚æ•°å¦‚ `#in=xxx&out=yyy` å¡«å…¥èµ„æºç‰‡æ®µçš„ç¬¬ 1 è¡Œ
- æ”¯æŒä¸­æ–‡, "æ“ä½œ" ä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦æ—¶è¯·å…ˆæ›¿æ¢[URL-Encode](https://www.jyshare.com/front-end/695/)
  - `+` â†’ `%2B`
  - ç©ºæ ¼ â†’ `%20`
  - `@` â†’ `%40`
  - `&` â†’ `%26`
  - `.` â†’ `\.`
  - `,` â†’ `%2C`

2.å¼€å¯è§£æå™¨

<img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI10-1.PNG" width="300">

### 13.4 å‚æ•°è¯´æ˜

#### 13.4.1 èŠ‚ç‚¹å‚æ•°

1.`emoji=1`(å›½è¡Œè®¾å¤‡ç”¨`2`)/`-1`, æ·»åŠ /åˆ é™¤èŠ‚ç‚¹åå†…åœ°åŒºæ——å¸œ;

2.`udp=1`/`-1`, `tfo=1`/`-1`, åˆ†åˆ«å¼ºåˆ¶å¼€å¯(å…³é—­) `ğ®ğğ©-ğ«ğğ¥ğšğ²`/`ğŸğšğ¬ğ­-ğ¨ğ©ğğ§`;

3.`uot=1`, å¼€å¯ `udp-over-tcp=true`é€‰é¡¹ï¼ˆä»…é™SS(R)ï¼‰

4.`cert=1`/`-1`, åˆ†åˆ«å¼€å¯/å…³é—­ tls è¯ä¹¦éªŒè¯(é»˜è®¤å…³é—­);

  - `csha/psha`,  `tls-cert-sha256` ä»¥åŠ `tls-pubkey-sha256` å‚æ•°

5.`in`, `out`, `regex`, `regout` åˆ†åˆ«ä¸º `ä¿ç•™`ã€`åˆ é™¤`ã€`æ­£åˆ™ä¿ç•™`ã€`æ­£åˆ™åˆ é™¤` èŠ‚ç‚¹;

  - `in`, `out` ä¸­å¤šå‚æ•°(é€»è¾‘`æˆ–`)ç”¨ `+`, é€»è¾‘`ä¸`ç”¨ `.` è¡¨ç¤º;
  - `in`/`out` ä»…å¯¹ã€ŒèŠ‚ç‚¹åã€åŒ¹é…ç”Ÿæ•ˆ
  - `regex`/`regout` å¯¹èŠ‚ç‚¹çš„ã€Œå®Œæ•´ä¿¡æ¯ã€è¿›è¡ŒåŒ¹é…(ç±»å‹ã€ç«¯å£ã€åŠ å¯†ç­‰);
  - eg: `http://your-service-provider#in=ğŸ‡ºğŸ‡¸&out=02&regout=\[home\]`ï¼šä¿ç•™ç¾å›½èŠ‚ç‚¹å¹¶æ’é™¤02å·èŠ‚ç‚¹ï¼Œå¹¶ä½¿ç”¨æ­£åˆ™æ’é™¤å¸¦æœ‰`[home]`å­—æ®µçš„èŠ‚ç‚¹ï¼š
  <img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI10-2.PNG" width="600">


6.`rename` é‡å‘½å, `æ—§å@æ–°å`, `å‰ç¼€@`, `@åç¼€`, ç”¨ `+` è¿æ¥å¤šä¸ªå‚æ•°;
  - åˆ é™¤å­—æ®µ: `å­—æ®µ1.å­—æ®µ2â˜ ï¸`, æƒ³åˆ é™¤ `.` æ—¶ç”¨ `\.` æ›¿ä»£
  - eg: `http://your-service-provider#in=ğŸ‡­ğŸ‡°+ğŸ‡¸ğŸ‡¬&rename=Hong%20Kong@é¦™æ¸¯+0\.2â˜ ï¸`ï¼šä¿ç•™é¦™æ¸¯ã€æ–°åŠ å¡èŠ‚ç‚¹ï¼Œå¹¶æ›¿æ¢ `Hong Kong` ä¸º`é¦™æ¸¯`ï¼Œå¹¶åˆ é™¤`0.2`çš„å­—æ®µ
  - é»˜è®¤ emoji å…ˆç”Ÿæ•ˆ, å¦‚æƒ³è°ƒæ¢é¡ºåº, è¯·ç”¨ rrname å‚æ•°

  <img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI10-3.PNG" width="600">

7.`replace` æ­£åˆ™æ›¿æ¢èŠ‚ç‚¹ä¸­å­—æ®µ, å¯ç”¨äºé‡å‘½å/æ›´æ”¹åŠ å¯†æ–¹å¼ç­‰
  - `replace=regex1@ğ˜€ğ˜ğ—¿1+regex2@ğ˜€ğ˜ğ—¿2`

8.`å ä½ç¬¦`ï¼Œå¯ç”¨äº `rename`/`replace` ç­‰æ“ä½œ
  - `$type0/1/2/3/4/5/6/7` å ä½ç¬¦ï¼Œå°†èŠ‚ç‚¹ç±»å‹(ss/ssr/vmess ç­‰)ä½œä¸ºå¯æ“ä½œå‚æ•°ï¼Œå¦‚
    - `rename=@|$type2`
    - æ ·å¼åˆ†åˆ«ä¸º `ğ¬ğ¬`,`ğ’ğ’`,`ğŸ…¢ğŸ…¢`,`ğŸ†‚ğŸ†‚`,`â“¢â“¢`,`ğŸ…‚ğŸ…‚`,`ğ•Šğ•Š`,`Ë¢Ë¢`
  - `$index0/1/2/3/4/5/6/7/8` å ä½ç¬¦ï¼Œå°†èŠ‚ç‚¹çš„åºå·ä½œä¸ºå¯æ“ä½œå‚æ•°ï¼Œå¦‚
    - `rename=@ã€Œ$index1ã€`
    - æ ·å¼åˆ†åˆ«ä¸º `1\â‘ \â¶\â“µ\ğŸ™\Â¹\â‚\ğŸ\ğŸ·`
  - `$emoji1/2` å ä½ç¬¦, å°†emoji(ğŸ‡­ğŸ‡° ç­‰)ä½œä¸ºå¯æ“ä½œå‚æ•°
    - `rename=@ã€Œ$emoji1ã€`
  - `$tag` å ä½ç¬¦ï¼Œå°†è®¢é˜…çš„ `tag` ä½œä¸ºå¯æ“ä½œå‚æ•°ï¼Œå¦‚
    - å¯æ¥æ•°å­—ä»¥å•ç‹¬ç»™ `tag` æ·»åŠ å­—æ¯/æ•°å­—æ ·å¼
    - `rename=@ã€Œ$tag34ã€`, æ ·å¼åŒä¸‹è¾¹çš„ `ptn/npt`

9.`ptn=1-8`, å°†èŠ‚ç‚¹åè‹±æ–‡æ›¿æ¢æˆæ ·å¼ â‡’ `ğŸ…°/ğŸ„°/ğ€/ğ—®/ğ”¸/ğ•’/áµƒ/á´¬`

10.`npt=1-8`, å°†èŠ‚ç‚¹åæ•°å­—æ›¿æ¢æˆæ ·å¼ â‡’ `â‘ \â¶\â“µ\ğŸ™\Â¹\â‚\ğŸ\ğŸ·`

11.`delreg`, åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åˆ é™¤ `èŠ‚ç‚¹å` ä¸­çš„å­—æ®µ(âš ï¸ æ…ç”¨)

12.`aead=-1`, å…³é—­ Vmess çš„ AEAD å‚æ•°

13.`host=xxx` , ä¿®æ”¹ `host` å‚æ•°ï¼ˆå¦‚æœ‰ï¼‰

14.`checkurl=xxx` , æŒ‡å®š`server_check_ur`l å‚æ•°

15.`sort=1`/`-1`/`x`/å‚æ•°è§„åˆ™, æŒ‰èŠ‚ç‚¹å `æ­£`/`é€†`/`éšæœº`/å‚æ•°è§„åˆ™ æ’åº
  - å‚æ•°è§„åˆ™æ˜¯æ­£åˆ™è¡¨è¾¾å¼æˆ–ç®€å•å…³é”®è¯, ç”¨`<` æˆ– `>` è¿æ¥
  - `sort=ğŸ‡­ğŸ‡°>ğŸ‡¸ğŸ‡¬>ğŸ‡¯ğŸ‡µ>ğŸ‡ºğŸ‡¸` , é å‰æ’åº
  - `sort=IEPL<IPLC<BGP` , é åæ’åº

16.`info=1`, å¼€å¯é€šçŸ¥æç¤ºæœºåœº âœˆï¸ æµé‡ä¿¡æ¯(å¦‚æœ‰æä¾›);

17.`del=1`, æœ‰é‡åèŠ‚ç‚¹æ—¶ç”¨æ­¤å‚æ•°åˆ é™¤é‡å¤èŠ‚ç‚¹(é»˜è®¤æ”¹åä¿ç•™)

18.`flow=2022-06-02:1000:54`, è®¢é˜…åˆ°æœŸæ—¶é—´:æ€»æµé‡:å·²ç”¨æµé‡

19. ã€Œè¿›é˜¶å‚æ•°ã€`ğ˜€ğ—³ğ—¶ğ—¹ğ˜ğ—²ğ—¿`/`ğ˜€ğ—¿ğ—²ğ—»ğ—®ğ—ºğ—²`, ä¼ å…¥ä¸€æ®µ base64 ç¼–ç çš„è„šæœ¬, å¯ç”¨äºæ›´ä¸ºå¤æ‚çš„[è¿‡æ»¤/é‡å‘½å] éœ€æ±‚
  - è¯´æ˜: https://github.com/KOP-XIAO/QuantumultX/pull/9


#### 13.4.2ã€Œrewrite é‡å†™ã€/ã€Œfilter åˆ†æµã€å‚æ•°
1.`in`/`out`, æ ¹æ®å…³é”®è¯ `ä¿ç•™`/`ç¦ç”¨` ç›¸å…³åˆ†æµã€é‡å†™è§„åˆ™;
  - eg:`http://your-filter-provider#out=youku`ï¼šæ’é™¤æ‰€æœ‰å¸¦æœ‰`youku`å­—æ®µçš„åˆ†æµ
  <img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI10-5.PNG" width="600">

2.`inhn`/`outhn`, `ä¿ç•™`/`åˆ é™¤` ä¸»æœºå(`hostname`);
  - eg: `http://your-rewrite-provider#out=baidu-index.js+baidu-zhidao.js&outhn=baidu`ï¼šç¦ç”¨ç½‘é¡µå»å¹¿å‘Šä¸­å¸¦æœ‰ "baidu-index.js" åŠ "baidu-zhidao.js" çš„ é‡å†™ åŠå¸¦æœ‰`baidu`çš„ä¸»æœºå
  <img src="https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Photo/UI10-4.PNG" width="600">

3.`regex`/`regout`, æ­£åˆ™ä¿ç•™/åˆ é™¤, è¯·è‡ªè¡ŒæŠ˜è…¾æ­£åˆ™è¡¨è¾¾å¼;
  - å¯ä¸ `in(hn)`/`out(hn)` ä¸€èµ·ä½¿ç”¨ï¼Œ`in(hn)`/`out(hn)` ä¼šä¼˜å…ˆæ‰§è¡Œ;
  - å¯¹ ğ’‰ğ’ğ’”ğ’•ğ’ğ’‚ğ’ğ’† & ğ«ğğ°ğ«ğ¢ğ­ğ/ğŸğ¢ğ¥ğ­ğğ« åŒæ—¶ç”Ÿæ•ˆ(âš ï¸ æ…ç”¨)
4.`policy` å‚æ•°, ç”¨äºç›´æ¥æŒ‡å®šç­–ç•¥ç»„ï¼Œæˆ–ä¸º ğ’ğ®ğ«ğ ğ ç±»å‹ rule-set ç”Ÿæˆç­–ç•¥ç»„(é»˜è®¤`ğ’ğ¡ğšğ°ğ§`ç­–ç•¥ç»„);
5.`pset=regex1@policy1+regex2@policy2`, ä¸ºåŒä¸€åˆ†æµè§„åˆ™ä¸­ä¸åŒå…³é”®è¯(å…è®¸æ­£åˆ™è¡¨è¾¾å¼)æŒ‡å®šä¸åŒç­–ç•¥ç»„;
6.`replace` å‚æ•°, æ­£åˆ™æ›¿æ¢ ğŸğ¢ğ¥ğ­ğğ«/ğ«ğğ°ğ«ğ¢ğ­ğ å†…å®¹, `regex@newregex`;
  - å°†æ·˜å®æ¯”ä»·ä¸­è„šæœ¬æ›¿æ¢æˆ lite ç‰ˆæœ¬, tiktok ä¸­ JP æ¢æˆ KR
    - eg: `replace=(price)(.*)@$1_lite$2+jp@kr `
7.`dst=rewrite`/`filter`ï¼Œåˆ†åˆ«ä¸ºå°† `module`&`rule-set` è½¬æ¢æˆ é‡å†™/åˆ†æµ;
  - âš ï¸ é»˜è®¤å°† module è½¬æ¢åˆ°é‡å†™, rule-set è½¬æˆåˆ†æµ
  - âš ï¸ æŠŠ rule-set ä¸­ url-regex è½¬æˆé‡å†™æ—¶, å¿…é¡»è¦åŠ  `dst=rewrite`;
  - âš ï¸ æŠŠ module ä¸­çš„åˆ†æµè§„åˆ™è½¬æ¢æ—¶, å¿…é¡»è¦åŠ  `dst=filter`
8.`cdn=1`, å°† github è„šæœ¬çš„åœ°å€è½¬æ¢æˆå…ç¿»å¢™`cdn.jsdelivr.net`
- `fcr=1`/`2`/`3`, ä¸ºåˆ†æµè§„åˆ™æ·»åŠ  `force-cellular`/`multi-interface`/`multi-interface-balance` å‚æ•°ï¼Œå¼ºåˆ¶`ç§»åŠ¨æ•°æ®`/`æ··åˆæ•°æ®`/`è´Ÿè½½å‡è¡¡`
- `via=æ¥å£`, ä¸ºåˆ†æµè§„åˆ™æ·»åŠ  `via-interface` å‚æ•°, `0` è¡¨ç¤º `via-interface=%TUN%`
- `relay=ç›®æ ‡ç­–ç•¥å`, æ‰¹é‡å°†èŠ‚ç‚¹è®¢é˜…è½¬æ¢ä¸º`ip`/`host`è§„åˆ™ï¼Œç”¨äºå®ç°ä»£ç†é“¾

#### 13.4.3 å…¶ä»–å‚æ•°

1.é€šçŸ¥å‚æ•° `ntf=0`/`1`, ç”¨äº `å…³é—­`/`æ‰“å¼€` èµ„æºè§£æå™¨çš„æç¤ºé€šçŸ¥
  - rewrite/filter é»˜è®¤`å¼€å¯`é€šçŸ¥æç¤º, ä»¥é˜²è§„åˆ™è¯¯åˆ é™¤
  - server èµ„æºè§£æåˆ™é»˜è®¤`å…³é—­`é€šçŸ¥æç¤º
2.ç±»å‹å‚æ•° `type=domain-set`/`rule`/`module`/`list`/`nodes`
  - å½“è§£æå™¨æœªèƒ½æ­£ç¡®è¯†åˆ«ç±»å‹æ—¶, å¯å°è¯•ä½¿ç”¨æ­¤å‚æ•°å¼ºåˆ¶æŒ‡å®š
3.éšè—å‚æ•° `hide=0`, ç¦ç”¨ç­›é™¤çš„åˆ†æµ/é‡å†™ï¼Œé»˜è®¤æ–¹å¼ä¸º`åˆ é™¤`

## å›¾æ ‡é›†

> å‡æ¥æºäºäº’è”ç½‘ï¼Œä¾µåˆ 

<details>
  <summary>ç‚¹å‡»æŸ¥çœ‹</summary>

ç‚¹å‡»ä¸‹æ–¹è¿æ¥ä¸€é”®å¯¼å…¥

> ç»¼åˆç±»å›¾æ ‡
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%0A%20%20%20%20%22https%3A%2F%2Fgithub.com%2FKoolson%2FQure%2Fraw%2Fmaster%2FOther%2FQureColor-All.json%22%0A%5D">Qure Color (All)@Koolson</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%0A%20%20%20%20%22https%3A%2F%2Fraw.githubusercontent.com%2FKoolson%2FQure%2Fmaster%2FOther%2FQuremini.json%22%0A%5D">Qure mini@Koolson</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%0A%20%20%20%20%22https%3A%2F%2Fraw.githubusercontent.com%2FOrz-3%2Fmini%2Fmaster%2FminiColor.json%22%0A%5D">mini Color@Orz-3</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https%3A%2F%2Fgithub.com%2FOrz-3%2Fmini%2Fraw%2Fmaster%2Fmini.json%22%5D">mini icons@Orz-3</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/Orz-3/face/master/face.json%22%5D">mini face@Orz-3</a>

* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%0A%20%20%20%20%22https%3A%2F%2Fraw.githubusercontent.com%2FSemporia%2FHand-Painted-icon%2Fmaster%2FSemporia.json%22%0A%5D">Hand Painted Icon@Semporia</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/icons-all.json%22%5D">fzm200å›¾æ ‡è®¢é˜…@fmz200</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https%3A%2F%2Fraw.githubusercontent.com%2FToperlock%2FQuantumult%2Fmain%2FShin-icons.json%22%5D">èœ¡ç¬”å°æ–°@Toperlock</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https%3A%2F%2Fraw.githubusercontent.com%2FToperlock%2FQuantumult%2Fmain%2FWolffy-icons.json%22%5D">å–œç¾Šç¾Šä¸ç°å¤ªç‹¼@Toperlock</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https%3A%2F%2Fraw.githubusercontent.com%2FToperlock%2FQuantumult%2Fmain%2FD-icons.json%22%5D">å“†å•¦Aæ¢¦@Toperlock</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https%3A%2F%2Fraw.githubusercontent.com%2Fshoujiqiyuan%2FPVSZforQuanX%2Fmaster%2FPVSZ.json%22%5D">æ¤ç‰©å¤§æˆ˜åƒµå°¸@Toperlock</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https%3A%2F%2Fraw.githubusercontent.com%2Fshoujiqiyuan%2FDigimonforQuanX%2Fmaster%2FDigimon.json%22%5D">æ•°ç å®è´@shoujiqiyuan</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https%3A%2F%2Fraw.githubusercontent.com%2Fshoujiqiyuan%2FPokemonGOforQuanX%2Fmaster%2FPokemonGo.json%22%5D">çš®å¡ä¸˜@shoujiqiyuan</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https%3A%2F%2Fraw.githubusercontent.com%2FYuanxsxs%2FQtumultX%2Fmaster%2FIcon%2FCatcat.json%22%5D">å°å¯çˆ±çŒ«çŒ«@Yuanxsxs</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/lige47/QuanX-icon-rule/main/ligeicon.json%22%5D">ç¦»æ­Œå›¾æ ‡è®¢é˜…@lige47</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/LovedGM/Quantumult-X-TuBiao/a6da7ef83e55a098bc7e9b793a670bbdfde5e36e/yyy.json%22%5D">å˜¤å˜¤å˜¤@LovedGM</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/LovedGM/Quantumult-X-TuBiao/main/zishi-cs.json%22%5D">å§¿åŠ¿å›¾æ ‡@LovedGM</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/erdongchanyo/icon/main/edc-country-icon-gallery.json%22%5D">EDC Country Icon@ErdongChan</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/chxm1023/Script_X/main/icon/icons.json%22%5D">chxm1023å›¾æ ‡è®¢é˜…@chxm1023</a>

> Embyå›¾æ ‡
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/Onlookers-Group/Texonin-LAB-Public/main/Quantumult(X)/Icon/color/color.json%22%5D">TEXONâ€™S EMBYå›¾æ ‡@Onlookers-Group</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/Softlyx/Fileball/main/YUAN/tubiao.json%22%5D">Fileballå›¾æ ‡@Softlyx</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/Twoandz9/Emby-icons/main/TheRaw.json%22%5D">Emby@Twoandz9</a>

> æœºåœºå›¾æ ‡
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/Twoandz9/TheMagic-Icons/main/TheRaw.json%22%5D">TheMagic@Twoandz9</a>
* <a href="https://quantumult.app/x/open-app/ui?module=gallery&type=icon&action=add&content=%5B%22https://raw.githubusercontent.com/erdongchanyo/icon/main/edc-airport-icon-gallery.json%22%5D">Edc Airport Icon@ErdongChan</a>

</details>