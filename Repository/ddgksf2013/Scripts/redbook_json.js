/***********************************************
> 应用名称：墨鱼自用小红书去广告脚本
> 脚本作者：@ddgksf2013
> 微信账号：墨鱼手记
> 更新时间：2024-11-06
> 通知频道：https://t.me/ddgksf2021
> 贡献投稿：https://t.me/ddgksf2013_bot
> 问题反馈：ddgksf2013@163.com
> 特别提醒：如需转载请注明出处，谢谢合作！
***********************************************/




const version = 'V1.0.17';
const $ = new Env("小红书");
var _0xode='jsjiami.com.v7';function _0x1f55(_0x374b69,_0xbca1eb){const _0x29e5f7=_0x29e5();return _0x1f55=function(_0x1f556b,_0x3cd745){_0x1f556b=_0x1f556b-0x73;let _0xa9faae=_0x29e5f7[_0x1f556b];if(_0x1f55['Azkchz']===undefined){var _0x3d1f1f=function(_0x4c4653){const _0x382c8a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1b32be='',_0x4cdc4f='';for(let _0x16cf99=0x0,_0x3c3afe,_0x461d26,_0x5edfba=0x0;_0x461d26=_0x4c4653['charAt'](_0x5edfba++);~_0x461d26&&(_0x3c3afe=_0x16cf99%0x4?_0x3c3afe*0x40+_0x461d26:_0x461d26,_0x16cf99++%0x4)?_0x1b32be+=String['fromCharCode'](0xff&_0x3c3afe>>(-0x2*_0x16cf99&0x6)):0x0){_0x461d26=_0x382c8a['indexOf'](_0x461d26);}for(let _0x3cee2e=0x0,_0x16ce6e=_0x1b32be['length'];_0x3cee2e<_0x16ce6e;_0x3cee2e++){_0x4cdc4f+='%'+('00'+_0x1b32be['charCodeAt'](_0x3cee2e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4cdc4f);};const _0x3a7cd7=function(_0x285869,_0x15bc4e){let _0xe44809=[],_0x535245=0x0,_0x53be2f,_0x175c9b='';_0x285869=_0x3d1f1f(_0x285869);let _0x355954;for(_0x355954=0x0;_0x355954<0x100;_0x355954++){_0xe44809[_0x355954]=_0x355954;}for(_0x355954=0x0;_0x355954<0x100;_0x355954++){_0x535245=(_0x535245+_0xe44809[_0x355954]+_0x15bc4e['charCodeAt'](_0x355954%_0x15bc4e['length']))%0x100,_0x53be2f=_0xe44809[_0x355954],_0xe44809[_0x355954]=_0xe44809[_0x535245],_0xe44809[_0x535245]=_0x53be2f;}_0x355954=0x0,_0x535245=0x0;for(let _0x447d02=0x0;_0x447d02<_0x285869['length'];_0x447d02++){_0x355954=(_0x355954+0x1)%0x100,_0x535245=(_0x535245+_0xe44809[_0x355954])%0x100,_0x53be2f=_0xe44809[_0x355954],_0xe44809[_0x355954]=_0xe44809[_0x535245],_0xe44809[_0x535245]=_0x53be2f,_0x175c9b+=String['fromCharCode'](_0x285869['charCodeAt'](_0x447d02)^_0xe44809[(_0xe44809[_0x355954]+_0xe44809[_0x535245])%0x100]);}return _0x175c9b;};_0x1f55['dEQUPv']=_0x3a7cd7,_0x374b69=arguments,_0x1f55['Azkchz']=!![];}const _0x1f4245=_0x29e5f7[0x0],_0x5c739a=_0x1f556b+_0x1f4245,_0x35b523=_0x374b69[_0x5c739a];return!_0x35b523?(_0x1f55['nXtBXP']===undefined&&(_0x1f55['nXtBXP']=!![]),_0xa9faae=_0x1f55['dEQUPv'](_0xa9faae,_0x3cd745),_0x374b69[_0x5c739a]=_0xa9faae):_0xa9faae=_0x35b523,_0xa9faae;},_0x1f55(_0x374b69,_0xbca1eb);}const _0x169686=_0x1f55;(function(_0x4c25cc,_0x271883,_0x29c432,_0x30f741,_0x5bd4e3,_0x435312,_0x442a34){return _0x4c25cc=_0x4c25cc>>0x7,_0x435312='hs',_0x442a34='hs',function(_0x2cbf54,_0x59895c,_0x2ccb7e,_0x1d3c05,_0x1541a2){const _0x446f7b=_0x1f55;_0x1d3c05='tfi',_0x435312=_0x1d3c05+_0x435312,_0x1541a2='up',_0x442a34+=_0x1541a2,_0x435312=_0x2ccb7e(_0x435312),_0x442a34=_0x2ccb7e(_0x442a34),_0x2ccb7e=0x0;const _0x3b6e5b=_0x2cbf54();while(!![]&&--_0x30f741+_0x59895c){try{_0x1d3c05=parseInt(_0x446f7b(0x77,'z)FY'))/0x1*(parseInt(_0x446f7b(0xb0,'N*WJ'))/0x2)+parseInt(_0x446f7b(0xb4,'@[O&'))/0x3+-parseInt(_0x446f7b(0x118,'SyIo'))/0x4+-parseInt(_0x446f7b(0xde,'HnXk'))/0x5*(-parseInt(_0x446f7b(0xa2,'AGFd'))/0x6)+-parseInt(_0x446f7b(0xbe,'bcNe'))/0x7*(parseInt(_0x446f7b(0x7c,'H4$g'))/0x8)+-parseInt(_0x446f7b(0xfa,'ioeg'))/0x9+parseInt(_0x446f7b(0xdb,'2gqK'))/0xa;}catch(_0x1b91bf){_0x1d3c05=_0x2ccb7e;}finally{_0x1541a2=_0x3b6e5b[_0x435312]();if(_0x4c25cc<=_0x30f741)_0x2ccb7e?_0x5bd4e3?_0x1d3c05=_0x1541a2:_0x5bd4e3=_0x1541a2:_0x2ccb7e=_0x1541a2;else{if(_0x2ccb7e==_0x5bd4e3['replace'](/[fqpwxVTrtePYMFRSOuXbkN=]/g,'')){if(_0x1d3c05===_0x59895c){_0x3b6e5b['un'+_0x435312](_0x1541a2);break;}_0x3b6e5b[_0x442a34](_0x1541a2);}}}}}(_0x29c432,_0x271883,function(_0x16037e,_0x20bccf,_0x5534c3,_0x55ea06,_0x239d08,_0x4958ec,_0x592ff7){return _0x20bccf='\x73\x70\x6c\x69\x74',_0x16037e=arguments[0x0],_0x16037e=_0x16037e[_0x20bccf](''),_0x5534c3='\x72\x65\x76\x65\x72\x73\x65',_0x16037e=_0x16037e[_0x5534c3]('\x76'),_0x55ea06='\x6a\x6f\x69\x6e',(0x18ab51,_0x16037e[_0x55ea06](''));});}(0x6400,0x851e4,_0x29e5,0xca),_0x29e5)&&(_0xode=`\xf4d`);$[_0x169686(0xa3,'qLR0')]=_0x169686(0x76,'c@cd');function _0x29e5(){const _0x4ba325=(function(){return[_0xode,'fqbjVeswtjiamTOiS.rcFXoNMmYp.uv7kxRPOPRX==','WQtdJcZcMCkvWOtdMSkQvaddNmo0w3ywWPe0','W7P2oSocWQG','zbfFCa','kgzolCoGW4ZcH8ofWQVcJSkAs8oY','adj8oSoCWPhcMCoYW7BcGtpcSSk5WP8','asFdSG','DbTxAmkOnCodkGjgsmozWR7cGCoyn0K','WO55ECkuW6W','aJfllCk0WQtdPa','xJDPt8oH','W5ikW74TW4RcHSooWQJdMSo+WPrMW6qnW6CwgG','WOfKyZtdMIj6W6BdSq','bCo7WRK','DqRdTG','sSkjW4e','rheJ','W4eSW744ocr7W5bd','tfP5dmksySoGWQJcLSorWOBdMmko','WPxcRCkd','CqRdVfWyfLxcNmksnbvJWR4','W79wW77dTG','CWRcH2VdVmoXW5VdPSk7iG','B8kVWQi','W7tdNmoaW74','pSo9WRddILK','W4WgW5LEW7ddJbNdVItcJa','j8o3W47dRsRcUa','emknWPXVF3m','CI1D','v8o2WQBdLmk8W74IW78+W4O','mdbykW','WRWbtH14','bHhcMSkLW6BcO1JdLfrzWPBcRSk8W78','c8kGWRK','W5eDW5S','mCo3W7WAWRvICuZcSmo6','dtL0j0W','W6NdLmosW60mWROYeSonWQVdLG','d8kinLjQiuFcRcrA','W5tcKCk+WQVcKSotimkxcwKFW7lcPa','pmkfWPRcSG','kSkpk8kpCIi','W6jIoba','zdu4W7a','f8oRWRJdQKpdT8ovjmoo','W69sW7NdOW','W7DyW60','qNC9zCkhW47dICkKW5W','WQhcO8oi','WRpcS8ouW4Kp','rxRdIXZcGxNcPmokW5L7WPDD','k1tdV0pcNSodlmkzWPas','csNdOCk4','W6BdKmobW7KDWOWdcSobWQRdRCkFWQT6WP/cSmo0WRqcWQVcIw1wsmkqnHrjwCk65Pg357EO56676k6wW6f7','WOnKCa','W5FdSGbAWPXprgddNq','wg4UA8kmW5RdV8kUW4ZcLra','WRbqW7JcV39E','WOu3rJ9/WOBcM8oedtdcP8oHW61yeHRdHa','sY9ts8op','w0/dJG'].concat((function(){return['WRjCW67cTYWvWPm','CWNcRHZcRG','CSkUWPRcQh7dVSk5W5uYW7KZpca','t2BdKXRcQMdcO8olW7jXW4mjWP1Td8o1','AqtdO0OB','BGxcQqhcUSoHhmkU','W7jMpWu','qLldHq','yXFcHmkb','faqR','F1NdJCo0WP0','iJHil08wo2iDWPVdJSk8W5rj','rhBdMrdcV1BcV8oeW5TXW7iEWObQdmoVhq','BqtcQWFcQSomemkZWP0o','WRddGcZcJmkeWPm','W5qeW7KxW6FcJ8olWRRdMG','WRvAW7dcTIaqWOjH','kCkSWPtcRa','WP9QzsldOa','WOnIyttdMJ57W7RdSCot','lY9FWR/dGSozWONdTt0','AHhdSeSkletcKCorpq','kfddNZNdVSoFW5/dPmkf','mSoNW5hdRsRcP8oxW6q5W4GZhG0lWQ1G','CZifrSkGWP/dNCokWRhcNSkTq8oNW67dRbNdGG','WR/dMH/cMCkfWPi','WONcO8kwpJG','5Pok57Al562u6k2i','zJTc','WRKsCaDu','mSkhn8kilq','h8o9Cx/dRZ3cJ3fa','WOzPWRLMBNSMW5bGW48DfmoJ','5Pc557Ec566X6k2z','WRRdHIC','tSoszXK/sX7dSNqe','mvZdJc3dVG','rCkeuCk6WPm','BbFdVq','W5BdPWHpWPPfFJNcKSkeW6TtWQNcVcm','W5KFW4mlna','drKG','W7TbmmoeWPG','BG3cUaBcQG','BrJcUbZcOCo0emk7WOi','dSkbWPPLuNCdWQK1W4W','WPtcP8kajdZcSmk4W7NdHrhcJf/cOSkjgsSv','cSkjWP9FF2ihWQC1W4y1W6GrW7xdMCkwW44','jCkzvg3cJ8owWRBcH8k5oGpcO8kt','W7vXjsRdNW','FqtdPvG','WPxcQ8kskalcN8kJW7FdHXVdQrW','cCo6WQ7dQKZdJ8opi8obWOuzWQRcOCo2WOdcS8oz','ne/dKG','W5e3W7WOcs97W5Hr','EG3cVHtcVa','zrFcK8kxo8kKeCodWRiSW68znJNcU1ZcRwLqAmkLfa','BZLRWRRdH8oNWQS','k8kuWOlcSNtcRW','tMDCWOfCegPVlq','wMva','W6PemCoOWPRdICkiW4fKW4i','W6CdW4FcLcW0WRHz'].concat((function(){return['aJRdVmk+W5GEd1NcOIW','cCkTW6dcICoAWRH5WQz8WPr6W4W','xMOR','WQvbW6/cSISzWP90DG','dSkIWR8DW6bKfJpcKSkJqq','eCkCWP5Py2acWQa4','yrVcK8kqo8kuhSoZWRaXW6yecc0','nSklWPRcTLJcQ8kxWQhdOG','W6Dpjq','WQxdNtlcKCkpWOBdL8ktsG','W7LflSowWONdNSkdW6TZW55Rw0a+b2dcSG','W7zsW67dVHq','W4a9W6aWiIz2W6LDW5mKpCoNW5JcNdqf','W6pdSmk8fW','u0hdNCoY','aCkMWRiFW5PRfW','WOJdHmoGW73dTCktEmkmn2ClW5e','gCklW4VcHa','W5qoW4vzW4O','W43dTHDXWPTittVcICkpW6LLWQNdQwZdSmoD','WOu3tZnbWQNcICogedtcN8oN','cshdPSk1W5GBnq','nSklWPRcTLJcQCkBWQRdOMaeW5dcTvK','W4ZdUGvjWOXYvcJcKq','W5hdSHDA','W5xdTHzDWOW','lSknWORcTMJcMmknWQldS1Ot','WRGftXO','FdyyFmkGWPVdHCooWPRcKSkKFCoNW6q','W7nwW7NdIaFcGSkLiv4MymkUzCkVWQCOFW','B24vW6lcNSkiW5BdVsO/CCoeja','gCo7BW','jCo/W5BdUa','W75zW67dIahcJSkKjq','ksLb','W7xdI8oF','W7HummoEWPpdNmkoW5jT','mMCefmoCWQZcNeeMoG','e1JdMHZdTmoVW4hdHSkbn0Woe8o5EG','oZ5dWRpdNSoFWPtdTHSJt8oYmxu','wfldGmo0WRRdTt7cKxvs','bCo9zNVdSG','rSkrqSk7WOi1B8ouDCkv','kCkrr2q','W6JdLSohW5ufWQaEcSkEW7G','EG3cVHq','W5akW4rE','W4GoW6etW4ZcHSogWPBdICo0WP9DW7a9W6yhba','W6TwW7JdPba','n0RcKhqqoSklzSo8W4ZcJ8oAWPpdHG','W4JcPCkliJNcNmkuW7VdKGBcT2pcU8ov','s8oBWONdLZFcQbjOWRtcV8kZoG','pSkeqwZcJCoyWRJcICk0','cSoMCvpdOdNcJG','u8kjW4hcJmo/iInkWRdcP34','xhJcPSoQWOLaAvtcHs/dSSouWPy','cSoWWR7dPNldVmovmCod','W6FdTmk9emk8','od5l','qCkbW5hcIa','f8kAWOa','yH9pAa'];}()));}()));}());_0x29e5=function(){return _0x4ba325;};return _0x29e5();};let body=$response[_0x169686(0xbd,'1VYB')];if(body){switch(!![]){case/api\/sns\/v\d\/note\/widgets/[_0x169686(0xe6,'o5Xb')]($request[_0x169686(0x9c,'6nS!')]):try{let obj=JSON[_0x169686(0xfc,'^MMo')](body);const propertiesToDelete=[_0x169686(0xaf,'a82R'),_0x169686(0x93,'z!GC')];for(const prop of propertiesToDelete){obj[_0x169686(0x8e,'N*WJ')]?.[prop]&&delete obj[_0x169686(0xef,'@[O&')][prop];}body=JSON[_0x169686(0x10c,'z)FY')](obj);}catch(_0x506fbc){console['log']('widgets:\x20'+_0x506fbc);}break;case/api\/sns\/v\d\/note\/live_photo\/save/['test']($request['url']):try{let obj=JSON['parse'](body);obj[_0x169686(0xaa,'$80U')][_0x169686(0x75,'$80U')]=JSON[_0x169686(0x10a,'P#ws')]($['getdata']($['RedBookPhotoKey'])),body=JSON[_0x169686(0x82,'U3(S')](obj);}catch(_0x526939){console[_0x169686(0xd1,'HnXk')](_0x169686(0xed,']sHd')+_0x526939);}break;case/api\/sns\/v\d\/note\/comment\/list/[_0x169686(0x98,'QJ5p')]($request[_0x169686(0x73,'qLR0')]):try{let obj=JSON[_0x169686(0x11d,'UXLx')](body);for(let module of obj[_0x169686(0x9d,'ioeg')]['comments']){if(module['pictures'])for(let item of module[_0x169686(0xfd,'$80U')]){item[_0x169686(0xa5,'2gqK')]=item['meme_package']['image_url'],item[_0x169686(0xff,'2gqK')]=item[_0x169686(0x8d,'tX(9')][_0x169686(0x10e,'qLR0')];}}body=JSON['stringify'](obj);}catch(_0x1f0b13){console[_0x169686(0xe9,'kXj!')](_0x169686(0x7e,'s649')+_0x1f0b13);}break;case/api\/sns\/v\d\/note\/redtube/[_0x169686(0xd2,'Xp@L')]($request['url']):try{let obj=JSON[_0x169686(0xc2,'y[R0')](body);for(let module of obj['data']['items']){module['related_goods_num']&&(module[_0x169686(0x89,'SyIo')]=0x0),module[_0x169686(0x90,'ZEF8')]&&(module[_0x169686(0x110,'bcNe')]=![]),module['media_save_config']&&(module[_0x169686(0xf5,'(1kW')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]}),module['share_info']&&(module[_0x169686(0x105,'$80U')]['function_entries']=[{'type':_0x169686(0x83,'c@cd')},{'type':_0x169686(0x99,'bcNe')},{'type':_0x169686(0x74,'SyIo')},{'type':'native_voice'},{'type':_0x169686(0x97,'z!GC')},{'type':_0x169686(0x92,'@[O&')},{'type':_0x169686(0xd6,'U3(S')},{'type':'video_feedback'}]);}body=JSON[_0x169686(0xe7,'Op#U')](obj);}catch(_0x1a5d83){console[_0x169686(0xf1,'P#ws')](_0x169686(0xf2,'ZEF8')+_0x1a5d83);}break;case/api\/sns\/v\d\/note\/videofeed/['test']($request[_0x169686(0xca,'XVtP')]):try{let obj=JSON[_0x169686(0xb6,'JfIq')](body);for(let module of obj['data']){module[_0x169686(0xc1,'1VYB')]&&(module[_0x169686(0xbb,'ky)p')]=0x0),module[_0x169686(0x9a,'kXj!')]&&(module['has_related_goods']=![]),module[_0x169686(0x126,'a82R')]&&(module[_0x169686(0x104,']sHd')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]}),module[_0x169686(0xe1,'J2$k')]&&(module['share_info'][_0x169686(0xfb,']sHd')]=[{'type':_0x169686(0xae,'BjgJ')},{'type':_0x169686(0xa4,'z)FY')},{'type':'copy_link'},{'type':'native_voice'},{'type':_0x169686(0xb3,'fXhN')},{'type':_0x169686(0xf8,'H4$g')},{'type':'report'},{'type':_0x169686(0x103,'x6gO')}]);}body=JSON['stringify'](obj);}catch(_0x2220ff){console[_0x169686(0x101,')O1f')]('videofeed:\x20'+_0x2220ff);}break;case/api\/sns\/v\d\/note\/feed/['test']($request[_0x169686(0xd7,'AGFd')]):try{let obj=JSON[_0x169686(0x116,'I%Z6')](body);for(let module of obj['data']){module['related_goods_num']&&(module['related_goods_num']=0x0);module['has_related_goods']&&(module[_0x169686(0x127,'U3(S')]=![]);if(module[_0x169686(0x107,'pZft')])for(let item of module[_0x169686(0xc6,'P#ws')]){item['media_save_config']={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]};}}body=JSON[_0x169686(0xb1,'LANH')](obj);}catch(_0x52602f){console[_0x169686(0xf7,'2gqK')](_0x169686(0xf4,'H4$g')+_0x52602f);}break;case/api\/sns\/v\d\/note\/imagefeed/[_0x169686(0xe5,'x*@g')]($request[_0x169686(0xa0,'Xp@L')]):try{let obj=JSON[_0x169686(0xad,'kXj!')](body),datas=[];for(let module of obj['data']){module[_0x169686(0xac,'pZft')]&&(module[_0x169686(0x87,'9alF')]=0x0);module['has_related_goods']&&(module[_0x169686(0xc5,'pZft')]=![]);if(module[_0x169686(0x84,'z!GC')])for(let item of module[_0x169686(0xb5,'Op#U')]){item[_0x169686(0x12c,'Op#U')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]};if(item[_0x169686(0xe0,'Xp@L')])for(let it of item[_0x169686(0xf3,'XVtP')]){if(it[_0x169686(0x125,'U3(S')]){let idata={};idata['video_id']=it[_0x169686(0x10b,'P#ws')][_0x169686(0x88,'kXj!')]['video_id'],idata[_0x169686(0x8c,'0tE8')]=it['live_photo_file_id'],idata[_0x169686(0x121,')O1f')]=it['live_photo'][_0x169686(0xf9,'$80U')]['stream'][_0x169686(0x109,'ioeg')][0x0]['master_url'],datas['push'](idata);}}}}$['setdata'](JSON['stringify'](datas),$['RedBookPhotoKey']),body=JSON[_0x169686(0xea,'XVtP')](obj);}catch(_0x3296d1){console[_0x169686(0xb7,'x6gO')](_0x169686(0x81,'0tE8')+_0x3296d1);}break;case/api\/sns\/v\d\/homefeed\/categories\?/['test']($request[_0x169686(0xb9,'U3(S')]):try{let obj=JSON[_0x169686(0x96,'ZEF8')](body);obj[_0x169686(0xb8,'fXhN')]['categories']=obj['data']['categories'][_0x169686(0xd5,'ioeg')](_0x144e53=>!(_0x144e53[_0x169686(0x7f,'XVtP')]=='homefeed.shop'||_0x144e53[_0x169686(0xc9,'fXhN')]==_0x169686(0xce,'^MMo'))),body=JSON[_0x169686(0x124,'$80U')](obj);}catch(_0x30aa5d){console[_0x169686(0xcd,'a82R')]('categories:\x20'+_0x30aa5d);}break;case/api\/sns\/v\d\/search\/hint/[_0x169686(0xe8,'kXj!')]($request[_0x169686(0x11e,'^MMo')]):try{let obj=JSON['parse'](body);obj[_0x169686(0xfe,'x*@g')]?.['hint_words']&&(obj['data'][_0x169686(0xd4,'GK%9')]=[{'title':_0x169686(0x119,'fXhN'),'type':_0x169686(0xf0,'Xp@L'),'search_word':_0x169686(0x113,'ky)p')}]),body=JSON[_0x169686(0x117,'6nS!')](obj);}catch(_0x2bb341){console[_0x169686(0xcd,'a82R')](_0x169686(0xe4,'I%Z6')+_0x2bb341);}break;case/api\/sns\/v\d\/search\/hot_list/[_0x169686(0xab,'GK%9')]($request['url']):try{let obj=JSON[_0x169686(0x123,'$80U')](body);obj[_0x169686(0xe3,'z!GC')]={'scene':'','title':'','items':[],'host':'','background_color':{},'word_request_id':''},body=JSON[_0x169686(0x86,'ky)p')](obj);}catch(_0x23577e){console[_0x169686(0xcd,'a82R')](_0x169686(0xa9,'Xp@L')+_0x23577e);}break;case/api\/sns\/v\d\/search\/trending/[_0x169686(0x100,'c@cd')]($request['url']):try{let obj=JSON[_0x169686(0x8f,'GK%9')](body);obj[_0x169686(0xaa,'$80U')]={'title':'','queries':[],'type':'','word_request_id':''},body=JSON['stringify'](obj);}catch(_0x459100){console[_0x169686(0xc8,'^MMo')]('trending:\x20'+_0x459100);}break;case/api\/sns\/v\d\/system_service\/splash_config/[_0x169686(0xe5,'x*@g')]($request[_0x169686(0x7a,'t@Gu')]):try{let obj=JSON[_0x169686(0x122,'9alF')](body);obj[_0x169686(0xa8,'LANH')][_0x169686(0x7b,'9alF')][_0x169686(0xb2,'6nS!')](_0x425c8a=>{const _0x59d345=_0x169686,_0x32d18b={'LpbiB':function(_0x28bf49,_0x31e2c8){return _0x28bf49+_0x31e2c8;},'ZbzIt':'KlFYb','YhXml':_0x59d345(0x11b,'J2$k'),'cvnNt':function(_0x152fb6,_0xc3fbb5){return _0x152fb6===_0xc3fbb5;},'kGOZb':_0x59d345(0xbc,'9alF')};_0x425c8a[_0x59d345(0x10d,'^MMo')]=_0x59d345(0xd8,'s649'),_0x425c8a[_0x59d345(0x9e,'kXj!')]=_0x32d18b[_0x59d345(0xdf,'x6gO')],_0x425c8a[_0x59d345(0xc7,'Op#U')]&&(_0x32d18b[_0x59d345(0x129,'x*@g')](_0x32d18b[_0x59d345(0x120,'SyIo')],_0x59d345(0x102,'2gqK'))?_0x502bf4[_0x59d345(0x11a,'ky)p')](_0x32d18b[_0x59d345(0xf6,'AGFd')](_0x59d345(0x12b,'a82R'),_0x1c0fdb)):_0x425c8a[_0x59d345(0x114,'AGFd')][_0x59d345(0xc3,'8m]J')](_0x440f55=>{const _0x377553=_0x59d345;if(_0x32d18b[_0x377553(0xd3,'Op#U')]===_0x377553(0x115,'QJ5p')){let _0x50478=_0x8efb2c[_0x377553(0x11c,'qLR0')](_0x5cb1fc);for(let _0x97d8d3 of _0x50478['data'][_0x377553(0x108,'H4$g')]){if(_0x97d8d3['pictures'])for(let _0x45766d of _0x97d8d3['pictures']){_0x45766d[_0x377553(0x7d,'@[O&')]=_0x45766d[_0x377553(0x91,'(1kW')][_0x377553(0x94,'ZEF8')],_0x45766d['url']=_0x45766d['meme_package']['image_url'];}}_0x417df3=_0x547edd[_0x377553(0x80,'H4$g')](_0x50478);}else _0x440f55[_0x377553(0xa7,'UXLx')]='2208963661',_0x440f55['end_time']=_0x32d18b[_0x377553(0xc4,'AGFd')];}));}),body=JSON['stringify'](obj);}catch(_0x4f9a9e){console['log'](_0x169686(0x11f,'ZEF8')+_0x4f9a9e);}break;case/api\/sns\/v\d\/homefeed\?/[_0x169686(0x8a,'JfIq')]($request[_0x169686(0x9f,'z)FY')]):try{let obj=JSON[_0x169686(0x112,'a82R')](body);obj[_0x169686(0x12a,'^MMo')]=obj[_0x169686(0xd9,'x6gO')][_0x169686(0x106,'ky)p')](_0x5e48c2=>!_0x5e48c2[_0x169686(0x111,'ky)p')]),body=JSON['stringify'](obj);}catch(_0x5e86fd){console[_0x169686(0x85,'9alF')]('homefeed:\x20'+_0x5e86fd);}break;case/api\/sns\/v\d+\/search\/notes\?/[_0x169686(0xe8,'kXj!')]($request[_0x169686(0xdd,'GK%9')]):try{let obj=JSON['parse'](body);obj[_0x169686(0xcf,'kXj!')][_0x169686(0xa6,'6nS!')]=obj['data']['items'][_0x169686(0xd5,'ioeg')](_0x1da5a7=>!_0x1da5a7[_0x169686(0xeb,'RboF')]),body=JSON[_0x169686(0xcb,'SyIo')](obj);}catch(_0x3729fa){console[_0x169686(0xdc,'0tE8')]('search/notes:\x20'+_0x3729fa);}break;case/api\/sns\/v\d\/system_service\/config\?/[_0x169686(0x95,'ZEF8')]($request[_0x169686(0x121,')O1f')]):try{let obj=JSON[_0x169686(0xda,'QJ5p')](body);const propertiesToDelete=[_0x169686(0xec,'RboF'),_0x169686(0x78,'z!GC'),'loading_img',_0x169686(0x79,'t@Gu'),'cmt_words',_0x169686(0x128,'LANH')];for(const prop of propertiesToDelete){obj[_0x169686(0x8b,'2gqK')]?.[prop]&&delete obj[_0x169686(0xba,'1VYB')][prop];}body=JSON[_0x169686(0xa1,'9alF')](obj);}catch(_0xe2e3f3){console[_0x169686(0xc0,'@[O&')](_0x169686(0x10f,'ioeg')+_0xe2e3f3);}break;default:$done({});break;}$done({'body':body});}else $done({});var version_ = 'jsjiami.com.v7';function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e)} isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = [""]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
