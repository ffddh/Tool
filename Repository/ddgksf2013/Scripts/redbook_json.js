/***********************************************
> 应用名称：墨鱼自用小红书去广告脚本
> 脚本作者：@ddgksf2013
> 微信账号：墨鱼手记
> 更新时间：2025-01-13
> 通知频道：https://t.me/ddgksf2021
> 贡献投稿：https://t.me/ddgksf2013_bot
> 问题反馈：ddgksf2013@163.com
> 特别提醒：如需转载请注明出处，谢谢合作！
***********************************************/




const version = 'V1.0.24';
const $ = new Env("小红书");
var _0xodE='jsjiami.com.v7';function _0x2a46(_0x21082a,_0x3b8593){const _0x1a76a6=_0x1a76();return _0x2a46=function(_0x2a4682,_0x2a9aac){_0x2a4682=_0x2a4682-0xe3;let _0x14dd4e=_0x1a76a6[_0x2a4682];if(_0x2a46['UNTlhW']===undefined){var _0x3ecd09=function(_0x25fc48){const _0x4d9ef0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x447016='',_0x48050c='';for(let _0x2e9b34=0x0,_0x18474f,_0x2502fc,_0x53a961=0x0;_0x2502fc=_0x25fc48['charAt'](_0x53a961++);~_0x2502fc&&(_0x18474f=_0x2e9b34%0x4?_0x18474f*0x40+_0x2502fc:_0x2502fc,_0x2e9b34++%0x4)?_0x447016+=String['fromCharCode'](0xff&_0x18474f>>(-0x2*_0x2e9b34&0x6)):0x0){_0x2502fc=_0x4d9ef0['indexOf'](_0x2502fc);}for(let _0x1c73d8=0x0,_0x2ed61c=_0x447016['length'];_0x1c73d8<_0x2ed61c;_0x1c73d8++){_0x48050c+='%'+('00'+_0x447016['charCodeAt'](_0x1c73d8)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x48050c);};const _0x5e1930=function(_0x2df5de,_0x1a3ccc){let _0x84db1b=[],_0x4e6731=0x0,_0x599340,_0x579943='';_0x2df5de=_0x3ecd09(_0x2df5de);let _0x15e4cf;for(_0x15e4cf=0x0;_0x15e4cf<0x100;_0x15e4cf++){_0x84db1b[_0x15e4cf]=_0x15e4cf;}for(_0x15e4cf=0x0;_0x15e4cf<0x100;_0x15e4cf++){_0x4e6731=(_0x4e6731+_0x84db1b[_0x15e4cf]+_0x1a3ccc['charCodeAt'](_0x15e4cf%_0x1a3ccc['length']))%0x100,_0x599340=_0x84db1b[_0x15e4cf],_0x84db1b[_0x15e4cf]=_0x84db1b[_0x4e6731],_0x84db1b[_0x4e6731]=_0x599340;}_0x15e4cf=0x0,_0x4e6731=0x0;for(let _0x179a17=0x0;_0x179a17<_0x2df5de['length'];_0x179a17++){_0x15e4cf=(_0x15e4cf+0x1)%0x100,_0x4e6731=(_0x4e6731+_0x84db1b[_0x15e4cf])%0x100,_0x599340=_0x84db1b[_0x15e4cf],_0x84db1b[_0x15e4cf]=_0x84db1b[_0x4e6731],_0x84db1b[_0x4e6731]=_0x599340,_0x579943+=String['fromCharCode'](_0x2df5de['charCodeAt'](_0x179a17)^_0x84db1b[(_0x84db1b[_0x15e4cf]+_0x84db1b[_0x4e6731])%0x100]);}return _0x579943;};_0x2a46['IDdyfX']=_0x5e1930,_0x21082a=arguments,_0x2a46['UNTlhW']=!![];}const _0x2de877=_0x1a76a6[0x0],_0x4de4e1=_0x2a4682+_0x2de877,_0x3580cf=_0x21082a[_0x4de4e1];return!_0x3580cf?(_0x2a46['gTdSnv']===undefined&&(_0x2a46['gTdSnv']=!![]),_0x14dd4e=_0x2a46['IDdyfX'](_0x14dd4e,_0x2a9aac),_0x21082a[_0x4de4e1]=_0x14dd4e):_0x14dd4e=_0x3580cf,_0x14dd4e;},_0x2a46(_0x21082a,_0x3b8593);}function _0x1a76(){const _0x305c20=(function(){return[_0xodE,'prjuEsBHjHiDkalROmCniKM.DcFXgokmX.IpvkF7==','W5lcSs4/','uZi5r8kAe3i','zCo2xCoo','BSoYEt96WOFdNa','W6zVi8o4','btWIsSkjmwe','nvNdU8od','ytZdKmomuuldQaqwWONdICkeW6PQi8kHwq','WPRdRSoLW45lWQFdJq','rezlW6rIaca0kam','W4SLW6LQFSkotmk6W67dU1G','gcm6tSkLma','W4/dP8oesW','W5FdS0RdIuOkcvbXuNqQ','WO/dMZa','W4RdLM1oW4RcJr7cIgZcNrtdVSohW6/dV8kWamkKW6RcJmkpgSkwW4jqhdFdKq5a5Pom57EF562y6k+NW5ZdPq','W6TTfmktW5fRn8oVWOW','o8khWOpcL31WpvBdPq','AmoYyd9dWOVdNCkEW51e','W4JcSdxdRGfnWPbZF8kcW7/cSmo6WRvWjNW','W7nOoq','gmkKWOjwo8kgW4OpWP9BEa','W6bVo2NdN8o/W4BcGmk9WOhdNbtcRmkxW4H2','W7bZmw/dHmojW5RcNSkhWOhdLG','E1lcHZrZ','emkQWPDt','pCk+W6mWirnDWORdVG','m1NdPmowW6tdSNrwWPldRLW/seTpW6DJ','kSoDWRm3','jZ/dN8ooW7tcPJxdHLO','o8kWW6qkdbPyWPJdVLRdTSoGW4VcMSklW6tcVG','C8oVW5KiW7zNWQFcJqq','W73dICkLdW','W4hdMtfrAK8u','W4xcLmoQ','c8keWPVdIJKWW5bQWOxcSmktzeniW60','pJFdJ8oaW6FcTXNcIHxdKSoOWOy','DeRcSq','WQ9EW4tdKCkRhmovWOJcQG','iSkyg8oVwSocWPmpgSo0ierP','BttdKmo/sKZdOq','W77cSWK4','FtZdGCo1rKldOf9c','W5/dO8odxG','thBcP0yO','FKZcUNGfWQC','W5/dSSoCsJpcIr4YW7uxyW','W7v5x8kUr8oUW6fxW6/cIthdRq','lMPgWPdcPa','W4lcUYOLD8kBW6KxW5FcQCoSda','CmonxSk+','W701Dmk/mCokW7RcQCo3kG','DSkJWQSIW6lcI8okW47dPCku','W7r/jwxdMCoI','WRrdW5W','WPKGiu8','y1RcKI96WPJdTCkiWOuEWRfnpq','WQW0smkfW6DeoCoiWPxdGL/dNIf1','W6T5rSkVECoQW6e','gHSC','W5BcTs84FG','W7OVCmkJmmo8W73cOmkRzq','W4ldUSoowq','BCo4tG','W6aYyCkOc8o8W7C','WRtdLKu','W5NdO8oCsWtdIM3dRMxcMX/dLcDbmSk3ea','g8kBWOFdKHu0W6zNWOe','W6G/W6hdVqW','W5/dI21yW5/cPq','W7TXrSkuB8oXW7jqW7C'].concat((function(){return['pwJcLSkGeXhdSWieWQFdUmkl','W44NW68','pLiHvmoNWRpcLCoCW7m','hHuiWOiGuhXLALCQWR3cT8kJW4JcMNS','WQ7dJu0','hIe6','W4ddLMLyW6hcUbJcK33cGghcQG','WPOEW45GW40hh8odgG','AZ8aW5VdSwTPwSo8htrFWPG','WQbwcSkNW4XjW7xcLgW','WPKlW456W4y','WQJdI0ddScva','zmk7WROpW7pcVmogW43dPG','ymojwCkR','WOSOmuS7WPu0waSkdKPUWQW','nmkRogHZWP3dR8k7WOuJ','W70Pz8kKoSoYW7RcOCoO','W740DSk5iCoNW7BcTa','WQ7dP0HQWPTFW6BcLCofW7/dQXi','fXai','BvFcUG','fw/dUCo9W5G','WRjfW4ldNCkAf8ovWP3cPW','Cs58kSoZW6PrlHRdGYhdOKq','bSkUWO9tjSknW4KpWPfzCmkpFtv0vCk6','W5e8W7PKDCkAESkWW74','W6P1mG','Dmo0W4GaW5O','gCkqWOtdTc0QW6b8WPRcRq','WQjqW4tdKCkth8ooWPlcUZi','W5tdUvpdGLqehffXtMSNlqG','jfi2umo6','B1lcGsy','WP/dHZJdMmo7W6PiW50','cmkvWOxdMc8','WORdIc7dTmoQ','gCkUWODBmW','WQLEW53dKCksfCozWP/dSdiFWPdcSG','W57dTSotwqNcMbqLW7vE','W4tdR8ou','WPxdOSo/W54qW7m','W6NcJHJcTgqlW43cKtBdHePKWRC','W7NdO8ouAb/dGgldOwRcMWtdNX97jq','WRC4smkjW6LelSogWPtdIwZdKI9/W5RdNSkG','WQhdOwlcHXZcS8o4W7jJW5q','bZWX','W6X5qCk/','W5ldTSooqt/cHb4','W48TW6vOrmknCSk1W6ZdQuVdQq','W4JcSdxdRGe','m8oDWQqQzg7cJ3BcV8orcvSRCmoUW5yb','C8oPBcHrWRhdJmktWOOb','EtZdKCoGrG','WRnuW5tdLSkBh8oxWQtcQZisWO3cNCocrSk6WQvmz3O7W4C','gXeFWRqZ','ESknWQy','WQDuD1VcIZpcRHHCW5FdMmkVW5C','B8oLW4emW51UWQRcOrFdKwpcGmoOaL7cVSkE','ymkLWQ4pW7pcVCooW4u','gwFdLYBdOb/cPCkTvLVcV8kRadPVj8oF','BYzRemoUW5buiqJdIrRdIXfsWPRdSg8','WPpdNtNdQSo8','WQ5RWQxcVLPHWOpdVazNWR9fWPW','W4tdUSoztZNcGbaiW6rEjK7dVN0ksSojECo3W7ddGLa','BmoYAG','W6VdJCk9d8oMW78Jd8oSW59rWRVcPmkguCoCdq','WRXjbW','WOqpW5HGW4i/bCoefuDUW7VdPY/cVexcQG','imkLW6u8ebHDWP/dSW','WRi8x8k/W7P+mCogWPBdIvFdRID+W5pdK8k0','mGtdGcLXWPpdHCkYWOm','imobW4FdIW','W7lcSW4gW5KmW73cK8oxW5hdMH0SW5JdSSk6W6W'].concat((function(){return['WQjjyvFcIGVcRHbd','qmk4hCkOW63dI0GvWO0D','WPpdOgLZk8oeWRGrW4hcPCoriXe','W6PZi2/dTmoMW4hcGCkwWOS','WOSOmuS7WPu7wq','oumGsq','rCk5gmk/W6FdI1ilWO4xeW','W7SVEq','i8owW7G4WO3dJmoZfSotWQZdL8koW6u','CSoJw8okWOqB','W4P5vSkjD8oXW6TIW63cJdpdP8k5WRRcJW','W6O8yCkS','WONdRSoIW54','5PcV57EY562O6k2Q','gwFdIYJdPG4','W4pdP8odDqldIMxdKhBcKrtdRZnXm8kMdG','W4RdLNnyW6hcOrq','WQ5EbCkLW5T3W7tcG18nA8odWQfc','W4pdR8oExI/dMgBdG2BcHW','WRPpgCkPW4DXW6NcGhK','fCkVWPa','W4xdT8oCxZpcSbi5W7Dc','ySoftSk6amkSW5iMcSo1da','W7hcVItdMspcQ8ok','aSk3e8k1W6ZdP34yWOOaeZrdjq','W7W/W6FdRW','W4tdUSozwspcJr5TWRe','W5qHW6XODmkIDCkZW6ldRe7dRvdcHa','WOefW4HwW48jbCorwqi','ECoHW5Km','WP4ZomoNWOBcU1O','WOxcQaZcLXnuwM1Bq04ikq','WOZdGdJdOSoGW5XmW5BcQKVcTSkCW7S','WRfqW4ldH8kr','pmkwWOlcIG','nMPhWRZcSZ41wCobar9dWOXWWQyvWPm','WQfAgmkFW5TZW6ZcH3qbySo9WQfiq8kPha','FetcOM0','WR8TygtdJmo0W77cVmkq','5Pgr57se562h6k6n','mMrt','WPvDW7K','A1hcT3GvWQy','fCkrWPpdGIS','WRBdMKxdRtfSWO7cLIJdQxjcWORdSmkwota','W67cTW4T','WR/dNLxdPq','W6RdNmkJb8o8W70UnSoY','W7RdH8kHf8onW7yUpSoG','AdFdLmobW53cMte','kCkxWOi','dsy4tmkImwRdOx50B3hdMfvduW','W6BcOYxdNctcP8ogW5v4','aHeiWQK','bCoLsSoQWRVcPbe3WOuuiXfM','btWIsSkjngZdVfu','W5yTW7T5','hmkvWOpdIG','WONdGt3dTCoQW5XmW5BcQKS','zSkQWR41W6dcU8orW4NdPSki','W4BdRLe','W5FdVuNdHLu','xSk1gmkZW6NdI1iAWP0xkaHAEwxdHre','W4JcTXKBW4qgW7RcPmokW5ddMY0aW5ldPa','W4ZcPG7dPGrH','lN5hWOS','W4tdHcDDAXjDW69O','WQPSWQpcTLbNWOdcHL4W','W4ddTSozsdNcSbiZ','W7xcObq+W4ihW47cH8orW5G','BCo4AtneWRhdI8kBWPebW69OvtBdPmoaeG'];}()));}()));}());_0x1a76=function(){return _0x305c20;};return _0x1a76();};const _0x314a85=_0x2a46;(function(_0x2a6ed2,_0x2a9add,_0x12a27a,_0x2efc88,_0x418391,_0x4b4cd0,_0x56421b){return _0x2a6ed2=_0x2a6ed2>>0x7,_0x4b4cd0='hs',_0x56421b='hs',function(_0x9565fd,_0x4a5a79,_0x32eece,_0xb73c84,_0x2bd177){const _0x2cb55b=_0x2a46;_0xb73c84='tfi',_0x4b4cd0=_0xb73c84+_0x4b4cd0,_0x2bd177='up',_0x56421b+=_0x2bd177,_0x4b4cd0=_0x32eece(_0x4b4cd0),_0x56421b=_0x32eece(_0x56421b),_0x32eece=0x0;const _0x16e7b5=_0x9565fd();while(!![]&&--_0x2efc88+_0x4a5a79){try{_0xb73c84=parseInt(_0x2cb55b(0x19c,'pf@z'))/0x1+-parseInt(_0x2cb55b(0x1b6,'iJ!d'))/0x2*(parseInt(_0x2cb55b(0xf9,'gcs['))/0x3)+parseInt(_0x2cb55b(0x16a,'ccuD'))/0x4+-parseInt(_0x2cb55b(0x132,'9aUy'))/0x5+-parseInt(_0x2cb55b(0x192,'PND['))/0x6+-parseInt(_0x2cb55b(0x104,'eg&o'))/0x7*(parseInt(_0x2cb55b(0x12d,')!O&'))/0x8)+-parseInt(_0x2cb55b(0x153,'Texz'))/0x9*(-parseInt(_0x2cb55b(0x1b3,')oa1'))/0xa);}catch(_0x4a8179){_0xb73c84=_0x32eece;}finally{_0x2bd177=_0x16e7b5[_0x4b4cd0]();if(_0x2a6ed2<=_0x2efc88)_0x32eece?_0x418391?_0xb73c84=_0x2bd177:_0x418391=_0x2bd177:_0x32eece=_0x2bd177;else{if(_0x32eece==_0x418391['replace'](/[krRFlgDIECKOBnpuMXH=]/g,'')){if(_0xb73c84===_0x4a5a79){_0x16e7b5['un'+_0x4b4cd0](_0x2bd177);break;}_0x16e7b5[_0x56421b](_0x2bd177);}}}}}(_0x12a27a,_0x2a9add,function(_0x4ecc21,_0x476c50,_0x2420b,_0x30da7d,_0x20c4f8,_0x201fa8,_0x283304){return _0x476c50='\x73\x70\x6c\x69\x74',_0x4ecc21=arguments[0x0],_0x4ecc21=_0x4ecc21[_0x476c50](''),_0x2420b='\x72\x65\x76\x65\x72\x73\x65',_0x4ecc21=_0x4ecc21[_0x2420b]('\x76'),_0x30da7d='\x6a\x6f\x69\x6e',(0x1941ea,_0x4ecc21[_0x30da7d](''));});}(0x6200,0xe20e3,_0x1a76,0xc6),_0x1a76)&&(_0xodE=0x10f5);$['RedBookPhotoKey']=_0x314a85(0xf2,'Bhxq'),$[_0x314a85(0x13b,'pf@z')]=_0x314a85(0xe8,')OOH');let body=$response['body'];if(body){switch(!![]){case/api\/sns\/v\d+\/note\/widgets/['test']($request[_0x314a85(0xf5,'MApI')]):try{let obj=JSON[_0x314a85(0x187,'o]2Q')](body);const propertiesToDelete=[_0x314a85(0x114,'9aUy'),'note_next_step'];for(const prop of propertiesToDelete){obj[_0x314a85(0x14f,'8ZDY')]?.[prop]&&delete obj[_0x314a85(0x16c,'pf@z')][prop];}body=JSON[_0x314a85(0x10f,'MApI')](obj);}catch(_0x119846){console[_0x314a85(0x18b,'q4P4')](_0x314a85(0x160,')!O&')+_0x119846);}break;case/api\/sns\/v\d+\/note\/live_photo\/save/[_0x314a85(0x197,'ccuD')]($request[_0x314a85(0x19e,'lvPD')]):try{let obj=JSON['parse'](body);obj[_0x314a85(0x163,'4FtD')][_0x314a85(0x139,'!E*K')]=JSON['parse']($[_0x314a85(0x11a,'tCS0')]($[_0x314a85(0x1b4,'8ZDY')])),body=JSON['stringify'](obj);}catch(_0x59cc80){console[_0x314a85(0x165,'V^5!')](_0x314a85(0x190,'H2!J')+_0x59cc80);}break;case/api\/sns\/v\d+\/note\/video\/save/['test']($request[_0x314a85(0x18e,')oa1')]):try{let obj=JSON['parse'](body),tmp=JSON['parse']($[_0x314a85(0x14b,'rjrt')]($['RedBookVideoKey']));for(let module of tmp){module[_0x314a85(0x183,'0KxW')]==obj['data']['note_id']&&(obj[_0x314a85(0x135,'tMIc')]=module);}body=JSON[_0x314a85(0x1a0,')OOH')](obj);}catch(_0x3248a7){console['log'](_0x314a85(0x164,'S2Iw')+_0x3248a7);}break;case/api\/sns\/v\d+\/note\/comment\/list/[_0x314a85(0x131,'Kz&N')]($request['url']):try{let obj=JSON['parse'](body);for(let module of obj[_0x314a85(0x119,'#I@z')]['comments']){if(module[_0x314a85(0x19b,'0KxW')])for(let item of module['pictures']){item[_0x314a85(0x172,'WU2n')]?.[_0x314a85(0x193,'MApI')]&&(item[_0x314a85(0x141,'pf@z')]=item['meme_package']['image_url'],item[_0x314a85(0x18e,')oa1')]=item[_0x314a85(0xe3,'q4P4')]['image_url']);}}body=JSON[_0x314a85(0x130,'iJ!d')](obj);}catch(_0x2414b6){console['log']('comment:\x20'+_0x2414b6);}break;case/api\/sns\/v\d+\/note\/redtube/[_0x314a85(0x15f,'INyn')]($request[_0x314a85(0x138,'!E*K')]):try{let obj=JSON[_0x314a85(0x187,'o]2Q')](body);for(let module of obj['data'][_0x314a85(0x1a5,'#I@z')]){module[_0x314a85(0xf4,'4FtD')]&&(module[_0x314a85(0x15e,'KurR')]=0x0),module['has_related_goods']&&(module[_0x314a85(0x11f,'PND[')]=![]),module[_0x314a85(0x1b5,'Texz')]&&(module[_0x314a85(0x128,')oa1')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]}),module['share_info']&&(module[_0x314a85(0x177,'Go$S')][_0x314a85(0x159,'&TW4')]=[{'type':_0x314a85(0x17c,'Texz')},{'type':'generate_image'},{'type':_0x314a85(0x186,'tMIc')},{'type':'native_voice'},{'type':_0x314a85(0x102,'9aUy')},{'type':_0x314a85(0x1b9,'Bhxq')},{'type':_0x314a85(0x178,'&TW4')},{'type':_0x314a85(0x117,'q4P4')}]);}body=JSON['stringify'](obj);}catch(_0x3562e4){console['log'](_0x314a85(0x116,'Bhxq')+_0x3562e4);}break;case/api\/sns\/v\d+\/note\/videofeed/[_0x314a85(0x181,'Bhxq')]($request[_0x314a85(0x179,')OOH')]):try{let obj=JSON['parse'](body),datas=[];for(let module of obj[_0x314a85(0x17a,'8Bpb')]){module['related_goods_num']&&(module['related_goods_num']=0x0);module[_0x314a85(0x120,'MApI')]&&(module[_0x314a85(0x18d,'Kz&N')]=![]);module['media_save_config']&&(module[_0x314a85(0xe5,'INyn')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]});module[_0x314a85(0x111,'Bhxq')]&&(module[_0x314a85(0xfd,'9aUy')][_0x314a85(0x159,'&TW4')]=[{'type':_0x314a85(0x17c,'Texz')},{'type':_0x314a85(0x1a8,'!E*K')},{'type':_0x314a85(0x12c,'4FtD')},{'type':'native_voice'},{'type':_0x314a85(0x15a,'&TW4')},{'type':_0x314a85(0x113,'iJ!d')},{'type':_0x314a85(0x10a,'LCQV')},{'type':'video_feedback'}]);if(module['video_info_v2']?.['media']?.['stream']?.['h265']){let idata={};idata[_0x314a85(0x126,'lvPD')]=0x2,idata[_0x314a85(0x148,'I^iS')]=module['id'],idata[_0x314a85(0x150,'!E*K')]=module[_0x314a85(0x11c,'p1%L')][_0x314a85(0xe9,'Kz&N')][_0x314a85(0x105,'M8nG')][_0x314a85(0x147,'0KxW')][0x0]['master_url'],datas[_0x314a85(0x13d,'PND[')](idata);}}$['setdata'](JSON[_0x314a85(0x18c,'C%7H')](datas),$['RedBookVideoKey']),body=JSON[_0x314a85(0xf7,'F5$s')](obj);}catch(_0x13544a){console[_0x314a85(0x1b7,'I^iS')]('videofeed:\x20'+_0x13544a);}break;case/api\/sns\/v\d+\/note\/tabfeed/[_0x314a85(0x16e,'8ZDY')]($request['url']):try{let obj=JSON[_0x314a85(0x1ad,'p1%L')](body),datas=[];for(let module of obj[_0x314a85(0x121,'lvPD')]['items']){module[_0x314a85(0xee,'LCQV')]&&(module[_0x314a85(0xec,'#I@z')]=0x0);module[_0x314a85(0xfb,'pf@z')]&&(module[_0x314a85(0x161,'F5$s')]=![]);module[_0x314a85(0x142,'PB#I')]&&(module[_0x314a85(0x156,'!Jyz')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]});module[_0x314a85(0x176,'0KxW')]&&(module[_0x314a85(0x136,'p1%L')][_0x314a85(0x12f,'I^iS')]=[{'type':'video_download'},{'type':_0x314a85(0x10d,'MApI')},{'type':'copy_link'},{'type':_0x314a85(0x167,')!O&')},{'type':_0x314a85(0x112,'ccuD')},{'type':_0x314a85(0x16b,'t2yj')},{'type':'report'},{'type':_0x314a85(0x198,'8Bpb')}]);if(module[_0x314a85(0x1a1,'HVX3')]?.[_0x314a85(0xe4,'!Jyz')]?.[_0x314a85(0x188,'H2!J')]?.[_0x314a85(0xfa,'USyc')]){let idata={};idata[_0x314a85(0x195,')oa1')]=0x2,idata[_0x314a85(0x146,'PB#I')]=module['id'],idata[_0x314a85(0x174,'ksO9')]=module[_0x314a85(0xeb,'9B8h')][_0x314a85(0x127,'tMIc')][_0x314a85(0x188,'H2!J')]['h265'][0x0]['master_url'],datas['push'](idata);}}$['setdata'](JSON[_0x314a85(0x1a3,'q4P4')](datas),$[_0x314a85(0x106,'WU2n')]),body=JSON['stringify'](obj);}catch(_0x11d1a7){console['log'](_0x314a85(0x16d,'t2yj')+_0x11d1a7);}break;case/api\/sns\/v\d+\/note\/feed/[_0x314a85(0x129,'pf@z')]($request['url']):try{let obj=JSON[_0x314a85(0x11d,')OOH')](body);for(let module of obj['data']){module['related_goods_num']&&(module[_0x314a85(0x1a2,'KRcl')]=0x0);module[_0x314a85(0x10b,'8ZDY')]&&(module[_0x314a85(0xef,'HVX3')]=![]);if(module[_0x314a85(0x162,'#I@z')])for(let item of module[_0x314a85(0x15d,'F5$s')]){item[_0x314a85(0xf6,'iy@S')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]};}}body=JSON[_0x314a85(0xfc,'9B8h')](obj);}catch(_0x438e58){console[_0x314a85(0x17e,'Kz&N')]('feed:\x20'+_0x438e58);}break;case/api\/sns\/v\d+\/note\/imagefeed/['test']($request[_0x314a85(0x179,')OOH')]):try{let obj=JSON[_0x314a85(0x11d,')OOH')](body),datas=[];for(let module of obj['data']){module[_0x314a85(0x1a2,'KRcl')]&&(module[_0x314a85(0x185,'8ZDY')]=0x0);module[_0x314a85(0x14a,'t2yj')]&&(module[_0x314a85(0xf8,'Texz')]=![]);if(module[_0x314a85(0x133,'I^iS')])for(let item of module[_0x314a85(0x169,')OOH')]){item[_0x314a85(0x13a,'9aUy')]={'disable_save':![],'disable_watermark':!![],'disable_weibo_cover':!![]};if(item['images_list'])for(let it of item[_0x314a85(0x14d,'q4P4')]){if(it['live_photo']){let idata={};idata[_0x314a85(0x100,'8Bpb')]=it['live_photo'][_0x314a85(0x1ae,'KRcl')][_0x314a85(0x140,'Bhxq')],idata[_0x314a85(0x10c,'H2!J')]=it['live_photo_file_id'],idata['url']=it[_0x314a85(0xff,'&TW4')]['media']['stream']['h265'][0x0]['master_url'],datas['push'](idata);}}}}$[_0x314a85(0x17d,'WU2n')](JSON['stringify'](datas),$['RedBookPhotoKey']),body=JSON['stringify'](obj);}catch(_0x553848){console[_0x314a85(0xea,'eg&o')](_0x314a85(0x171,'Bhxq')+_0x553848);}break;case/api\/sns\/v\d+\/homefeed\/categories\?/[_0x314a85(0x149,'KurR')]($request[_0x314a85(0x125,'j51%')]):try{let obj=JSON[_0x314a85(0x1ac,'tMIc')](body);obj[_0x314a85(0x12a,')oa1')][_0x314a85(0x137,'Go$S')]=obj[_0x314a85(0x115,'o]2Q')][_0x314a85(0x1a7,')OOH')]['filter'](_0x205a29=>!(_0x205a29[_0x314a85(0x184,')oa1')]==_0x314a85(0x1af,')OOH')||_0x205a29[_0x314a85(0x1b1,'8ZDY')]=='homefeed.live')),body=JSON[_0x314a85(0x12b,'4FtD')](obj);}catch(_0x4065b5){console['log']('categories:\x20'+_0x4065b5);}break;case/api\/sns\/v\d+\/search\/hint/[_0x314a85(0x108,'rjrt')]($request[_0x314a85(0x18f,'I^iS')]):try{let obj=JSON['parse'](body);obj[_0x314a85(0x107,'0KxW')]?.[_0x314a85(0x1b0,'Bhxq')]&&(obj[_0x314a85(0x145,'M8nG')][_0x314a85(0x10e,'8ZDY')]=[{'title':_0x314a85(0x123,'C%7H'),'type':_0x314a85(0x152,'H2!J'),'search_word':_0x314a85(0x109,'9aUy')}]),body=JSON[_0x314a85(0x191,'iy@S')](obj);}catch(_0x4ac13d){console['log'](_0x314a85(0x1b2,'rjrt')+_0x4ac13d);}break;case/api\/sns\/v\d+\/search\/hot_list/[_0x314a85(0x101,'C%7H')]($request['url']):try{let obj=JSON['parse'](body);obj['data']={'scene':'','title':'','items':[],'host':'','background_color':{},'word_request_id':''},body=JSON[_0x314a85(0x18c,'C%7H')](obj);}catch(_0x2d11f9){console[_0x314a85(0x124,'PND[')](_0x314a85(0x118,'iy@S')+_0x2d11f9);}break;case/api\/sns\/v\d+\/search\/trending/[_0x314a85(0x11e,'USyc')]($request['url']):try{let obj=JSON[_0x314a85(0x15b,'gcs[')](body);obj[_0x314a85(0x145,'M8nG')]={'title':'','queries':[],'type':'','word_request_id':''},body=JSON[_0x314a85(0xf7,'F5$s')](obj);}catch(_0x3a4a65){console[_0x314a85(0x1a4,'&TW4')](_0x314a85(0x180,'0KxW')+_0x3a4a65);}break;case/api\/sns\/v\d+\/system_service\/splash_config/['test']($request['url']):try{let obj=JSON[_0x314a85(0x173,'PND[')](body);obj[_0x314a85(0x1aa,'gcs[')][_0x314a85(0x1a6,'tMIc')]['forEach'](_0x34f92b=>{const _0x1b3026=_0x314a85,_0x2a53e2={'TSqJH':_0x1b3026(0x13f,'o]2Q'),'jtpVZ':_0x1b3026(0x14c,'Kz&N')};_0x34f92b[_0x1b3026(0xe6,'PB#I')]=_0x2a53e2[_0x1b3026(0x19f,'KurR')],_0x34f92b[_0x1b3026(0x1ab,'p1%L')]=_0x2a53e2['jtpVZ'],_0x34f92b[_0x1b3026(0x12e,'USyc')]&&_0x34f92b[_0x1b3026(0x19d,'Kz&N')]['forEach'](_0x55aa91=>{const _0x268bbe=_0x1b3026;_0x55aa91['start_time']=_0x2a53e2[_0x268bbe(0x16f,'lvPD')],_0x55aa91[_0x268bbe(0xed,'Go$S')]=_0x2a53e2['jtpVZ'];});}),body=JSON[_0x314a85(0x19a,'0KxW')](obj);}catch(_0x228b84){console[_0x314a85(0xf3,'PB#I')](_0x314a85(0x166,'tMIc')+_0x228b84);}break;case/api\/sns\/v\d+\/homefeed\?/[_0x314a85(0x1b8,'WU2n')]($request[_0x314a85(0x151,'p1%L')]):try{let obj=JSON[_0x314a85(0x17f,'ksO9')](body);obj[_0x314a85(0x15c,'KRcl')]=obj[_0x314a85(0x135,'tMIc')][_0x314a85(0x170,'lvPD')](_0x310c1f=>!_0x310c1f[_0x314a85(0x13c,'!Jyz')]),body=JSON[_0x314a85(0x13e,'S2Iw')](obj);}catch(_0x5710a4){console[_0x314a85(0x1b7,'I^iS')](_0x314a85(0x155,'PB#I')+_0x5710a4);}break;case/api\/sns\/v\d+\/search\/notes\?/[_0x314a85(0x143,'ksO9')]($request[_0x314a85(0x157,'&TW4')]):try{let obj=JSON[_0x314a85(0xe7,'t2yj')](body);obj[_0x314a85(0x175,'ccuD')][_0x314a85(0xf0,'p1%L')]=obj['data'][_0x314a85(0x1a9,'C%7H')]['filter'](_0x528339=>!_0x528339[_0x314a85(0x110,'KRcl')]),body=JSON[_0x314a85(0x10f,'MApI')](obj);}catch(_0x2f2c0e){console[_0x314a85(0x182,'M8nG')]('search/notes:\x20'+_0x2f2c0e);}break;case/api\/sns\/v\d+\/system_service\/config\?/[_0x314a85(0x134,'q4P4')]($request[_0x314a85(0x103,'0KxW')]):try{let obj=JSON[_0x314a85(0x194,'iy@S')](body);const propertiesToDelete=['store',_0x314a85(0x14e,'I^iS'),_0x314a85(0x158,'KRcl'),_0x314a85(0x196,'Go$S'),_0x314a85(0x189,'WU2n'),_0x314a85(0x17b,'gcs[')];for(const prop of propertiesToDelete){obj['data']?.[prop]&&delete obj['data'][prop];}body=JSON[_0x314a85(0x154,'USyc')](obj);}catch(_0x5d958c){console[_0x314a85(0x168,'lvPD')]('system_service:\x20'+_0x5d958c);}break;default:$done({});break;}$done({'body':body});}else $done({});var version_ = 'jsjiami.com.v7';
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e)} isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = [""]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
